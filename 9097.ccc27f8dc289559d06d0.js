"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9097],{9097:function(e,a,n){n.r(a),n(7378);var s=n(2682),t=["components"];function p(){return p=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},p.apply(this,arguments)}function m(e){var a=e.components,n=function(e,a){if(null==e)return{};var n,s,t=function(e,a){if(null==e)return{};var n,s,t={},p=Object.keys(e);for(s=0;s<p.length;s++)n=p[s],a.indexOf(n)>=0||(t[n]=e[n]);return t}(e,a);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(s=0;s<p.length;s++)n=p[s],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}(e,t);return(0,s.kt)("wrapper",p({components:a},n),(0,s.kt)("p",null,"如果是从一开始就沿用指南的示例，现在应该有一个可以显示“Hello webpack”的小项目。接下来尝试混合一些图像之类的其他资源，看看 webpack 如何处理。"),(0,s.kt)("p",null,"在 webpack 出现之前，前端开发人员会使用 ",(0,s.kt)("a",{href:"https://gruntjs.com/",parentName:"p"},"grunt")," 和 ",(0,s.kt)("a",{href:"https://gulpjs.com/",parentName:"p"},"gulp")," 等工具处理资源，并将它们从 ",(0,s.kt)("inlineCode",{parentName:"p"},"/src")," 文件夹移动到 ",(0,s.kt)("inlineCode",{parentName:"p"},"/dist")," 或 ",(0,s.kt)("inlineCode",{parentName:"p"},"/build")," 目录中。JavaScript 模块也遵循同样的方式。但是，像 webpack 这样的工具将 ",(0,s.kt)("strong",{parentName:"p"},"动态打包")," 所有依赖并创建所谓的 ",(0,s.kt)("a",{href:"/concepts/dependency-graph",parentName:"p"},"依赖图"),"。这是极好的创举，因为现在每个模块都可以 ",(0,s.kt)("strong",{parentName:"p"},"明确表述它自身的依赖"),"，以避免打包未使用的模块。"),(0,s.kt)("p",null,"webpack 最出色的功能之一就是除了引入 JavaScript，还可以通过 loader 或内置的 ",(0,s.kt)("a",{href:"/guides/asset-modules/",parentName:"p"},"资源模块")," ",(0,s.kt)("strong",{parentName:"p"},"引入任何其他类型的文件"),"。换言之，以上列出的那些 JavaScript 的优点（例如显式依赖），同样可以用来构建 web 站点或 web 应用程序中的所有非 JavaScript 内容。让我们从 CSS 开始起步，或许你可能已经熟悉了下面这些设置。"),(0,s.kt)("h2",null,(0,s.kt)("span",{id:"setup",parentName:"h2"}),"设置",(0,s.kt)("a",{href:"#setup","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,s.kt)("span",{className:"header-link",parentName:"a"}))),(0,s.kt)("p",null,"在开始前对项目做一个小的修改："),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"dist/index.html")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"<!DOCTYPE html>\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"<html>\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  <head>\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},'    <meta charset="utf-8" />\n')),(0,s.kt)("span",{className:"token deleted-sign deleted",parentName:"code"},(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"    <title>起步</title>\n")),(0,s.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"    <title>管理资源</title>\n")),(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  </head>\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  <body>\n")),(0,s.kt)("span",{className:"token deleted-sign deleted",parentName:"code"},(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},'    <script src="main.js"><\/script>\n')),(0,s.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},'    <script src="bundle.js"><\/script>\n')),(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  </body>\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"</html>")))),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"const path = require('path');\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"module.exports = {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  entry: './src/index.js',\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  output: {\n")),(0,s.kt)("span",{className:"token deleted-sign deleted",parentName:"code"},(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"    filename: 'main.js',\n")),(0,s.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"    filename: 'bundle.js',\n")),(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"    path: path.resolve(__dirname, 'dist'),\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  },\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"};")))),(0,s.kt)("h2",null,(0,s.kt)("span",{id:"loading-css",parentName:"h2"}),"加载 CSS",(0,s.kt)("a",{href:"#loading-css","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,s.kt)("span",{className:"header-link",parentName:"a"}))),(0,s.kt)("p",null,"要想在 JavaScript 模块中导入 CSS 文件，需要安装 ",(0,s.kt)("a",{href:"/loaders/style-loader",parentName:"p"},"style-loader")," 和 ",(0,s.kt)("a",{href:"/loaders/css-loader",parentName:"p"},"css-loader"),"，并在 ",(0,s.kt)("a",{href:"/configuration/module",parentName:"p"},(0,s.kt)("inlineCode",{parentName:"a"},"module")," 配置")," 中添加这些 loader："),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-bash",parentName:"pre"},(0,s.kt)("span",{className:"token function",parentName:"code"},"npm")," ",(0,s.kt)("span",{className:"token function",parentName:"code"},"install")," --save-dev style-loader css-loader")),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"const path = require('path');\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"module.exports = {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  entry: './src/index.js',\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  output: {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"    filename: 'bundle.js',\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"    path: path.resolve(__dirname, 'dist'),\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  },\n")),(0,s.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"  module: {\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"    rules: [\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.css$/i,\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        use: ['style-loader', 'css-loader'],\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"    ],\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"  },\n")),(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"};")))),(0,s.kt)("p",null,"module loader 可以链式调用。链中的每个 loader 都将对资源进行转换，不过链会逆序执行。第一个 loader 将其结果（被转换后的资源）传递给下一个 loader，依此类推。最后，webpack 期望链中的最后的 loader 返回 JavaScript。"),(0,s.kt)("p",null,"请确保 loader 的先后顺序：",(0,s.kt)("a",{href:"/loaders/style-loader",parentName:"p"},(0,s.kt)("inlineCode",{parentName:"a"},"'style-loader'"))," 在前，而 ",(0,s.kt)("a",{href:"/loaders/css-loader",parentName:"p"},(0,s.kt)("inlineCode",{parentName:"a"},"'css-loader'"))," 在后。如果不遵守此约定，webpack 可能会抛出错误。"),(0,s.kt)("aside",{className:"tip"},(0,s.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,s.kt)("p",{parentName:"aside"},"webpack 根据正则表达式确定应该查找哪些文件，并将其提供给指定的 loader。在此示例中，所有以 ",(0,s.kt)("inlineCode",{parentName:"p"},".css")," 结尾的文件，都将被提供给 ",(0,s.kt)("inlineCode",{parentName:"p"},"style-loader")," 和 ",(0,s.kt)("inlineCode",{parentName:"p"},"css-loader"),"。")),(0,s.kt)("p",null,"这些配置可以帮助在依赖于此样式的 JavaScript 文件中 ",(0,s.kt)("inlineCode",{parentName:"p"},"import './style.css'"),"。现在，在此模块执行过程中，含有 CSS 字符串的 ",(0,s.kt)("inlineCode",{parentName:"p"},"<style>")," 标签，将被插入到 HTML 文件的 ",(0,s.kt)("inlineCode",{parentName:"p"},"<head>")," 中。"),(0,s.kt)("p",null,"让我们来试试！现在在项目中添加一个新的 ",(0,s.kt)("inlineCode",{parentName:"p"},"style.css")," 文件，并将其导入到 ",(0,s.kt)("inlineCode",{parentName:"p"},"index.js")," 中："),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"project")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," webpack-demo\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- package.json\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- package-lock.json\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- webpack.config.js\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- /dist\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- bundle.js\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- index.html\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- /src\n")),(0,s.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- style.css\n")),(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- index.js\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- /node_modules")))),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"src/style.css")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-css",parentName:"pre"},(0,s.kt)("span",{className:"token selector",parentName:"code"},".hello")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,s.kt)("span",{className:"token property",parentName:"code"},"color"),(0,s.kt)("span",{className:"token punctuation",parentName:"code"},":")," red",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"}"))),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"src/index.js")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"import _ from 'lodash';\n")),(0,s.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"import './style.css';\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"function component() {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  const element = document.createElement('div');\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  // lodash 现在使用 import 引入。\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  element.innerHTML = _.join(['Hello', 'webpack'], ' ');\n")),(0,s.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"  element.classList.add('hello');\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  return element;\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"}\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"document.body.appendChild(component());")))),(0,s.kt)("p",null,"然后运行构建命令："),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-bash",parentName:"pre"},"$ ",(0,s.kt)("span",{className:"token function",parentName:"code"},"npm")," run build\n\n",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},".."),".\n",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"webpack-cli",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," Compilation finished\nasset bundle.js ",(0,s.kt)("span",{className:"token number",parentName:"code"},"72.6")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"emitted",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"minimized",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"("),"name: main",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,s.kt)("span",{className:"token number",parentName:"code"},"1")," related asset\nruntime modules ",(0,s.kt)("span",{className:"token number",parentName:"code"},"1000")," bytes ",(0,s.kt)("span",{className:"token number",parentName:"code"},"5")," modules\norphan modules ",(0,s.kt)("span",{className:"token number",parentName:"code"},"326")," bytes ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"orphan",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token number",parentName:"code"},"1")," module\ncacheable modules ",(0,s.kt)("span",{className:"token number",parentName:"code"},"539")," KiB\n  modules by path ./node_modules/ ",(0,s.kt)("span",{className:"token number",parentName:"code"},"538")," KiB\n    ./node_modules/lodash/lodash.js ",(0,s.kt)("span",{className:"token number",parentName:"code"},"530")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n    ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ",(0,s.kt)("span",{className:"token number",parentName:"code"},"6.67")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n    ./node_modules/css-loader/dist/runtime/api.js ",(0,s.kt)("span",{className:"token number",parentName:"code"},"1.57")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n  modules by path ./src/ ",(0,s.kt)("span",{className:"token number",parentName:"code"},"965")," bytes\n    ./src/index.js + ",(0,s.kt)("span",{className:"token number",parentName:"code"},"1")," modules ",(0,s.kt)("span",{className:"token number",parentName:"code"},"639")," bytes ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n    ./node_modules/css-loader/dist/cjs.js",(0,s.kt)("span",{className:"token operator",parentName:"code"},"!"),"./src/style.css ",(0,s.kt)("span",{className:"token number",parentName:"code"},"326")," bytes ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\nwebpack ",(0,s.kt)("span",{className:"token number",parentName:"code"},"5.4"),".0 compiled successfully ",(0,s.kt)("span",{className:"token keyword",parentName:"code"},"in")," ",(0,s.kt)("span",{className:"token number",parentName:"code"},"2231")," ms")),(0,s.kt)("p",null,"再次在浏览器中打开 ",(0,s.kt)("inlineCode",{parentName:"p"},"dist/index.html"),"，应该看到 ",(0,s.kt)("inlineCode",{parentName:"p"},"Hello webpack")," 现在的样式是红色。请检查页面（不要查看页面源代码，它不会显示结果，因为 ",(0,s.kt)("inlineCode",{parentName:"p"},"<style>")," 标签是由 JavaScript 动态创建的）并查看页面的 head 标签以观察 webpack 做了什么。可以发现，head 标签包含了原本不存在的 style 块元素，也就是在 ",(0,s.kt)("inlineCode",{parentName:"p"},"index.js")," 中导入的 CSS 文件中的样式。"),(0,s.kt)("p",null,"注意，在多数情况下也可以 ",(0,s.kt)("a",{href:"/plugins/mini-css-extract-plugin/#minimizing-for-production",parentName:"p"},"压缩 CSS")," 以便在生产环境中节省加载时间。最重要的是，现有的 loader 可以支持任何可以想到的 CSS 样式 —— ",(0,s.kt)("a",{href:"/loaders/postcss-loader",parentName:"p"},"postcss"),"、",(0,s.kt)("a",{href:"/loaders/sass-loader",parentName:"p"},"sass")," 和 ",(0,s.kt)("a",{href:"/loaders/less-loader",parentName:"p"},"less")," 等。"),(0,s.kt)("h2",null,(0,s.kt)("span",{id:"loading-images",parentName:"h2"}),"加载图像",(0,s.kt)("a",{href:"#loading-images","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,s.kt)("span",{className:"header-link",parentName:"a"}))),(0,s.kt)("p",null,"假如现在正在下载 CSS，但是像背景图片和图标这样的图像应该如何处理呢？webpack5 可以使用内置的 ",(0,s.kt)("a",{href:"/guides/asset-modules/",parentName:"p"},"资源模块")," 轻松地将这些内容混入系统中："),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"const path = require('path');\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"module.exports = {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  entry: './src/index.js',\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  output: {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"    filename: 'bundle.js',\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"    path: path.resolve(__dirname, 'dist'),\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  },\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  module: {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"    rules: [\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.css$/i,\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"        use: ['style-loader', 'css-loader'],\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n")),(0,s.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.(png|svg|jpg|jpeg|gif)$/i,\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        type: 'asset/resource',\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n")),(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"    ],\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  },\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"};")))),(0,s.kt)("p",null,"现在 ",(0,s.kt)("inlineCode",{parentName:"p"},"import MyImage from './my-image.png'")," 将会处理图像，将其添加到 ",(0,s.kt)("inlineCode",{parentName:"p"},"output")," 目录，并且 ",(0,s.kt)("inlineCode",{parentName:"p"},"MyImage")," 变量将包含该图像在处理后的最终的 url。如前所示，在使用 ",(0,s.kt)("a",{href:"/loaders/css-loader",parentName:"p"},"css-loader")," 时，处理 CSS 中的 ",(0,s.kt)("inlineCode",{parentName:"p"},"url('./my-image.png')")," 也会发生类似过程。loader 会识别这是一个本地文件，并将 ",(0,s.kt)("inlineCode",{parentName:"p"},"'./my-image.png'")," 路径替换为 ",(0,s.kt)("inlineCode",{parentName:"p"},"output")," 目录中图像的最终路径。而 ",(0,s.kt)("a",{href:"/loaders/html-loader",parentName:"p"},"html-loader")," 也以相同方式处理 ",(0,s.kt)("inlineCode",{parentName:"p"},'<img src="./my-image.png" />'),"。"),(0,s.kt)("p",null,"试试向项目中添加一个图像，并观察它是如何工作的："),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"project")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," webpack-demo\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- package.json\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- package-lock.json\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- webpack.config.js\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- /dist\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- bundle.js\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- index.html\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- /src\n")),(0,s.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- icon.png\n")),(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- style.css\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- index.js\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- /node_modules")))),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"src/index.js")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"import _ from 'lodash';\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"import './style.css';\n")),(0,s.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"import Icon from './icon.png';\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"function component() {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  const element = document.createElement('div');\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  // lodash 现在使用 import 引入。\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  element.innerHTML = _.join(['Hello', 'webpack'], ' ');\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  element.classList.add('hello');\n")),"\n",(0,s.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"  // 将图像添加到已经存在的 div 中。\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"  const myIcon = new Image();\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"  myIcon.src = Icon;\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"  element.appendChild(myIcon);\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"\n")),(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  return element;\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"}\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"document.body.appendChild(component());")))),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"src/style.css")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},".hello {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  color: red;\n")),(0,s.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"  background: url('./icon.png');\n")),(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"}")))),(0,s.kt)("p",null,"重新构建并再次打开 ",(0,s.kt)("inlineCode",{parentName:"p"},"index.html")," 文件："),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-bash",parentName:"pre"},"$ ",(0,s.kt)("span",{className:"token function",parentName:"code"},"npm")," run build\n\n",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},".."),".\n",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"webpack-cli",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," Compilation finished\nassets by status ",(0,s.kt)("span",{className:"token number",parentName:"code"},"9.88")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"cached",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token number",parentName:"code"},"1")," asset\nasset bundle.js ",(0,s.kt)("span",{className:"token number",parentName:"code"},"73.4")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"emitted",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"minimized",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"("),"name: main",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,s.kt)("span",{className:"token number",parentName:"code"},"1")," related asset\nruntime modules ",(0,s.kt)("span",{className:"token number",parentName:"code"},"1.82")," KiB ",(0,s.kt)("span",{className:"token number",parentName:"code"},"6")," modules\norphan modules ",(0,s.kt)("span",{className:"token number",parentName:"code"},"326")," bytes ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"orphan",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token number",parentName:"code"},"1")," module\ncacheable modules ",(0,s.kt)("span",{className:"token number",parentName:"code"},"540")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"("),"javascript",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,s.kt)("span",{className:"token number",parentName:"code"},"9.88")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"("),"asset",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},")"),"\n  modules by path ./node_modules/ ",(0,s.kt)("span",{className:"token number",parentName:"code"},"539")," KiB\n    modules by path ./node_modules/css-loader/dist/runtime/*.js ",(0,s.kt)("span",{className:"token number",parentName:"code"},"2.38")," KiB\n      ./node_modules/css-loader/dist/runtime/api.js ",(0,s.kt)("span",{className:"token number",parentName:"code"},"1.57")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n      ./node_modules/css-loader/dist/runtime/getUrl.js ",(0,s.kt)("span",{className:"token number",parentName:"code"},"830")," bytes ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n    ./node_modules/lodash/lodash.js ",(0,s.kt)("span",{className:"token number",parentName:"code"},"530")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n    ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ",(0,s.kt)("span",{className:"token number",parentName:"code"},"6.67")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n  modules by path ./src/ ",(0,s.kt)("span",{className:"token number",parentName:"code"},"1.45")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"("),"javascript",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,s.kt)("span",{className:"token number",parentName:"code"},"9.88")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"("),"asset",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},")"),"\n    ./src/index.js + ",(0,s.kt)("span",{className:"token number",parentName:"code"},"1")," modules ",(0,s.kt)("span",{className:"token number",parentName:"code"},"794")," bytes ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n    ./src/icon.png ",(0,s.kt)("span",{className:"token number",parentName:"code"},"42")," bytes ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"("),"javascript",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,s.kt)("span",{className:"token number",parentName:"code"},"9.88")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"("),"asset",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n    ./node_modules/css-loader/dist/cjs.js",(0,s.kt)("span",{className:"token operator",parentName:"code"},"!"),"./src/style.css ",(0,s.kt)("span",{className:"token number",parentName:"code"},"648")," bytes ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\nwebpack ",(0,s.kt)("span",{className:"token number",parentName:"code"},"5.4"),".0 compiled successfully ",(0,s.kt)("span",{className:"token keyword",parentName:"code"},"in")," ",(0,s.kt)("span",{className:"token number",parentName:"code"},"1972")," ms")),(0,s.kt)("p",null,"如果一切顺利，现在应该看到图标成为了重复的背景图，并且 ",(0,s.kt)("inlineCode",{parentName:"p"},"Hello webpack")," 文本旁边出现了 ",(0,s.kt)("inlineCode",{parentName:"p"},"img")," 元素。检查此元素将看到实际的文件名已更改为像 ",(0,s.kt)("inlineCode",{parentName:"p"},"29822eaa871e8eadeaa4.png")," 一样的名称。这意味着 webpack 在 ",(0,s.kt)("inlineCode",{parentName:"p"},"src")," 文件夹中找到了我们的文件，并对其进行了处理！"),(0,s.kt)("h2",null,(0,s.kt)("span",{id:"loading-fonts",parentName:"h2"}),"加载字体",(0,s.kt)("a",{href:"#loading-fonts","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,s.kt)("span",{className:"header-link",parentName:"a"}))),(0,s.kt)("p",null,"使用资源模块可以接收并加载任何文件，然后将其输出到构建目录。换言之，我们可以将它们用于任何类型的文件，也包括字体文件。更新 ",(0,s.kt)("inlineCode",{parentName:"p"},"webpack.config.js")," 以处理字体文件："),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"const path = require('path');\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"module.exports = {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  entry: './src/index.js',\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  output: {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"    filename: 'bundle.js',\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"    path: path.resolve(__dirname, 'dist'),\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  },\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  module: {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"    rules: [\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.css$/i,\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"        use: ['style-loader', 'css-loader'],\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.(png|svg|jpg|jpeg|gif)$/i,\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"        type: 'asset/resource',\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n")),(0,s.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.(woff|woff2|eot|ttf|otf)$/i,\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        type: 'asset/resource',\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n")),(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"    ],\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  },\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"};")))),(0,s.kt)("p",null,"在项目中添加一些字体文件："),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"project")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," webpack-demo\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- package.json\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- package-lock.json\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- webpack.config.js\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- /dist\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- bundle.js\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- index.html\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- /src\n")),(0,s.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- my-font.woff\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- my-font.woff2\n")),(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- icon.png\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- style.css\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- index.js\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- /node_modules")))),(0,s.kt)("p",null,"配置好 loader 并将字体文件放在合适的位置后，可以通过 ",(0,s.kt)("inlineCode",{parentName:"p"},"@font-face")," 声明将其混合。本地的 ",(0,s.kt)("inlineCode",{parentName:"p"},"url(...)")," 指令会被 webpack 获取并处理，就像处理图片一样："),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"src/style.css")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,s.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"@font-face {\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"  font-family: 'MyFont';\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"  src: url('./my-font.woff2') format('woff2'),\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"    url('./my-font.woff') format('woff');\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"  font-weight: 600;\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"  font-style: normal;\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"}\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"\n")),(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},".hello {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  color: red;\n")),(0,s.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"  font-family: 'MyFont';\n")),(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  background: url('./icon.png');\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"}")))),(0,s.kt)("p",null,"现在重新构建试试，看看 webpack 是否处理了字体："),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-bash",parentName:"pre"},"$ ",(0,s.kt)("span",{className:"token function",parentName:"code"},"npm")," run build\n\n",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},".."),".\n",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"webpack-cli",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," Compilation finished\nassets by status ",(0,s.kt)("span",{className:"token number",parentName:"code"},"9.88")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"cached",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token number",parentName:"code"},"1")," asset\nassets by info ",(0,s.kt)("span",{className:"token number",parentName:"code"},"33.2")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"immutable",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n  asset 55055dbfc7c6a83f60ba.woff ",(0,s.kt)("span",{className:"token number",parentName:"code"},"18.8")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"emitted",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"immutable",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"from: src/my-font.woff",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"("),"auxiliary name: main",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},")"),"\n  asset 8f717b802eaab4d7fb94.woff2 ",(0,s.kt)("span",{className:"token number",parentName:"code"},"14.5")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"emitted",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"immutable",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"from: src/my-font.woff2",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"("),"auxiliary name: main",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},")"),"\nasset bundle.js ",(0,s.kt)("span",{className:"token number",parentName:"code"},"73.7")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"emitted",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"minimized",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"("),"name: main",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,s.kt)("span",{className:"token number",parentName:"code"},"1")," related asset\nruntime modules ",(0,s.kt)("span",{className:"token number",parentName:"code"},"1.82")," KiB ",(0,s.kt)("span",{className:"token number",parentName:"code"},"6")," modules\norphan modules ",(0,s.kt)("span",{className:"token number",parentName:"code"},"326")," bytes ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"orphan",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token number",parentName:"code"},"1")," module\ncacheable modules ",(0,s.kt)("span",{className:"token number",parentName:"code"},"541")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"("),"javascript",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,s.kt)("span",{className:"token number",parentName:"code"},"43.1")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"("),"asset",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},")"),"\n  javascript modules ",(0,s.kt)("span",{className:"token number",parentName:"code"},"541")," KiB\n    modules by path ./node_modules/ ",(0,s.kt)("span",{className:"token number",parentName:"code"},"539")," KiB\n      modules by path ./node_modules/css-loader/dist/runtime/*.js ",(0,s.kt)("span",{className:"token number",parentName:"code"},"2.38")," KiB ",(0,s.kt)("span",{className:"token number",parentName:"code"},"2")," modules\n      ./node_modules/lodash/lodash.js ",(0,s.kt)("span",{className:"token number",parentName:"code"},"530")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n      ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ",(0,s.kt)("span",{className:"token number",parentName:"code"},"6.67")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n    modules by path ./src/ ",(0,s.kt)("span",{className:"token number",parentName:"code"},"1.98")," KiB\n      ./src/index.js + ",(0,s.kt)("span",{className:"token number",parentName:"code"},"1")," modules ",(0,s.kt)("span",{className:"token number",parentName:"code"},"794")," bytes ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n      ./node_modules/css-loader/dist/cjs.js",(0,s.kt)("span",{className:"token operator",parentName:"code"},"!"),"./src/style.css ",(0,s.kt)("span",{className:"token number",parentName:"code"},"1.21")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n  asset modules ",(0,s.kt)("span",{className:"token number",parentName:"code"},"126")," bytes ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"("),"javascript",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,s.kt)("span",{className:"token number",parentName:"code"},"43.1")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"("),"asset",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},")"),"\n    ./src/icon.png ",(0,s.kt)("span",{className:"token number",parentName:"code"},"42")," bytes ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"("),"javascript",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,s.kt)("span",{className:"token number",parentName:"code"},"9.88")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"("),"asset",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n    ./src/my-font.woff2 ",(0,s.kt)("span",{className:"token number",parentName:"code"},"42")," bytes ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"("),"javascript",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,s.kt)("span",{className:"token number",parentName:"code"},"14.5")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"("),"asset",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n    ./src/my-font.woff ",(0,s.kt)("span",{className:"token number",parentName:"code"},"42")," bytes ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"("),"javascript",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,s.kt)("span",{className:"token number",parentName:"code"},"18.8")," KiB ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"("),"asset",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\nwebpack ",(0,s.kt)("span",{className:"token number",parentName:"code"},"5.4"),".0 compiled successfully ",(0,s.kt)("span",{className:"token keyword",parentName:"code"},"in")," ",(0,s.kt)("span",{className:"token number",parentName:"code"},"2142")," ms")),(0,s.kt)("p",null,"重新打开 ",(0,s.kt)("inlineCode",{parentName:"p"},"dist/index.html")," 观察 ",(0,s.kt)("inlineCode",{parentName:"p"},"Hello webpack")," 文本是否换上了新的字体。如果一切顺利，应该能看到已经发生了变化。"),(0,s.kt)("h2",null,(0,s.kt)("span",{id:"loading-data",parentName:"h2"}),"加载数据",(0,s.kt)("a",{href:"#loading-data","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,s.kt)("span",{className:"header-link",parentName:"a"}))),(0,s.kt)("p",null,"此外，可以加载的有用资源还有数据，如 JSON 文件、CSV、TSV 和 XML。与 NodeJS 类似，对 JSON 的支持实际上也是内置的，即 ",(0,s.kt)("inlineCode",{parentName:"p"},"import Data from './data.json'")," 默认将正常运行。可以使用 ",(0,s.kt)("a",{href:"https://github.com/theplatapi/csv-loader",parentName:"p"},"csv-loader")," 和 ",(0,s.kt)("a",{href:"https://github.com/gisikw/xml-loader",parentName:"p"},"xml-loader")," 导入 CSV、TSV 与 XML。接下来试试加载这三类文件："),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-bash",parentName:"pre"},(0,s.kt)("span",{className:"token function",parentName:"code"},"npm")," ",(0,s.kt)("span",{className:"token function",parentName:"code"},"install")," --save-dev csv-loader xml-loader")),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"const path = require('path');\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"module.exports = {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  entry: './src/index.js',\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  output: {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"    filename: 'bundle.js',\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"    path: path.resolve(__dirname, 'dist'),\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  },\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  module: {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"    rules: [\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.css$/i,\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"        use: ['style-loader', 'css-loader'],\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.(png|svg|jpg|jpeg|gif)$/i,\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"        type: 'asset/resource',\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.(woff|woff2|eot|ttf|otf)$/i,\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"        type: 'asset/resource',\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n")),(0,s.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.(csv|tsv)$/i,\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        use: ['csv-loader'],\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.xml$/i,\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        use: ['xml-loader'],\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n")),(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"    ],\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  },\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"};")))),(0,s.kt)("p",null,"在项目中添加一些数据文件："),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"project")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," webpack-demo\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- package.json\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- package-lock.json\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- webpack.config.js\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- /dist\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- bundle.js\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- index.html\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- /src\n")),(0,s.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- data.xml\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- data.csv\n")),(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- my-font.woff\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- my-font.woff2\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- icon.png\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- style.css\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- index.js\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- /node_modules")))),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"src/data.xml")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-xml",parentName:"pre"},(0,s.kt)("span",{className:"token prolog",parentName:"code"},'<?xml version="1.0" encoding="UTF-8"?>'),"\n",(0,s.kt)("span",{className:"token tag",parentName:"code"},(0,s.kt)("span",{className:"token tag",parentName:"span"},(0,s.kt)("span",{className:"token punctuation",parentName:"span"},"<"),"note"),(0,s.kt)("span",{className:"token punctuation",parentName:"span"},">")),"\n  ",(0,s.kt)("span",{className:"token tag",parentName:"code"},(0,s.kt)("span",{className:"token tag",parentName:"span"},(0,s.kt)("span",{className:"token punctuation",parentName:"span"},"<"),"to"),(0,s.kt)("span",{className:"token punctuation",parentName:"span"},">")),"Mary",(0,s.kt)("span",{className:"token tag",parentName:"code"},(0,s.kt)("span",{className:"token tag",parentName:"span"},(0,s.kt)("span",{className:"token punctuation",parentName:"span"},"</"),"to"),(0,s.kt)("span",{className:"token punctuation",parentName:"span"},">")),"\n  ",(0,s.kt)("span",{className:"token tag",parentName:"code"},(0,s.kt)("span",{className:"token tag",parentName:"span"},(0,s.kt)("span",{className:"token punctuation",parentName:"span"},"<"),"from"),(0,s.kt)("span",{className:"token punctuation",parentName:"span"},">")),"John",(0,s.kt)("span",{className:"token tag",parentName:"code"},(0,s.kt)("span",{className:"token tag",parentName:"span"},(0,s.kt)("span",{className:"token punctuation",parentName:"span"},"</"),"from"),(0,s.kt)("span",{className:"token punctuation",parentName:"span"},">")),"\n  ",(0,s.kt)("span",{className:"token tag",parentName:"code"},(0,s.kt)("span",{className:"token tag",parentName:"span"},(0,s.kt)("span",{className:"token punctuation",parentName:"span"},"<"),"heading"),(0,s.kt)("span",{className:"token punctuation",parentName:"span"},">")),"Reminder",(0,s.kt)("span",{className:"token tag",parentName:"code"},(0,s.kt)("span",{className:"token tag",parentName:"span"},(0,s.kt)("span",{className:"token punctuation",parentName:"span"},"</"),"heading"),(0,s.kt)("span",{className:"token punctuation",parentName:"span"},">")),"\n  ",(0,s.kt)("span",{className:"token tag",parentName:"code"},(0,s.kt)("span",{className:"token tag",parentName:"span"},(0,s.kt)("span",{className:"token punctuation",parentName:"span"},"<"),"body"),(0,s.kt)("span",{className:"token punctuation",parentName:"span"},">")),"Call Cindy on Tuesday",(0,s.kt)("span",{className:"token tag",parentName:"code"},(0,s.kt)("span",{className:"token tag",parentName:"span"},(0,s.kt)("span",{className:"token punctuation",parentName:"span"},"</"),"body"),(0,s.kt)("span",{className:"token punctuation",parentName:"span"},">")),"\n",(0,s.kt)("span",{className:"token tag",parentName:"code"},(0,s.kt)("span",{className:"token tag",parentName:"span"},(0,s.kt)("span",{className:"token punctuation",parentName:"span"},"</"),"note"),(0,s.kt)("span",{className:"token punctuation",parentName:"span"},">")))),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"src/data.csv")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-csv",parentName:"pre"},"to,from,heading,body\nMary,John,Reminder,Call Cindy on Tuesday\nZoe,Bill,Reminder,Buy orange juice\nAutumn,Lindsey,Letter,I miss you\n")),(0,s.kt)("p",null,"现在可以导入这四种类型的数据（JSON, CSV, TSV, XML）中的任何一种了，所导入的 ",(0,s.kt)("inlineCode",{parentName:"p"},"Data")," 变量，将包含可直接使用的已解析的 JSON："),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"src/index.js")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"import _ from 'lodash';\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"import './style.css';\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"import Icon from './icon.png';\n")),(0,s.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"import Data from './data.xml';\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"import Notes from './data.csv';\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"function component() {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  const element = document.createElement('div');\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  // lodash 现在使用 import 引入\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  element.innerHTML = _.join(['Hello', 'webpack'], ' ');\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  element.classList.add('hello');\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  // 将图像添加到已经存在的 div 中。\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  const myIcon = new Image();\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  myIcon.src = Icon;\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  element.appendChild(myIcon);\n")),"\n",(0,s.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"  console.log(Data);\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"  console.log(Notes);\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"\n")),(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  return element;\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"}\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"document.body.appendChild(component());")))),(0,s.kt)("p",null,"重新执行 ",(0,s.kt)("inlineCode",{parentName:"p"},"npm run build")," 命令，然后打开 ",(0,s.kt)("inlineCode",{parentName:"p"},"dist/index.html"),"。在开发者工具中的控制台应该能够看到成功打印了导入的数据！"),(0,s.kt)("aside",{className:"tip"},(0,s.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,s.kt)("p",{parentName:"aside"},"在使用 ",(0,s.kt)("a",{href:"https://github.com/d3",parentName:"p"},"d3")," 等工具实现某些数据可视化时，这个功能极其有用。这将帮助不用在运行时发送请求获取和解析数据，而是在构建过程中将其提前加载到模块中，以便浏览器加载模块后，可以直接访问解析过的数据。")),(0,s.kt)("aside",{className:"warning"},(0,s.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,s.kt)("p",{parentName:"aside"},"只有在使用 JSON 模块默认导出时会没有警告。")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,s.kt)("span",{className:"token comment",parentName:"code"},"// 没有警告"),"\n",(0,s.kt)("span",{className:"token keyword",parentName:"code"},"import")," data ",(0,s.kt)("span",{className:"token keyword",parentName:"code"},"from")," ",(0,s.kt)("span",{className:"token string",parentName:"code"},"'./data.json'"),(0,s.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,s.kt)("span",{className:"token comment",parentName:"code"},"// 显示警告，规范不允许这样做。"),"\n",(0,s.kt)("span",{className:"token keyword",parentName:"code"},"import")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"{")," foo ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"}")," ",(0,s.kt)("span",{className:"token keyword",parentName:"code"},"from")," ",(0,s.kt)("span",{className:"token string",parentName:"code"},"'./data.json'"),(0,s.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,s.kt)("h3",null,(0,s.kt)("span",{id:"customize-parser-of-json-modules",parentName:"h3"}),"自定义 JSON 模块解析器",(0,s.kt)("a",{href:"#customize-parser-of-json-modules","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,s.kt)("span",{className:"header-link",parentName:"a"}))),(0,s.kt)("p",null,"通过使用 ",(0,s.kt)("a",{href:"/configuration/module/#ruleparserparse",parentName:"p"},"自定义解析器")," 替代特定的 webpack loader，可以将任何 ",(0,s.kt)("inlineCode",{parentName:"p"},"toml"),"、",(0,s.kt)("inlineCode",{parentName:"p"},"yaml")," 或 ",(0,s.kt)("inlineCode",{parentName:"p"},"json5")," 文件作为 JSON 模块导入。"),(0,s.kt)("p",null,"假设 ",(0,s.kt)("inlineCode",{parentName:"p"},"src")," 文件夹下有 ",(0,s.kt)("inlineCode",{parentName:"p"},"data.toml"),"、",(0,s.kt)("inlineCode",{parentName:"p"},"data.yaml")," 以及 ",(0,s.kt)("inlineCode",{parentName:"p"},"data.json5")," 文件："),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"src/data.toml")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-toml",parentName:"pre"},'title = "TOML Example"\n\n[owner]\nname = "Tom Preston-Werner"\norganization = "GitHub"\nbio = "GitHub Cofounder & CEO\\nLikes tater tots and beer."\ndob = 1979-05-27T07:32:00Z\n')),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"src/data.yaml")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-yaml",parentName:"pre"},(0,s.kt)("span",{className:"token key atrule",parentName:"code"},"title"),(0,s.kt)("span",{className:"token punctuation",parentName:"code"},":")," YAML Example\n",(0,s.kt)("span",{className:"token key atrule",parentName:"code"},"owner"),(0,s.kt)("span",{className:"token punctuation",parentName:"code"},":"),"\n  ",(0,s.kt)("span",{className:"token key atrule",parentName:"code"},"name"),(0,s.kt)("span",{className:"token punctuation",parentName:"code"},":")," Tom Preston",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"-"),"Werner\n  ",(0,s.kt)("span",{className:"token key atrule",parentName:"code"},"organization"),(0,s.kt)("span",{className:"token punctuation",parentName:"code"},":")," GitHub\n  ",(0,s.kt)("span",{className:"token key atrule",parentName:"code"},"bio"),(0,s.kt)("span",{className:"token punctuation",parentName:"code"},":")," ",(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"|"),(0,s.kt)("span",{className:"token punctuation",parentName:"code"},"-"),"\n    GitHub Cofounder & CEO\n    Likes tater tots and beer.\n  ",(0,s.kt)("span",{className:"token key atrule",parentName:"code"},"dob"),(0,s.kt)("span",{className:"token punctuation",parentName:"code"},":")," ",(0,s.kt)("span",{className:"token datetime number",parentName:"code"},"1979-05-27T07:32:00.000Z"))),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"src/data.json5")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-json5",parentName:"pre"},"{\n  // comment\n  title: 'JSON5 Example',\n  owner: {\n    name: 'Tom Preston-Werner',\n    organization: 'GitHub',\n    bio: 'GitHub Cofounder & CEO\\n\\\nLikes tater tots and beer.',\n    dob: '1979-05-27T07:32:00.000Z',\n  },\n}\n")),(0,s.kt)("p",null,"首先安装 ",(0,s.kt)("inlineCode",{parentName:"p"},"toml"),"，",(0,s.kt)("inlineCode",{parentName:"p"},"yamljs")," 和 ",(0,s.kt)("inlineCode",{parentName:"p"},"json5")," 对应的包："),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-bash",parentName:"pre"},(0,s.kt)("span",{className:"token function",parentName:"code"},"npm")," ",(0,s.kt)("span",{className:"token function",parentName:"code"},"install")," toml yamljs json5 --save-dev")),(0,s.kt)("p",null,"并在 webpack 中配置它们："),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"const path = require('path');\n")),(0,s.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"const toml = require('toml');\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"const yaml = require('yamljs');\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"const json5 = require('json5');\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"module.exports = {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  entry: './src/index.js',\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  output: {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"    filename: 'bundle.js',\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"    path: path.resolve(__dirname, 'dist'),\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  },\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  module: {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"    rules: [\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.css$/i,\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"        use: ['style-loader', 'css-loader'],\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.(png|svg|jpg|jpeg|gif)$/i,\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"        type: 'asset/resource',\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.(woff|woff2|eot|ttf|otf)$/i,\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"        type: 'asset/resource',\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.(csv|tsv)$/i,\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"        use: ['csv-loader'],\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.xml$/i,\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"        use: ['xml-loader'],\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n")),(0,s.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.toml$/i,\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        type: 'json',\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        parser: {\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"          parse: toml.parse,\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        },\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.yaml$/i,\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        type: 'json',\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        parser: {\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"          parse: yaml.parse,\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        },\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.json5$/i,\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        type: 'json',\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        parser: {\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"          parse: json5.parse,\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        },\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n")),(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"    ],\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  },\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"};")))),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"src/index.js")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"import _ from 'lodash';\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"import './style.css';\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"import Icon from './icon.png';\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"import Data from './data.xml';\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"import Notes from './data.csv';\n")),(0,s.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"import toml from './data.toml';\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"import yaml from './data.yaml';\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"import json from './data.json5';\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"console.log(toml.title); // 输出 `TOML Example`\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"console.log(toml.owner.name); // 输出 `Tom Preston-Werner`\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"console.log(yaml.title); // 输出 `YAML Example`\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"console.log(yaml.owner.name); // 输出 `Tom Preston-Werner`\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"console.log(json.title); // 输出 `JSON5 Example`\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"},"console.log(json.owner.name); // 输出 `Tom Preston-Werner`\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"function component() {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  const element = document.createElement('div');\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  // lodash 现在使用 import 引入。\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  element.innerHTML = _.join(['Hello', 'webpack'], ' ');\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  element.classList.add('hello');\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  // 将图像添加到已经存在的 div 中。\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  const myIcon = new Image();\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  myIcon.src = Icon;\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  element.appendChild(myIcon);\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  console.log(Data);\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  console.log(Notes);\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  return element;\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"}\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"document.body.appendChild(component());")))),(0,s.kt)("p",null,"重新执行 ",(0,s.kt)("inlineCode",{parentName:"p"},"npm run build")," 命令，然后打开 ",(0,s.kt)("inlineCode",{parentName:"p"},"dist/index.html")," 就应该能够看到导入的数据会被打印到控制台上！"),(0,s.kt)("h2",null,(0,s.kt)("span",{id:"global-assets",parentName:"h2"}),"全局资源",(0,s.kt)("a",{href:"#global-assets","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,s.kt)("span",{className:"header-link",parentName:"a"}))),(0,s.kt)("p",null,"上述所有内容中最出色之处在于，以这种方式加载资源，可以以更直观的方式将模块和资源组合在一起。无需依赖于含有全部资源的 ",(0,s.kt)("inlineCode",{parentName:"p"},"/assets")," 目录，而是将资源与代码组合在一起使用。例如，类似这样的结构会非常有用："),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,s.kt)("span",{className:"token deleted-sign deleted",parentName:"code"},(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- /assets\n")),(0,s.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"}," |– /components\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"}," |  |– /my-component\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"}," |  |  |– index.jsx\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"}," |  |  |– index.css\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"}," |  |  |– icon.svg\n"),(0,s.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,s.kt)("span",{className:"token line",parentName:"span"}," |  |  |– img.png")))),(0,s.kt)("p",null,"这种配置方式会使代码更具备可移植性，因为现有的集中放置的方式会让紧密耦合所有资源。假如想在另一个项目中使用 ",(0,s.kt)("inlineCode",{parentName:"p"},"/my-component"),"，只需将其复制或移动到 ",(0,s.kt)("inlineCode",{parentName:"p"},"/components")," 目录下。只要你已经安装过全部 ",(0,s.kt)("strong",{parentName:"p"},"外部依赖")," ，并且 ",(0,s.kt)("strong",{parentName:"p"},"已经在配置中定义过相同的 loader")," ，那么项目应该能够良好运行。"),(0,s.kt)("p",null,"但是，假如只能被局限在旧有开发方式，或者有一些在多个组件（视图、模板、模块等）之间共享的资源，仍然可以将这些资源存储在一个基本目录中，甚至配合 ",(0,s.kt)("a",{href:"/configuration/resolve/#resolvealias",parentName:"p"},"alias")," 可以更方便使用 ",(0,s.kt)("inlineCode",{parentName:"p"},"import")," 导入。"),(0,s.kt)("h2",null,(0,s.kt)("span",{id:"wrapping-up",parentName:"h2"}),"回退处理",(0,s.kt)("a",{href:"#wrapping-up","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,s.kt)("span",{className:"header-link",parentName:"a"}))),(0,s.kt)("p",null,"在下篇指南中无需使用本指南中所有用到的资源，因此需要进行一些清理工作，以便为下篇指南 ",(0,s.kt)("a",{href:"/guides/output-management/",parentName:"p"},"管理输出")," 做好准备："),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"project")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," webpack-demo\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- package.json\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- package-lock.json\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- webpack.config.js\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- /dist\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- bundle.js\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- index.html\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- /src\n")),(0,s.kt)("span",{className:"token deleted-sign deleted",parentName:"code"},(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- data.csv\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- data.json5\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- data.toml\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- data.xml\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- data.yaml\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- icon.png\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- my-font.woff\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- my-font.woff2\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- style.css\n")),(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"   |- index.js\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"}," |- /node_modules")))),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"const path = require('path');\n")),(0,s.kt)("span",{className:"token deleted-sign deleted",parentName:"code"},(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"const toml = require('toml');\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"const yaml = require('yamljs');\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"const json5 = require('json5');\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"module.exports = {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  entry: './src/index.js',\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  output: {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"    filename: 'bundle.js',\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"    path: path.resolve(__dirname, 'dist'),\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  },\n")),(0,s.kt)("span",{className:"token deleted-sign deleted",parentName:"code"},(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"  module: {\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"    rules: [\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.css$/i,\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        use: ['style-loader', 'css-loader'],\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.(png|svg|jpg|jpeg|gif)$/i,\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        type: 'asset/resource',\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.(woff|woff2|eot|ttf|otf)$/i,\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        type: 'asset/resource',\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.(csv|tsv)$/i,\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        use: ['csv-loader'],\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.xml$/i,\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        use: ['xml-loader'],\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.toml$/i,\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        type: 'json',\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        parser: {\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"          parse: toml.parse,\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        },\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.yaml$/i,\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        type: 'json',\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        parser: {\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"          parse: yaml.parse,\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        },\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      {\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        test: /\\.json5$/i,\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        type: 'json',\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        parser: {\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"          parse: json5.parse,\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"        },\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"      },\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"    ],\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"  },\n")),(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"};")))),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"src/index.js")),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"import _ from 'lodash';\n")),(0,s.kt)("span",{className:"token deleted-sign deleted",parentName:"code"},(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"import './style.css';\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"import Icon from './icon.png';\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"import Data from './data.xml';\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"import Notes from './data.csv';\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"import toml from './data.toml';\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"import yaml from './data.yaml';\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"import json from './data.json5';\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"console.log(toml.title); // 输出 `TOML Example`\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"console.log(toml.owner.name); // 输出 `Tom Preston-Werner`\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"console.log(yaml.title); // 输出 `YAML Example`\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"console.log(yaml.owner.name); // 输出 `Tom Preston-Werner`\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"console.log(json.title); // 输出 `JSON5 Example`\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"console.log(json.owner.name); // 输出 `Tom Preston-Werner`\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"function component() {\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  const element = document.createElement('div');\n")),"\n",(0,s.kt)("span",{className:"token deleted-sign deleted",parentName:"code"},(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"  // lodash 现在使用 import 引入。\n")),(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  element.innerHTML = _.join(['Hello', 'webpack'], ' ');\n")),(0,s.kt)("span",{className:"token deleted-sign deleted",parentName:"code"},(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"  element.classList.add('hello');\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"  // 将图像添加到已经存在的 div 中。\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"  const myIcon = new Image();\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"  myIcon.src = Icon;\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"  element.appendChild(myIcon);\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"  console.log(Data);\n"),(0,s.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,s.kt)("span",{className:"token line",parentName:"span"},"  console.log(Notes);\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"  return element;\n"),(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"}\n")),"\n",(0,s.kt)("span",{className:"token unchanged",parentName:"code"},(0,s.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,s.kt)("span",{className:"token line",parentName:"span"},"document.body.appendChild(component());")))),(0,s.kt)("p",null,"并移除之前添加的依赖："),(0,s.kt)("pre",null,(0,s.kt)("code",{className:"hljs language-bash",parentName:"pre"},(0,s.kt)("span",{className:"token function",parentName:"code"},"npm")," uninstall css-loader csv-loader json5 style-loader toml xml-loader yamljs")),(0,s.kt)("h2",null,(0,s.kt)("span",{id:"next-guide",parentName:"h2"}),"下篇指南",(0,s.kt)("a",{href:"#next-guide","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,s.kt)("span",{className:"header-link",parentName:"a"}))),(0,s.kt)("p",null,"我们将继续移步到 ",(0,s.kt)("a",{href:"/guides/output-management/",parentName:"p"},"管理输出"),"。"),(0,s.kt)("h2",null,(0,s.kt)("span",{id:"further-reading",parentName:"h2"}),"延伸阅读",(0,s.kt)("a",{href:"#further-reading","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,s.kt)("span",{className:"header-link",parentName:"a"}))),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"SurviveJS 额外介绍了 ",(0,s.kt)("a",{href:"https://survivejs.com/webpack/loading/fonts/",parentName:"li"},"字体加载"),"。")))}m.isMDXComponent=!0,a.default=m}}]);