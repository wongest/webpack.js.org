<!DOCTYPE html><html lang="zh-cmn-Hans"><head><title data-rh="true">Combined printable page | webpack 中文文档</title><meta data-rh="true" charset="utf-8"/><meta data-rh="true" name="theme-color" content="#2B3A42"/><meta data-rh="true" name="viewport" content="width=device-width, initial-scale=1"/><meta data-rh="true" name="robots" content="noindex,nofollow"/><meta data-rh="true" name="description" content="webpack 是一个模块打包器。它的主要目标是将 JavaScript 文件打包在一起，打包后的文件用于在浏览器中使用，但它也能够胜任转换、打包或包裹任何资源。"/><meta data-rh="true" property="og:site_name" content="webpack"/><meta data-rh="true" property="og:type" content="website"/><meta data-rh="true" property="og:title" content="Combined printable page | webpack 中文文档"/><meta data-rh="true" property="og:description" name="description" content="webpack 是一个模块打包器。它的主要目标是将 JavaScript 文件打包在一起，打包后的文件用于在浏览器中使用，但它也能够胜任转换、打包或包裹任何资源。"/><meta data-rh="true" property="og:image" content="https://webpack.js.org/icon-pwa-512x512.d3dae4189855b3a72ff9.png"/><meta data-rh="true" property="twitter:card" content="summary"/><meta data-rh="true" property="twitter:site" content="@webpack"/><meta data-rh="true" property="twitter:creator" content="@webpack"/><meta data-rh="true" property="twitter:domain" content="https://webpack.js.org/"/><meta data-rh="true" name="keywords" content="webpack5, webpack, webpack 中文文档, webpack 官方中文, webpack 5 官方中文, 印记中文, docschina, docschina.org, webpack.docschina.org, doc.react-china.org, nodejs.cn, vue.docschina.org, babel.docschina.org, parceljs.docschina.org, rollup.docschina.org, koajs.docschina.org"/><meta data-rh="true" name="mobile-web-app-capable" content="yes"/><meta data-rh="true" name="apple-mobile-web-app-capable" content="yes"/><meta data-rh="true" name="apple-mobile-web-app-status-bar-style" content="black"/><meta data-rh="true" name="apple-mobile-web-app-title" content="webpack"/><meta data-rh="true" name="msapplication-TileImage" content="/icon_150x150.png"/><meta data-rh="true" name="msapplication-TileColor" content="#465e69"/><link data-rh="true" rel="icon" type="image/x-icon" href="/favicon.f326220248556af65f41.ico"/><link data-rh="true" rel="manifest" href="/manifest.json"/><link data-rh="true" rel="canonical" href="https://webpack.docschina.org/plugins/printable/"/><link data-rh="true" rel="icon" sizes="192x192" href="/icon_192x192.png"/><link data-rh="true" rel="icon" sizes="512x512" href="/icon_512x512.png"/><link data-rh="true" rel="apple-touch-icon" href="/icon_180x180.png"/><link data-rh="true" rel="mask-icon" href="/logo-on-white-bg.47eff95f9c01c5972f6f.svg" color="#465e69"/><link rel="stylesheet" href=/index.c114afea0778b47a418a.css /><link rel="stylesheet" href=/9517.acfe42251eae743e4e22.css /></head><body><div id="root"><div class="site"><div class="site__header"><header class="bg-blue-800 dark:bg-gray-900"><div class="flex items-center py-10 px-[16px] justify-between md:px-[24px] md:max-w-[1024px] md:mx-auto md:justify-start"><button class="bg-transparent border-none md:hidden"><svg viewBox="-62 138 25 25" width="20" height="20" class="fill-current text-white"><path fill="currentColor" d="M-60.2 140.2h20.9c1 0 1.8.8 1.8 1.8s-.8 1.8-1.8 1.8h-20.9c-1 0-1.8-.8-1.8-1.8s.8-1.8 1.8-1.8M-60.2 148.7h20.9c1 0 1.8.8 1.8 1.8s-.8 1.8-1.8 1.8h-20.9c-1 0-1.8-.8-1.8-1.8s.8-1.8 1.8-1.8M-60.2 157.2h20.9c1 0 1.8.8 1.8 1.8s-.8 1.8-1.8 1.8h-20.9c-1 0-1.8-.8-1.8-1.8s.8-1.8 1.8-1.8"></path></svg></button><a class="md:mr-auto" href="/"><img class="logo" src="/site-logo.1fcab817090e78435061.svg" alt="webpack logo" width="122" height="35"/></a><nav class="hidden md:inline-grid md:grid-flow-col md:gap-x-[18px]"><a class="text-gray-100 dark:text-gray-100 text-sm font-light uppercase hover:text-blue-200" href="/concepts/">中文文档</a><a class="text-gray-100 dark:text-gray-100 text-sm font-light uppercase hover:text-blue-200" href="/contribute/">参与贡献</a><a class="text-gray-100 dark:text-gray-100 text-sm font-light uppercase hover:text-blue-200" href="/blog/">博客</a><a href="https://docschina.org" target="_blank" rel="noopener noreferrer" class="text-gray-100 dark:text-gray-100 text-sm font-light uppercase hover:text-blue-200">印记中文</a><a href="https://github.com/webpack/webpack" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-gray-100 dark:text-gray-200 hover:text-blue-200" title="webpack on GitHub"><svg viewBox="0 0 24 24" aria-hidden="true" fill="currentColor" width="16"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 6.8 9.5c.5 0 .7-.2.7-.5v-1.7C6.7 20 6.1 18 6.1 18c-.4-1.2-1-1.5-1-1.5-1-.6 0-.6 0-.6 1 0 1.5 1 1.5 1 .9 1.6 2.4 1.1 3 .9 0-.7.3-1.1.6-1.4-2.2-.2-4.6-1-4.6-4.9 0-1.1.4-2 1-2.7 0-.3-.4-1.3.2-2.7 0 0 .8-.2 2.7 1a9.4 9.4 0 0 1 5 0c2-1.2 2.8-1 2.8-1 .5 1.4.1 2.4 0 2.7.7.7 1 1.6 1 2.7 0 3.8-2.3 4.7-4.5 5 .4.2.7.8.7 1.8V21c0 .3.2.6.7.5 4-1.3 6.8-5 6.8-9.5A10 10 0 0 0 12 2"></path></svg></a><a href="https://twitter.com/webpack" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-gray-100 dark:text-gray-200 hover:text-blue-200" title="webpack on Twitter"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" aria-hidden="true" fill="currentColor" width="16"><path d="M28 6.937c-.957.425-1.985.711-3.064.84a5.343 5.343 0 0 0 2.345-2.951 10.696 10.696 0 0 1-3.388 1.295 5.334 5.334 0 0 0-9.089 4.864A15.143 15.143 0 0 1 3.809 5.411a5.321 5.321 0 0 0-.721 2.683 5.33 5.33 0 0 0 2.372 4.439 5.323 5.323 0 0 1-2.416-.667v.067a5.335 5.335 0 0 0 4.279 5.23 5.336 5.336 0 0 1-2.409.092 5.34 5.34 0 0 0 4.983 3.705 10.699 10.699 0 0 1-6.625 2.284c-.43 0-.855-.025-1.273-.075a15.102 15.102 0 0 0 8.177 2.396c9.812 0 15.176-8.128 15.176-15.177 0-.231-.005-.461-.015-.69A10.855 10.855 0 0 0 28 6.937z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/webpack" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-gray-100 dark:text-gray-200 hover:text-blue-200" title="webpack on StackOverflow"><svg viewBox="0 0 24 24" aria-hidden="true" fill="currentColor" width="16"><path d="M17.4 20.2v-5.4h1.8V22H3v-7.2h1.8v5.4zM6.8 14.3l.3-1.7 8.8 1.8-.3 1.8zm1.1-4.2.8-1.6 8.1 3.8-.7 1.6zm2.3-4 1.1-1.4 7 5.8-1.2 1.4L10 6m4.7-4L20 9l-1.4 1-5.4-7 1.4-1m-8 16.5v-1.8h9v1.8z"></path></svg></a><nav class="dropdown "><button aria-haspopup="true" aria-expanded="false" aria-label="Select language"><svg viewBox="0 0 610 560" xmlns="http://www.w3.org/2000/svg" class="dropdown__language text-gray-100 hover:text-blue-200 transition-colors duration-200"><path d="m304.8 99.2-162.5-57.3v353.6l162.5-52.6z"></path><path d="m300.9 99 168.7-57.3v353.6l-168.7-52.5zm-200.7 358.4 200.7-66.9v-291.5l-200.7 66.9z" fill="currentColor"></path><path d="m392.4 461.8 28.4 46.8 15-43.5zm-223.9-262.3c-1.1-1 1.4 8.6 4.8 12 6.1 6.1 10.8 6.9 13.3 7 5.6.2 12.5-1.4 16.5-3.1s10.9-5.2 13.5-10.4c.6-1.1 2.1-3 1.1-7.5-.7-3.5-3-4.8-5.7-4.6s-11 2.4-15 3.6-12.2 3.7-15.8 4.5-11.5-.3-12.7-1.5zm101.2 114.8c-1.6-.6-34.3-14.1-38.9-16.4a368 368 0 0 0 -17.5-7.5c12.3-19 20.1-33.4 21.2-35.6 1.9-4 15-29.5 15.3-31.1s.7-7.5.4-8.9-5.1 1.3-11.6 3.5-18.9 10.2-23.7 11.2-20.1 6.8-28 9.4c-7.8 2.6-22.7 7.1-28.8 8.8-6.1 1.6-11.4 1.8-14.9 2.8 0 0 .5 4.8 1.4 6.2s4.1 5 7.9 5.9c3.8 1 10 .6 12.8-.1s7.7-3.1 8.4-4.1c.7-1.1-.3-4.3.8-5.3s16.1-4.5 21.7-6.2 27.2-9.2 30.1-8.8a916 916 0 0 1 -23.9 47.7 821 821 0 0 1 -45 63.3c-5.3 6-18 21.5-22.4 25 1.1.3 9-.4 10.4-1.3 8.9-5.5 23.8-24.1 28.6-29.7a489.1 489.1 0 0 0 36.7-49.4c1.9.8 17.6 13.6 21.7 16.4a293 293 0 0 0 23.7 13.3c3.5 1.5 16.9 7.7 17.5 5.6.7-1.8-2.3-14.1-3.9-14.7z"></path><path clip-rule="evenodd" d="m194.1 484.7a204.9 204.9 0 0 0 30.7 14.5 233.6 233.6 0 0 0 46.4 12c.5 0 16 1.9 19.2 1.9h15.7c6.1-.5 11.8-.9 17.9-1.7 4.9-.7 10.3-1.6 15.5-2.8 3.8-.9 7.8-1.7 11.7-3 3.7-1 7.8-2.4 11.8-3.8l8.2-3.1c2.3-1 5.1-2.3 7.7-3.3a243 243 0 0 0 19.2-10c2.3-1.2 7.5-5.2 10.3-5.2 3.1 0 5.2 2.8 5.2 5.2 0 5.1-6.8 6.6-9.9 8.9-3.3 2.3-7.3 4-10.8 5.9-7 3.7-14.1 6.8-20.9 9.4a251 251 0 0 1 -27.3 8.5c-3.3.7-6.6 1.6-9.9 2.1-1.7.3-19.9 3.1-24.9 3.1h-23a293.9 293.9 0 0 1 -35.1-5.2 196 196 0 0 1 -33.1-10.3c-12-4.5-24.6-10.5-36.4-18.3-2.1-1.4-2.3-2.8-2.3-4.4a5 5 0 0 1 5.1-5.1c2.4.1 8 4.2 9 4.7zm101.4-98.1-189.9 63.2v-280.1l189.9-63.2zm10.6-288.3v292.7a6 6 0 0 1 -1.2 2.6c-.3.5-1 1.2-1.6 1.4a14621 14621 0 0 1 -203.1 67.6c-2.1 0-4-1.4-5.1-3.7 0-.2-.2-.3-.2-.7v-292.8c.3-.9.5-2.1 1.2-2.8 1.4-1.9 3.8-2.3 5.4-2.8 3-1 196.1-65.8 198.9-65.8 1.9 0 5.7 1.2 5.7 4.3z" fill-rule="evenodd"></path><path clip-rule="evenodd" d="m464.3 388-158-49.1v-236l158-53.7zm10.6-345.8v352.4c-.2 4-3 5.7-5.6 5.7-2.3 0-18.6-5.6-21.4-6.4l-65.8-20.4-14.6-4.7-12.9-4c-18.6-5.7-37.6-11.5-56.3-17.8-.7-.2-2.4-2.6-2.4-3.1v-246.1c.3-.9.7-1.9 1.6-2.6 1.4-1.6 61.1-21.4 84.7-29.3 6.3-2.3 84.8-29.3 87.3-29.3 3 .1 5.4 2.3 5.4 5.6z" fill-rule="evenodd"></path><path d="m515 461.8-211.1-67.3.9-292.8 210.2 66.9z"></path><path clip-rule="evenodd" d="m408.6 232.5-20.7 50.1 38.1 11.5zm-12.4-47.2 27.2 8.2 49.5 178.6-27.9-8.5-10-36.7-57.7-17.5-12.4 29.9-27.9-8.5z" fill="currentColor" fill-rule="evenodd"></path></svg><i aria-hidden="true" class="dropdown__arrow"></i></button><div class="dropdown__list "><ul><li><a href="https://webpack.js.org/plugins/printable/" class="px-5 block"><span>English</span></a></li><li><a href="https://webpack.docschina.org/plugins/printable/" class="px-5 block"><span lang="zh">中文</span></a></li><li><a href="https://webpack.kr/plugins/printable/" class="px-5 block"><span lang="ko">한국어</span></a></li></ul></div></nav></nav><div class="inline-flex items-center ml-[18px]"><button aria-label="Switch to dark theme" class="bg-transparent border-none cursor-pointer text-[16px] p-0 inline-flex items-center text-gray-100 hover:text-blue-200 transition-colors duration-200" data-testid="hello-darkness"><svg width="16" height="16" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18.1406C11.6016 18.1406 11.2782 18.464 11.2782 18.8624V21.0281C11.2782 21.4265 11.6016 21.7499 12 21.7499C12.3985 21.7499 12.7219 21.4265 12.7219 21.0281V18.8624C12.7219 18.464 12.3985 18.1406 12 18.1406V18.1406Z" fill="currentColor"></path><path d="M12 2.25006C11.6016 2.25006 11.2782 2.5735 11.2782 2.97194V5.13756C11.2782 5.536 11.6016 5.85944 12 5.85944C12.3985 5.85944 12.7219 5.536 12.7219 5.13756V2.97194C12.7219 2.5735 12.3985 2.25006 12 2.25006V2.25006Z" fill="currentColor"></path><path d="M5.85936 12C5.85936 11.6015 5.53592 11.2781 5.13749 11.2781H2.97186C2.57342 11.2781 2.24999 11.6015 2.24999 12C2.24999 12.3984 2.57342 12.7218 2.97186 12.7218H5.13749C5.53592 12.7218 5.85936 12.3984 5.85936 12V12Z" fill="currentColor"></path><path d="M21.0281 11.2781H18.8625C18.4641 11.2781 18.1406 11.6015 18.1406 12C18.1406 12.3984 18.4641 12.7218 18.8625 12.7218H21.0281C21.4266 12.7218 21.75 12.3984 21.75 12C21.75 11.6015 21.4266 11.2781 21.0281 11.2781V11.2781Z" fill="currentColor"></path><path d="M7.14841 16.1298C6.95622 16.1298 6.77341 16.2048 6.63747 16.3407L5.10466 17.8735C4.96872 18.0094 4.89372 18.1923 4.89372 18.3844C4.89372 18.5766 4.96872 18.7594 5.10466 18.8954C5.2406 19.0313 5.42341 19.1063 5.6156 19.1063C5.80779 19.1063 5.9906 19.0313 6.12654 18.8954L7.65935 17.3626C7.9406 17.0813 7.9406 16.6219 7.65935 16.3407C7.52341 16.2048 7.3406 16.1298 7.14841 16.1298V16.1298Z" fill="currentColor"></path><path d="M16.8516 7.87036C17.0437 7.87036 17.2266 7.79536 17.3625 7.65942L18.8953 6.12661C19.0312 5.99067 19.1062 5.80786 19.1062 5.61567C19.1062 5.42349 19.0312 5.24067 18.8953 5.10474C18.7594 4.9688 18.5766 4.8938 18.3844 4.8938C18.1922 4.8938 18.0094 4.9688 17.8734 5.10474L16.3406 6.63755C16.2047 6.77349 16.1297 6.9563 16.1297 7.14849C16.1297 7.34067 16.2047 7.52349 16.3406 7.65942C16.4766 7.79536 16.6594 7.87036 16.8516 7.87036V7.87036Z" fill="currentColor"></path><path d="M6.12654 5.10474C5.9906 4.9688 5.80779 4.8938 5.6156 4.8938C5.42341 4.8938 5.2406 4.9688 5.10466 5.10474C4.96872 5.24067 4.89372 5.42349 4.89372 5.61567C4.89372 5.80786 4.96872 5.99067 5.10466 6.12661L6.63747 7.65942C6.77341 7.79536 6.95622 7.87036 7.14841 7.87036C7.3406 7.87036 7.52341 7.79536 7.65935 7.65942C7.79529 7.52349 7.87029 7.34067 7.87029 7.14849C7.87029 6.9563 7.79529 6.77349 7.65935 6.63755L6.12654 5.10474V5.10474Z" fill="currentColor"></path><path d="M17.3625 16.3407C17.2266 16.2048 17.0437 16.1298 16.8516 16.1298C16.6594 16.1298 16.4766 16.2048 16.3406 16.3407C16.0594 16.6219 16.0594 17.0813 16.3406 17.3626L17.8734 18.8954C18.0094 19.0313 18.1922 19.1063 18.3844 19.1063C18.5766 19.1063 18.7594 19.0313 18.8953 18.8954C19.0312 18.7594 19.1062 18.5766 19.1062 18.3844C19.1062 18.1923 19.0312 18.0094 18.8953 17.8735L17.3625 16.3407V16.3407Z" fill="currentColor"></path><path d="M12 7.5C9.52031 7.5 7.5 9.52031 7.5 12C7.5 14.4797 9.52031 16.5 12 16.5C14.4797 16.5 16.5 14.4797 16.5 12C16.5 9.52031 14.4797 7.5 12 7.5Z" fill="currentColor"></path></svg></button><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div class="bg-gray-100 dark:bg-gray-800 hidden md:block"><div class="md:max-w-[1024px] md:mx-auto md:grid md:grid-flow-col md:justify-end md:gap-x-[20px] md:px-[24px]" data-testid="sub-navigation"><a title="api" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/api/">API</a><a title="概念" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/concepts/">概念</a><a title="配置" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/configuration/">配置</a><a title="指南" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/guides/">指南</a><a title="loader" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/loaders/">loader</a><a title="迁移" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/migrate/">迁移</a><a title="plugin" aria-current="page" class="!text-black dark:!text-white text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/plugins/">plugin</a></div></div></header></div><div class="container site__content"><div class="sponsors"><a href="https://docschina.org" target="_blank" rel="noopener noreferrer" class="sponsors__content"><img class="sponsors__img__docschina" src="/docschina-logo.59f03f74b3c450856c01.png"/><div class="sponsors__content-cont">翻译/文档内容有任何问题，请联系我们</div></a></div><nav class="sidebar site__sidebar"><div class="sidebar__inner"><div class="relative z-0 bg-white dark:bg-gray-100 "><select class="text-gray-600 text-14 px-5 py-5 appearance-none box-border border border-gray-200 border-solid flex-col flex w-full rounded-none bg-transparent bg-none"><option selected="" value="5">Webpack 5</option><option value="4">Webpack 4</option></select><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="absolute right-5 top-5 fill-current text-gray-300 z-[-1]" width="20" height="20"><path d="M4.5 7.5c.5-.4 1-.4 1.6 0l3.9 3.8 4-3.8c.4-.4 1-.4 1.5 0 .4.5.4 1.2 0 1.7l-4.7 4.5a1 1 0 0 1-1.6 0L4.5 9.2c-.4-.5-.4-1.2 0-1.7z"></path></svg></div><div class="sidebar-item sidebar-item--disabled`"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="sidebar-item__toggle" width="15" height="17" fill="#175d96"><path d="M10 3.3c-.6 0-1 .4-1.1 1.1v11.2c0 .3.2.6.4.8s.5.4.8.4c.6 0 1-.4 1.1-1.1V4.5c0-.3-.2-.6-.4-.8s-.5-.4-.8-.4z"></path></svg><a class="sidebar-item__title sidebar-link__print" href="/plugins/printable/" rel="nofollow noopener noreferrer" alt="Print" title="Print" target="_blank">Print Section<img src="/icon-print.d4d2cfa27f8b9a98e34a.svg" width="27" height="20" alt="Printer Icon"/></a></div><div><div class="sidebar-item  sidebar-item--disabled"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="sidebar-item__toggle" width="15" height="17" fill="#175d96"><path d="M10 3.3c-.6 0-1 .4-1.1 1.1v11.2c0 .3.2.6.4.8s.5.4.8.4c.6 0 1-.4 1.1-1.1V4.5c0-.3-.2-.6-.4-.8s-.5-.4-.8-.4z"></path></svg><a class="sidebar-item__title" href="/plugins/">插件</a></div></div><div><h4 class="sidebar__group">Community</h4><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/html-webpack-plugin/">HtmlWebpackPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="安装 "><a class="" href="/plugins/html-webpack-plugin/#installation">安装 </a></li><li class="sidebar-item__anchor" title="基本用法 "><a class="" href="/plugins/html-webpack-plugin/#basic-usage">基本用法 </a></li><li class="sidebar-item__anchor" title="配置 "><a class="" href="/plugins/html-webpack-plugin/#configuration">配置 </a></li><li class="sidebar-item__anchor" title="第三方插件 "><a class="" href="/plugins/html-webpack-plugin/#third-party-addons">第三方插件 </a></li></ul></div></div><div><h4 class="sidebar__group">webpack</h4><div class="sidebar-item  sidebar-item--disabled"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="sidebar-item__toggle" width="15" height="17" fill="#175d96"><path d="M10 3.3c-.6 0-1 .4-1.1 1.1v11.2c0 .3.2.6.4.8s.5.4.8.4c.6 0 1-.4 1.1-1.1V4.5c0-.3-.2-.6-.4-.8s-.5-.4-.8-.4z"></path></svg><a class="sidebar-item__title" href="/plugins/automatic-prefetch-plugin/">AutomaticPrefetchPlugin</a></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/banner-plugin/">BannerPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="选项 "><a class="" href="/plugins/banner-plugin/#options">选项 </a></li><li class="sidebar-item__anchor" title="用法 "><a class="" href="/plugins/banner-plugin/#usage">用法 </a></li><li class="sidebar-item__anchor" title="占位符 "><a class="" href="/plugins/banner-plugin/#placeholders">占位符 </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/commons-chunk-plugin/">CommonsChunkPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Options "><a class="" href="/plugins/commons-chunk-plugin/#options">Options </a></li><li class="sidebar-item__anchor" title="Examples "><a class="" href="/plugins/commons-chunk-plugin/#examples">Examples </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Commons chunk for entries "><a class="" href="/plugins/commons-chunk-plugin/#commons-chunk-for-entries">Commons chunk for entries </a></li><li class="sidebar-item__anchor" title="Explicit vendor chunk "><a class="" href="/plugins/commons-chunk-plugin/#explicit-vendor-chunk">Explicit vendor chunk </a></li><li class="sidebar-item__anchor" title="Move common modules into the parent chunk "><a class="" href="/plugins/commons-chunk-plugin/#move-common-modules-into-the-parent-chunk">Move common modules into the parent chunk </a></li><li class="sidebar-item__anchor" title="Extra async commons chunk "><a class="" href="/plugins/commons-chunk-plugin/#extra-async-commons-chunk">Extra async commons chunk </a></li><li class="sidebar-item__anchor" title="Passing the minChunks property a function "><a class="" href="/plugins/commons-chunk-plugin/#passing-the-minchunks-property-a-function">Passing the minChunks property a function </a></li></ul></li><li class="sidebar-item__anchor" title="Manifest file "><a class="" href="/plugins/commons-chunk-plugin/#manifest-file">Manifest file </a></li><li class="sidebar-item__anchor" title="Combining implicit common vendor chunks and manifest file "><a class="" href="/plugins/commons-chunk-plugin/#combining-implicit-common-vendor-chunks-and-manifest-file">Combining implicit common vendor chunks and manifest file </a></li><li class="sidebar-item__anchor" title="More Examples "><a class="" href="/plugins/commons-chunk-plugin/#more-examples">More Examples </a></li></ul></div></div><div><div class="sidebar-item  sidebar-item--disabled"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="sidebar-item__toggle" width="15" height="17" fill="#175d96"><path d="M10 3.3c-.6 0-1 .4-1.1 1.1v11.2c0 .3.2.6.4.8s.5.4.8.4c.6 0 1-.4 1.1-1.1V4.5c0-.3-.2-.6-.4-.8s-.5-.4-.8-.4z"></path></svg><a class="sidebar-item__title" href="/plugins/context-exclusion-plugin/">ContextExclusionPlugin</a></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/context-replacement-plugin/">ContextReplacementPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Usage "><a class="" href="/plugins/context-replacement-plugin/#usage">Usage </a></li><li class="sidebar-item__anchor" title="Content Callback "><a class="" href="/plugins/context-replacement-plugin/#content-callback">Content Callback </a></li><li class="sidebar-item__anchor" title="Other Options "><a class="" href="/plugins/context-replacement-plugin/#other-options">Other Options </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/define-plugin/">DefinePlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Usage "><a class="" href="/plugins/define-plugin/#usage">Usage </a></li><li class="sidebar-item__anchor" title="Feature Flags "><a class="" href="/plugins/define-plugin/#feature-flags">Feature Flags </a></li><li class="sidebar-item__anchor" title="Service URL "><a class="" href="/plugins/define-plugin/#service-urls">Service URL </a></li><li class="sidebar-item__anchor" title="Runtime values via runtimeValue "><a class="" href="/plugins/define-plugin/#runtime-values-via-runtimevalue">Runtime values via runtimeValue </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/dll-plugin/">DllPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="DllPlugin "><a class="" href="/plugins/dll-plugin/#dllplugin">DllPlugin </a></li><li class="sidebar-item__anchor" title="DllReferencePlugin "><a class="" href="/plugins/dll-plugin/#dllreferenceplugin">DllReferencePlugin </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="模式(Modes) "><a class="" href="/plugins/dll-plugin/#modes">模式(Modes) </a></li></ul></li><li class="sidebar-item__anchor" title="用法(Usage) "><a class="" href="/plugins/dll-plugin/#usage">用法(Usage) </a></li><li class="sidebar-item__anchor" title="示例 "><a class="" href="/plugins/dll-plugin/#examples">示例 </a></li><li class="sidebar-item__anchor" title="参考 "><a class="" href="/plugins/dll-plugin/#references">参考 </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Source "><a class="" href="/plugins/dll-plugin/#source">Source </a></li><li class="sidebar-item__anchor" title="Tests "><a class="" href="/plugins/dll-plugin/#tests">Tests </a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/environment-plugin/">EnvironmentPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Usage "><a class="" href="/plugins/environment-plugin/#usage">Usage </a></li><li class="sidebar-item__anchor" title="Usage with default values "><a class="" href="/plugins/environment-plugin/#usage-with-default-values">Usage with default values </a></li><li class="sidebar-item__anchor" title="Use Case: Git Version "><a class="" href="/plugins/environment-plugin/#use-case-git-version">Use Case: Git Version </a></li><li class="sidebar-item__anchor" title="DotenvPlugin "><a class="" href="/plugins/environment-plugin/#dotenvplugin">DotenvPlugin </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/eval-source-map-dev-tool-plugin/">EvalSourceMapDevToolPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="选项 "><a class="" href="/plugins/eval-source-map-dev-tool-plugin/#options">选项 </a></li><li class="sidebar-item__anchor" title="示例 "><a class="" href="/plugins/eval-source-map-dev-tool-plugin/#examples">示例 </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="基本用例 "><a class="" href="/plugins/eval-source-map-dev-tool-plugin/#basic-use-case">基本用例 </a></li><li class="sidebar-item__anchor" title="排除 Vendor(第三方库) Maps "><a class="" href="/plugins/eval-source-map-dev-tool-plugin/#exclude-vendor-maps">排除 Vendor(第三方库) Maps </a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/hashed-module-ids-plugin/">HashedModuleIdsPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Options "><a class="" href="/plugins/hashed-module-ids-plugin/#options">Options </a></li><li class="sidebar-item__anchor" title="Usage "><a class="" href="/plugins/hashed-module-ids-plugin/#usage">Usage </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/hot-module-replacement-plugin/">HotModuleReplacementPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="基本使用 "><a class="" href="/plugins/hot-module-replacement-plugin/#basic-usage">基本使用 </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/ignore-plugin/">IgnorePlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Using regular expressions "><a class="" href="/plugins/ignore-plugin/#using-regular-expressions">Using regular expressions </a></li><li class="sidebar-item__anchor" title="Using filter functions "><a class="" href="/plugins/ignore-plugin/#using-filter-functions">Using filter functions </a></li><li class="sidebar-item__anchor" title="Example of ignoring Moment Locales "><a class="" href="/plugins/ignore-plugin/#example-of-ignoring-moment-locales">Example of ignoring Moment Locales </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/internal-plugins/">Internal webpack plugins</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="environment "><a class="" href="/plugins/internal-plugins/#environment">environment </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="NodeEnvironmentPlugin "><a class="" href="/plugins/internal-plugins/#nodeenvironmentplugin">NodeEnvironmentPlugin </a></li></ul></li><li class="sidebar-item__anchor" title="compiler "><a class="" href="/plugins/internal-plugins/#compiler">compiler </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="MemoryCachePlugin "><a class="" href="/plugins/internal-plugins/#memorycacheplugin">MemoryCachePlugin </a></li><li class="sidebar-item__anchor" title="ProgressPlugin "><a class="" href="/plugins/internal-plugins/#progressplugin">ProgressPlugin </a></li><li class="sidebar-item__anchor" title="RecordIdsPlugin "><a class="" href="/plugins/internal-plugins/#recordidsplugin">RecordIdsPlugin </a></li></ul></li><li class="sidebar-item__anchor" title="entry "><a class="" href="/plugins/internal-plugins/#entry">entry </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="EntryPlugin "><a class="" href="/plugins/internal-plugins/#entryplugin">EntryPlugin </a></li><li class="sidebar-item__anchor" title="PrefetchPlugin "><a class="" href="/plugins/internal-plugins/#prefetchplugin">PrefetchPlugin </a></li></ul></li><li class="sidebar-item__anchor" title="output "><a class="" href="/plugins/internal-plugins/#output">output </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="JsonpTemplatePlugin "><a class="" href="/plugins/internal-plugins/#jsonptemplateplugin">JsonpTemplatePlugin </a></li><li class="sidebar-item__anchor" title="NodeTemplatePlugin "><a class="" href="/plugins/internal-plugins/#nodetemplateplugin">NodeTemplatePlugin </a></li><li class="sidebar-item__anchor" title="LibraryTemplatePlugin "><a class="" href="/plugins/internal-plugins/#librarytemplateplugin">LibraryTemplatePlugin </a></li><li class="sidebar-item__anchor" title="WebWorkerTemplatePlugin "><a class="" href="/plugins/internal-plugins/#webworkertemplateplugin">WebWorkerTemplatePlugin </a></li><li class="sidebar-item__anchor" title="EvalDevToolModulePlugin "><a class="" href="/plugins/internal-plugins/#evaldevtoolmoduleplugin">EvalDevToolModulePlugin </a></li><li class="sidebar-item__anchor" title="SourceMapDevToolPlugin "><a class="" href="/plugins/internal-plugins/#sourcemapdevtoolplugin">SourceMapDevToolPlugin </a></li><li class="sidebar-item__anchor" title="HotModuleReplacementPlugin "><a class="" href="/plugins/internal-plugins/#hotmodulereplacementplugin">HotModuleReplacementPlugin </a></li></ul></li><li class="sidebar-item__anchor" title="source "><a class="" href="/plugins/internal-plugins/#source">source </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="APIPlugin "><a class="" href="/plugins/internal-plugins/#apiplugin">APIPlugin </a></li><li class="sidebar-item__anchor" title="CompatibilityPlugin "><a class="" href="/plugins/internal-plugins/#compatibilityplugin">CompatibilityPlugin </a></li><li class="sidebar-item__anchor" title="ConstPlugin "><a class="" href="/plugins/internal-plugins/#constplugin">ConstPlugin </a></li><li class="sidebar-item__anchor" title="ProvidePlugin "><a class="" href="/plugins/internal-plugins/#provideplugin">ProvidePlugin </a></li><li class="sidebar-item__anchor" title="NodeStuffPlugin "><a class="" href="/plugins/internal-plugins/#nodestuffplugin">NodeStuffPlugin </a></li><li class="sidebar-item__anchor" title="RequireJsStuffPlugin "><a class="" href="/plugins/internal-plugins/#requirejsstuffplugin">RequireJsStuffPlugin </a></li><li class="sidebar-item__anchor" title="NodeSourcePlugin "><a class="" href="/plugins/internal-plugins/#nodesourceplugin">NodeSourcePlugin </a></li><li class="sidebar-item__anchor" title="NodeTargetPlugin "><a class="" href="/plugins/internal-plugins/#nodetargetplugin">NodeTargetPlugin </a></li><li class="sidebar-item__anchor" title="AMDPlugin "><a class="" href="/plugins/internal-plugins/#amdplugin">AMDPlugin </a></li><li class="sidebar-item__anchor" title="CommonJsPlugin "><a class="" href="/plugins/internal-plugins/#commonjsplugin">CommonJsPlugin </a></li><li class="sidebar-item__anchor" title="RequireContextPlugin "><a class="" href="/plugins/internal-plugins/#requirecontextplugin">RequireContextPlugin </a></li><li class="sidebar-item__anchor" title="RequireEnsurePlugin "><a class="" href="/plugins/internal-plugins/#requireensureplugin">RequireEnsurePlugin </a></li><li class="sidebar-item__anchor" title="RequireIncludePlugin "><a class="" href="/plugins/internal-plugins/#requireincludeplugin">RequireIncludePlugin </a></li><li class="sidebar-item__anchor" title="DefinePlugin "><a class="" href="/plugins/internal-plugins/#defineplugin">DefinePlugin </a></li></ul></li><li class="sidebar-item__anchor" title="optimize "><a class="" href="/plugins/internal-plugins/#optimize">optimize </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="LimitChunkCountPlugin "><a class="" href="/plugins/internal-plugins/#limitchunkcountplugin">LimitChunkCountPlugin </a></li><li class="sidebar-item__anchor" title="MergeDuplicateChunksPlugin "><a class="" href="/plugins/internal-plugins/#mergeduplicatechunksplugin">MergeDuplicateChunksPlugin </a></li><li class="sidebar-item__anchor" title="RemoveEmptyChunksPlugin "><a class="" href="/plugins/internal-plugins/#removeemptychunksplugin">RemoveEmptyChunksPlugin </a></li><li class="sidebar-item__anchor" title="MinChunkSizePlugin "><a class="" href="/plugins/internal-plugins/#minchunksizeplugin">MinChunkSizePlugin </a></li><li class="sidebar-item__anchor" title="ModuleConcatenationPlugin "><a class="" href="/plugins/internal-plugins/#moduleconcatenationplugin">ModuleConcatenationPlugin </a></li><li class="sidebar-item__anchor" title="FlagIncludedChunksPlugin "><a class="" href="/plugins/internal-plugins/#flagincludedchunksplugin">FlagIncludedChunksPlugin </a></li><li class="sidebar-item__anchor" title="RealContentHashPlugin"><a class="" href="/plugins/internal-plugins/#RealContentHashPlugin">RealContentHashPlugin</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/limit-chunk-count-plugin/">LimitChunkCountPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Options "><a class="" href="/plugins/limit-chunk-count-plugin/#options">Options </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="maxChunks "><a class="" href="/plugins/limit-chunk-count-plugin/#maxchunks">maxChunks </a></li><li class="sidebar-item__anchor" title="minChunkSize "><a class="" href="/plugins/limit-chunk-count-plugin/#minchunksize">minChunkSize </a></li></ul></li><li class="sidebar-item__anchor" title="Usage via CLI "><a class="" href="/plugins/limit-chunk-count-plugin/#usage-via-cli">Usage via CLI </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/min-chunk-size-plugin/">MinChunkSizePlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Usage via CLI "><a class="" href="/plugins/min-chunk-size-plugin/#usage-via-cli">Usage via CLI </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/module-concatenation-plugin/">ModuleConcatenationPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="优化 bailout "><a class="" href="/plugins/module-concatenation-plugin/#optimization-bailouts">优化 bailout </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="模块分组算法 "><a class="" href="/plugins/module-concatenation-plugin/#module-grouping-algorithm">模块分组算法 </a></li><li class="sidebar-item__anchor" title="调试优化 bailout "><a class="" href="/plugins/module-concatenation-plugin/#debugging-optimization-bailouts">调试优化 bailout </a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/module-federation-plugin/">ModuleFederationPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Options"><a class="" href="/plugins/module-federation-plugin/#Options">Options</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="runtime"><a class="" href="/plugins/module-federation-plugin/#runtime">runtime</a></li><li class="sidebar-item__anchor" title="Specify package versions"><a class="" href="/plugins/module-federation-plugin/#Specify-package-versions">Specify package versions</a></li><li class="sidebar-item__anchor" title="Sharing hints"><a class="" href="/plugins/module-federation-plugin/#Sharing-hints">Sharing hints</a></li></ul></li></ul></div></div><div><div class="sidebar-item  sidebar-item--disabled"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="sidebar-item__toggle" width="15" height="17" fill="#175d96"><path d="M10 3.3c-.6 0-1 .4-1.1 1.1v11.2c0 .3.2.6.4.8s.5.4.8.4c.6 0 1-.4 1.1-1.1V4.5c0-.3-.2-.6-.4-.8s-.5-.4-.8-.4z"></path></svg><a class="sidebar-item__title" href="/plugins/NoEmitOnErrorsPlugin/">NoEmitOnErrorsPlugin</a></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/normal-module-replacement-plugin/">NormalModuleReplacementPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Basic Example "><a class="" href="/plugins/normal-module-replacement-plugin/#basic-example">Basic Example </a></li><li class="sidebar-item__anchor" title="Advanced Example "><a class="" href="/plugins/normal-module-replacement-plugin/#advanced-example">Advanced Example </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/prefetch-plugin/">PrefetchPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Options "><a class="" href="/plugins/prefetch-plugin/#options">Options </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/profiling-plugin/">ProfilingPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Options "><a class="" href="/plugins/profiling-plugin/#options">Options </a></li><li class="sidebar-item__anchor" title="Usage: default "><a class="" href="/plugins/profiling-plugin/#usage-default">Usage: default </a></li><li class="sidebar-item__anchor" title="Usage: custom outputPath "><a class="" href="/plugins/profiling-plugin/#usage-custom-outputpath">Usage: custom outputPath </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/progress-plugin/">ProgressPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Usage "><a class="" href="/plugins/progress-plugin/#usage">Usage </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Providing function "><a class="" href="/plugins/progress-plugin/#providing-function">Providing function </a></li><li class="sidebar-item__anchor" title="Providing object "><a class="" href="/plugins/progress-plugin/#providing-object">Providing object </a></li></ul></li><li class="sidebar-item__anchor" title="Percentage calculation "><a class="" href="/plugins/progress-plugin/#percentage-calculation">Percentage calculation </a></li><li class="sidebar-item__anchor" title="Supported Hooks "><a class="" href="/plugins/progress-plugin/#supported-hooks">Supported Hooks </a></li><li class="sidebar-item__anchor" title="Source "><a class="" href="/plugins/progress-plugin/#source">Source </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/provide-plugin/">ProvidePlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Usage: jQuery "><a class="" href="/plugins/provide-plugin/#usage-jquery">Usage: jQuery </a></li><li class="sidebar-item__anchor" title="Usage: jQuery with Angular 1 "><a class="" href="/plugins/provide-plugin/#usage-jquery-with-angular-1">Usage: jQuery with Angular 1 </a></li><li class="sidebar-item__anchor" title="Usage: Lodash Map "><a class="" href="/plugins/provide-plugin/#usage-lodash-map">Usage: Lodash Map </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Usage: Vue.js "><a class="" href="/plugins/provide-plugin/#usage-vuejs">Usage: Vue.js </a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/source-map-dev-tool-plugin/">SourceMapDevToolPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="配置项 "><a class="" href="/plugins/source-map-dev-tool-plugin/#options">配置项 </a></li><li class="sidebar-item__anchor" title="示例 "><a class="" href="/plugins/source-map-dev-tool-plugin/#examples">示例 </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="基本使用 "><a class="" href="/plugins/source-map-dev-tool-plugin/#basic-use-case">基本使用 </a></li><li class="sidebar-item__anchor" title="排除 Vendor Maps "><a class="" href="/plugins/source-map-dev-tool-plugin/#exclude-vendor-maps">排除 Vendor Maps </a></li><li class="sidebar-item__anchor" title="在宿主环境外部化 source map "><a class="" href="/plugins/source-map-dev-tool-plugin/#host-source-maps-externally">在宿主环境外部化 source map </a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/split-chunks-plugin/">SplitChunksPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="默认值 "><a class="" href="/plugins/split-chunks-plugin/#defaults">默认值 </a></li><li class="sidebar-item__anchor" title="配置 "><a class="" href="/plugins/split-chunks-plugin/#configuration">配置 </a></li><li class="sidebar-item__anchor" title="optimization.splitChunks "><a class="" href="/plugins/split-chunks-plugin/#optimizationsplitchunks">optimization.splitChunks </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="splitChunks.automaticNameDelimiter "><a class="" href="/plugins/split-chunks-plugin/#splitchunksautomaticnamedelimiter">splitChunks.automaticNameDelimiter </a></li><li class="sidebar-item__anchor" title="splitChunks.chunks "><a class="" href="/plugins/split-chunks-plugin/#splitchunkschunks">splitChunks.chunks </a></li><li class="sidebar-item__anchor" title="splitChunks.maxAsyncRequests "><a class="" href="/plugins/split-chunks-plugin/#splitchunksmaxasyncrequests">splitChunks.maxAsyncRequests </a></li><li class="sidebar-item__anchor" title="splitChunks.maxInitialRequests "><a class="" href="/plugins/split-chunks-plugin/#splitchunksmaxinitialrequests">splitChunks.maxInitialRequests </a></li><li class="sidebar-item__anchor" title="splitChunks.defaultSizeTypes "><a class="" href="/plugins/split-chunks-plugin/#splitchunksdefaultsizetypes">splitChunks.defaultSizeTypes </a></li><li class="sidebar-item__anchor" title="splitChunks.minChunks "><a class="" href="/plugins/split-chunks-plugin/#splitchunksminchunks">splitChunks.minChunks </a></li><li class="sidebar-item__anchor" title="splitChunks.hidePathInfo"><a class="" href="/plugins/split-chunks-plugin/#splitChunkshidePathInfo">splitChunks.hidePathInfo</a></li><li class="sidebar-item__anchor" title="splitChunks.minSize "><a class="" href="/plugins/split-chunks-plugin/#splitchunksminsize">splitChunks.minSize </a></li><li class="sidebar-item__anchor" title="splitChunks.minSizeReduction "><a class="" href="/plugins/split-chunks-plugin/#splitchunksminsizereduction">splitChunks.minSizeReduction </a></li><li class="sidebar-item__anchor" title="splitChunks.enforceSizeThreshold "><a class="" href="/plugins/split-chunks-plugin/#splitchunksenforcesizethreshold">splitChunks.enforceSizeThreshold </a></li><li class="sidebar-item__anchor" title="splitChunks.minRemainingSize "><a class="" href="/plugins/split-chunks-plugin/#splitchunksminremainingsize">splitChunks.minRemainingSize </a></li><li class="sidebar-item__anchor" title="splitChunks.layer "><a class="" href="/plugins/split-chunks-plugin/#splitchunkslayer">splitChunks.layer </a></li><li class="sidebar-item__anchor" title="splitChunks.maxSize "><a class="" href="/plugins/split-chunks-plugin/#splitchunksmaxsize">splitChunks.maxSize </a></li><li class="sidebar-item__anchor" title="splitChunks.maxAsyncSize "><a class="" href="/plugins/split-chunks-plugin/#splitchunksmaxasyncsize">splitChunks.maxAsyncSize </a></li><li class="sidebar-item__anchor" title="splitChunks.maxInitialSize "><a class="" href="/plugins/split-chunks-plugin/#splitchunksmaxinitialsize">splitChunks.maxInitialSize </a></li><li class="sidebar-item__anchor" title="splitChunks.name "><a class="" href="/plugins/split-chunks-plugin/#splitchunksname">splitChunks.name </a></li><li class="sidebar-item__anchor" title="splitChunks.usedExports "><a class="" href="/plugins/split-chunks-plugin/#splitchunksusedexports">splitChunks.usedExports </a></li><li class="sidebar-item__anchor" title="splitChunks.cacheGroups "><a class="" href="/plugins/split-chunks-plugin/#splitchunkscachegroups">splitChunks.cacheGroups </a></li></ul></li><li class="sidebar-item__anchor" title="Examples "><a class="" href="/plugins/split-chunks-plugin/#examples">Examples </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Defaults: Example 1 "><a class="" href="/plugins/split-chunks-plugin/#defaults-example-1">Defaults: Example 1 </a></li><li class="sidebar-item__anchor" title="Defaults: Example 2 "><a class="" href="/plugins/split-chunks-plugin/#defaults-example-2">Defaults: Example 2 </a></li><li class="sidebar-item__anchor" title="Split Chunks: Example 1 "><a class="" href="/plugins/split-chunks-plugin/#split-chunks-example-1">Split Chunks: Example 1 </a></li><li class="sidebar-item__anchor" title="Split Chunks: Example 2 "><a class="" href="/plugins/split-chunks-plugin/#split-chunks-example-2">Split Chunks: Example 2 </a></li><li class="sidebar-item__anchor" title="Split Chunks: Example 3 "><a class="" href="/plugins/split-chunks-plugin/#split-chunks-example-3">Split Chunks: Example 3 </a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/watch-ignore-plugin/">WatchIgnorePlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Options "><a class="" href="/plugins/watch-ignore-plugin/#options">Options </a></li></ul></div></div><div><h4 class="sidebar__group">webpack contrib</h4><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/compression-webpack-plugin/">CompressionWebpackPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Getting Started "><a class="" href="/plugins/compression-webpack-plugin/#getting-started">Getting Started </a></li><li class="sidebar-item__anchor" title="Options "><a class="" href="/plugins/compression-webpack-plugin/#options">Options </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="test "><a class="" href="/plugins/compression-webpack-plugin/#test">test </a></li><li class="sidebar-item__anchor" title="include "><a class="" href="/plugins/compression-webpack-plugin/#include">include </a></li><li class="sidebar-item__anchor" title="exclude "><a class="" href="/plugins/compression-webpack-plugin/#exclude">exclude </a></li><li class="sidebar-item__anchor" title="algorithm "><a class="" href="/plugins/compression-webpack-plugin/#algorithm">algorithm </a></li><li class="sidebar-item__anchor" title="compressionOptions "><a class="" href="/plugins/compression-webpack-plugin/#compressionoptions">compressionOptions </a></li><li class="sidebar-item__anchor" title="threshold "><a class="" href="/plugins/compression-webpack-plugin/#threshold">threshold </a></li><li class="sidebar-item__anchor" title="minRatio "><a class="" href="/plugins/compression-webpack-plugin/#minratio">minRatio </a></li><li class="sidebar-item__anchor" title="filename "><a class="" href="/plugins/compression-webpack-plugin/#filename">filename </a></li><li class="sidebar-item__anchor" title="deleteOriginalAssets "><a class="" href="/plugins/compression-webpack-plugin/#deleteoriginalassets">deleteOriginalAssets </a></li></ul></li><li class="sidebar-item__anchor" title="Examples "><a class="" href="/plugins/compression-webpack-plugin/#examples">Examples </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Using Zopfli "><a class="" href="/plugins/compression-webpack-plugin/#using-zopfli">Using Zopfli </a></li><li class="sidebar-item__anchor" title="Using Brotli "><a class="" href="/plugins/compression-webpack-plugin/#using-brotli">Using Brotli </a></li><li class="sidebar-item__anchor" title="Multiple compressed versions of assets for different algorithm "><a class="" href="/plugins/compression-webpack-plugin/#multiple-compressed-versions-of-assets-for-different-algorithm">Multiple compressed versions of assets for different algorithm </a></li></ul></li><li class="sidebar-item__anchor" title="Contributing "><a class="" href="/plugins/compression-webpack-plugin/#contributing">Contributing </a></li><li class="sidebar-item__anchor" title="License "><a class="" href="/plugins/compression-webpack-plugin/#license">License </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/copy-webpack-plugin/">CopyWebpackPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Getting Started "><a class="" href="/plugins/copy-webpack-plugin/#getting-started">Getting Started </a></li><li class="sidebar-item__anchor" title="Options "><a class="" href="/plugins/copy-webpack-plugin/#options">Options </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Patterns "><a class="" href="/plugins/copy-webpack-plugin/#patterns">Patterns </a></li><li class="sidebar-item__anchor" title="noErrorOnMissing "><a class="" href="/plugins/copy-webpack-plugin/#noerroronmissing">noErrorOnMissing </a></li><li class="sidebar-item__anchor" title="Options "><a class="" href="/plugins/copy-webpack-plugin/#options">Options </a></li><li class="sidebar-item__anchor" title="Examples "><a class="" href="/plugins/copy-webpack-plugin/#examples">Examples </a></li></ul></li><li class="sidebar-item__anchor" title="Contributing "><a class="" href="/plugins/copy-webpack-plugin/#contributing">Contributing </a></li><li class="sidebar-item__anchor" title="License "><a class="" href="/plugins/copy-webpack-plugin/#license">License </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/css-minimizer-webpack-plugin/">CssMinimizerWebpackPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="起步 "><a class="" href="/plugins/css-minimizer-webpack-plugin/#getting-started">起步 </a></li><li class="sidebar-item__anchor" title="关于 source maps 的提示 "><a class="" href="/plugins/css-minimizer-webpack-plugin/#note-about-source-maps">关于 source maps 的提示 </a></li><li class="sidebar-item__anchor" title="选项 "><a class="" href="/plugins/css-minimizer-webpack-plugin/#options">选项 </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="test "><a class="" href="/plugins/css-minimizer-webpack-plugin/#test">test </a></li><li class="sidebar-item__anchor" title="include "><a class="" href="/plugins/css-minimizer-webpack-plugin/#include">include </a></li><li class="sidebar-item__anchor" title="exclude "><a class="" href="/plugins/css-minimizer-webpack-plugin/#exclude">exclude </a></li><li class="sidebar-item__anchor" title="parallel "><a class="" href="/plugins/css-minimizer-webpack-plugin/#parallel">parallel </a></li><li class="sidebar-item__anchor" title="minify "><a class="" href="/plugins/css-minimizer-webpack-plugin/#minify">minify </a></li><li class="sidebar-item__anchor" title="minimizerOptions "><a class="" href="/plugins/css-minimizer-webpack-plugin/#minimizeroptions">minimizerOptions </a></li><li class="sidebar-item__anchor" title="warningsFilter "><a class="" href="/plugins/css-minimizer-webpack-plugin/#warningsfilter">warningsFilter </a></li></ul></li><li class="sidebar-item__anchor" title="示例 "><a class="" href="/plugins/css-minimizer-webpack-plugin/#examples">示例 </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="使用 sourcemaps "><a class="" href="/plugins/css-minimizer-webpack-plugin/#use-sourcemaps">使用 sourcemaps </a></li><li class="sidebar-item__anchor" title="移除所有注释 "><a class="" href="/plugins/css-minimizer-webpack-plugin/#remove-all-comments">移除所有注释 </a></li></ul></li><li class="sidebar-item__anchor" title="贡献 "><a class="" href="/plugins/css-minimizer-webpack-plugin/#contributing">贡献 </a></li><li class="sidebar-item__anchor" title="License "><a class="" href="/plugins/css-minimizer-webpack-plugin/#license">License </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/eslint-webpack-plugin/">EslintWebpackPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="开始 "><a class="" href="/plugins/eslint-webpack-plugin/#getting-started">开始 </a></li><li class="sidebar-item__anchor" title="选项 "><a class="" href="/plugins/eslint-webpack-plugin/#options">选项 </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="context "><a class="" href="/plugins/eslint-webpack-plugin/#context">context </a></li><li class="sidebar-item__anchor" title="eslintPath "><a class="" href="/plugins/eslint-webpack-plugin/#eslintpath">eslintPath </a></li><li class="sidebar-item__anchor" title="extensions "><a class="" href="/plugins/eslint-webpack-plugin/#estensions">extensions </a></li><li class="sidebar-item__anchor" title="exclude "><a class="" href="/plugins/eslint-webpack-plugin/#exclude">exclude </a></li><li class="sidebar-item__anchor" title="files "><a class="" href="/plugins/eslint-webpack-plugin/#files">files </a></li><li class="sidebar-item__anchor" title="fix "><a class="" href="/plugins/eslint-webpack-plugin/#fix">fix </a></li><li class="sidebar-item__anchor" title="formatter "><a class="" href="/plugins/eslint-webpack-plugin/#formatter">formatter </a></li><li class="sidebar-item__anchor" title="lintDirtyModulesOnly "><a class="" href="/plugins/eslint-webpack-plugin/#lintdirtymodulesonly">lintDirtyModulesOnly </a></li><li class="sidebar-item__anchor" title="threads "><a class="" href="/plugins/eslint-webpack-plugin/#threads">threads </a></li><li class="sidebar-item__anchor" title="错误以及警告 "><a class="" href="/plugins/eslint-webpack-plugin/#errors-and-warning">错误以及警告 </a></li></ul></li><li class="sidebar-item__anchor" title="更新日志 "><a class="" href="/plugins/eslint-webpack-plugin/#changelog">更新日志 </a></li><li class="sidebar-item__anchor" title="License "><a class="" href="/plugins/eslint-webpack-plugin/#license">License </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/html-minimizer-webpack-plugin/">HtmlMinimizerWebpackPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Getting Started"><a class="" href="/plugins/html-minimizer-webpack-plugin/#Getting-Started">Getting Started</a></li><li class="sidebar-item__anchor" title="Options"><a class="" href="/plugins/html-minimizer-webpack-plugin/#Options">Options</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="test"><a class="" href="/plugins/html-minimizer-webpack-plugin/#test">test</a></li><li class="sidebar-item__anchor" title="include"><a class="" href="/plugins/html-minimizer-webpack-plugin/#include">include</a></li><li class="sidebar-item__anchor" title="exclude"><a class="" href="/plugins/html-minimizer-webpack-plugin/#exclude">exclude</a></li><li class="sidebar-item__anchor" title="parallel"><a class="" href="/plugins/html-minimizer-webpack-plugin/#parallel">parallel</a></li><li class="sidebar-item__anchor" title="minify"><a class="" href="/plugins/html-minimizer-webpack-plugin/#minify">minify</a></li><li class="sidebar-item__anchor" title="minimizerOptions"><a class="" href="/plugins/html-minimizer-webpack-plugin/#minimizerOptions">minimizerOptions</a></li></ul></li><li class="sidebar-item__anchor" title="Contributing"><a class="" href="/plugins/html-minimizer-webpack-plugin/#Contributing">Contributing</a></li><li class="sidebar-item__anchor" title="License"><a class="" href="/plugins/html-minimizer-webpack-plugin/#License">License</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/image-minimizer-webpack-plugin/">ImageMinimizerWebpackPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Getting Started"><a class="" href="/plugins/image-minimizer-webpack-plugin/#Getting-Started">Getting Started</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Standalone Loader"><a class="" href="/plugins/image-minimizer-webpack-plugin/#Standalone-Loader">Standalone Loader</a></li><li class="sidebar-item__anchor" title="Standalone Plugin"><a class="" href="/plugins/image-minimizer-webpack-plugin/#Standalone-Plugin">Standalone Plugin</a></li></ul></li><li class="sidebar-item__anchor" title="Options"><a class="" href="/plugins/image-minimizer-webpack-plugin/#Options">Options</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Plugin Options"><a class="" href="/plugins/image-minimizer-webpack-plugin/#Plugin-Options">Plugin Options</a></li><li class="sidebar-item__anchor" title="Loader Options"><a class="" href="/plugins/image-minimizer-webpack-plugin/#Loader-Options">Loader Options</a></li></ul></li><li class="sidebar-item__anchor" title="Additional API"><a class="" href="/plugins/image-minimizer-webpack-plugin/#Additional-API">Additional API</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="imageminNormalizeConfig(config)"><a class="" href="/plugins/image-minimizer-webpack-plugin/#imageminNormalizeConfigconfig">imageminNormalizeConfig(config)</a></li></ul></li><li class="sidebar-item__anchor" title="Examples"><a class="" href="/plugins/image-minimizer-webpack-plugin/#Examples">Examples</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Optimize images based on size"><a class="" href="/plugins/image-minimizer-webpack-plugin/#Optimize-images-based-on-size">Optimize images based on size</a></li><li class="sidebar-item__anchor" title="Optimize and transform images to webp"><a class="" href="/plugins/image-minimizer-webpack-plugin/#Optimize-and-transform-images-to-webp">Optimize and transform images to webp</a></li></ul></li><li class="sidebar-item__anchor" title="Contributing"><a class="" href="/plugins/image-minimizer-webpack-plugin/#Contributing">Contributing</a></li><li class="sidebar-item__anchor" title="License"><a class="" href="/plugins/image-minimizer-webpack-plugin/#License">License</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/install-webpack-plugin/">InstallWebpackPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="dependencies"><a class="" href="/plugins/install-webpack-plugin/#dependencies">dependencies</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="peer"><a class="" href="/plugins/install-webpack-plugin/#peer">peer</a></li></ul></li><li class="sidebar-item__anchor" title="packageManager"><a class="" href="/plugins/install-webpack-plugin/#packageManager">packageManager</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="type"><a class="" href="/plugins/install-webpack-plugin/#type">type</a></li><li class="sidebar-item__anchor" title="options"><a class="" href="/plugins/install-webpack-plugin/#options">options</a></li><li class="sidebar-item__anchor" title="arguments"><a class="" href="/plugins/install-webpack-plugin/#arguments">arguments</a></li><li class="sidebar-item__anchor" title="dev"><a class="" href="/plugins/install-webpack-plugin/#dev">dev</a></li><li class="sidebar-item__anchor" title="quiet"><a class="" href="/plugins/install-webpack-plugin/#quiet">quiet</a></li></ul></li><li class="sidebar-item__anchor" title="prompt"><a class="" href="/plugins/install-webpack-plugin/#prompt">prompt</a></li><li class="sidebar-item__anchor" title="Contributing"><a class="" href="/plugins/install-webpack-plugin/#Contributing">Contributing</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/json-minimizer-webpack-plugin/">JsonMinimizerWebpackPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Getting Started"><a class="" href="/plugins/json-minimizer-webpack-plugin/#Getting-Started">Getting Started</a></li><li class="sidebar-item__anchor" title="Options"><a class="" href="/plugins/json-minimizer-webpack-plugin/#Options">Options</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="test"><a class="" href="/plugins/json-minimizer-webpack-plugin/#test">test</a></li><li class="sidebar-item__anchor" title="include"><a class="" href="/plugins/json-minimizer-webpack-plugin/#include">include</a></li><li class="sidebar-item__anchor" title="exclude"><a class="" href="/plugins/json-minimizer-webpack-plugin/#exclude">exclude</a></li><li class="sidebar-item__anchor" title="minimizerOptions"><a class="" href="/plugins/json-minimizer-webpack-plugin/#minimizerOptions">minimizerOptions</a></li></ul></li><li class="sidebar-item__anchor" title="Contributing"><a class="" href="/plugins/json-minimizer-webpack-plugin/#Contributing">Contributing</a></li><li class="sidebar-item__anchor" title="License"><a class="" href="/plugins/json-minimizer-webpack-plugin/#License">License</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/mini-css-extract-plugin/">MiniCssExtractPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="快速开始 "><a class="" href="/plugins/mini-css-extract-plugin/#getting-started">快速开始 </a></li><li class="sidebar-item__anchor" title="选项 "><a class="" href="/plugins/mini-css-extract-plugin/#options">选项 </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Plugin Options "><a class="" href="/plugins/mini-css-extract-plugin/#plugin-options">Plugin Options </a></li><li class="sidebar-item__anchor" title="Loader 选项 "><a class="" href="/plugins/mini-css-extract-plugin/#loader-options">Loader 选项 </a></li></ul></li><li class="sidebar-item__anchor" title="示例 "><a class="" href="/plugins/mini-css-extract-plugin/#examples">示例 </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="推荐 "><a class="" href="/plugins/mini-css-extract-plugin/#recommend">推荐 </a></li><li class="sidebar-item__anchor" title="最简单的例子 "><a class="" href="/plugins/mini-css-extract-plugin/#minimal-example">最简单的例子 </a></li><li class="sidebar-item__anchor" title="Named export for CSS Modules "><a class="" href="/plugins/mini-css-extract-plugin/#name-export-for-css-modules">Named export for CSS Modules </a></li><li class="sidebar-item__anchor" title="publicPath 选项为函数 "><a class="" href="/plugins/mini-css-extract-plugin/#the-publicpath-option-as-function">publicPath 选项为函数 </a></li><li class="sidebar-item__anchor" title="高级配置示例 "><a class="" href="/plugins/mini-css-extract-plugin/#advanced-configuration-example">高级配置示例 </a></li><li class="sidebar-item__anchor" title="模块热更新 (HMR) "><a class="" href="/plugins/mini-css-extract-plugin/#hot-module-reloading-hmr">模块热更新 (HMR) </a></li><li class="sidebar-item__anchor" title="生产模式压缩 "><a class="" href="/plugins/mini-css-extract-plugin/#minimizing-for-production">生产模式压缩 </a></li><li class="sidebar-item__anchor" title="使用预加载或内联 CSS "><a class="" href="/plugins/mini-css-extract-plugin/#using-preloaded-or-inlined-css">使用预加载或内联 CSS </a></li><li class="sidebar-item__anchor" title="提取所有的 CSS 到一个文件中 "><a class="" href="/plugins/mini-css-extract-plugin/#extracting-all-css-in-a-single-file">提取所有的 CSS 到一个文件中 </a></li><li class="sidebar-item__anchor" title="基于入口提取 CSS "><a class="" href="/plugins/mini-css-extract-plugin/#extracting-css-based-on-entry">基于入口提取 CSS </a></li><li class="sidebar-item__anchor" title="文件名选项设置为函数 "><a class="" href="/plugins/mini-css-extract-plugin/#filename-option-as-function">文件名选项设置为函数 </a></li><li class="sidebar-item__anchor" title="长期缓存 "><a class="" href="/plugins/mini-css-extract-plugin/#long-term-caching">长期缓存 </a></li><li class="sidebar-item__anchor" title="移除 Order 警告 "><a class="" href="/plugins/mini-css-extract-plugin/#remove-order-warnings">移除 Order 警告 </a></li><li class="sidebar-item__anchor" title="多主题配置 "><a class="" href="/plugins/mini-css-extract-plugin/#multiple-themes">多主题配置 </a></li><li class="sidebar-item__anchor" title="媒体查询插件 "><a class="" href="/plugins/mini-css-extract-plugin/#media-query-plugin">媒体查询插件 </a></li></ul></li><li class="sidebar-item__anchor" title="贡献 "><a class="" href="/plugins/mini-css-extract-plugin/#contributing">贡献 </a></li><li class="sidebar-item__anchor" title="License "><a class="" href="/plugins/mini-css-extract-plugin/#license">License </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/stylelint-webpack-plugin/">StylelintWebpackPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Getting Started "><a class="" href="/plugins/stylelint-webpack-plugin/#getting-started">Getting Started </a></li><li class="sidebar-item__anchor" title="选项 "><a class="" href="/plugins/stylelint-webpack-plugin/#options">选项 </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="configFile "><a class="" href="/plugins/stylelint-webpack-plugin/#configfile">configFile </a></li><li class="sidebar-item__anchor" title="context "><a class="" href="/plugins/stylelint-webpack-plugin/#context">context </a></li><li class="sidebar-item__anchor" title="exclude "><a class="" href="/plugins/stylelint-webpack-plugin/#exclude">exclude </a></li><li class="sidebar-item__anchor" title="extensions "><a class="" href="/plugins/stylelint-webpack-plugin/#extensions">extensions </a></li><li class="sidebar-item__anchor" title="files "><a class="" href="/plugins/stylelint-webpack-plugin/#files">files </a></li><li class="sidebar-item__anchor" title="fix "><a class="" href="/plugins/stylelint-webpack-plugin/#fix">fix </a></li><li class="sidebar-item__anchor" title="formatter "><a class="" href="/plugins/stylelint-webpack-plugin/#formatter">formatter </a></li><li class="sidebar-item__anchor" title="lintDirtyModulesOnly "><a class="" href="/plugins/stylelint-webpack-plugin/#lintdirtymodulesonly">lintDirtyModulesOnly </a></li><li class="sidebar-item__anchor" title="stylelintPath "><a class="" href="/plugins/stylelint-webpack-plugin/#stylelintpath">stylelintPath </a></li><li class="sidebar-item__anchor" title="threads "><a class="" href="/plugins/stylelint-webpack-plugin/#threads">threads </a></li><li class="sidebar-item__anchor" title="Errors 和 Warning "><a class="" href="/plugins/stylelint-webpack-plugin/#errors-and-warning">Errors 和 Warning </a></li></ul></li><li class="sidebar-item__anchor" title="Changelog "><a class="" href="/plugins/stylelint-webpack-plugin/#changelog">Changelog </a></li><li class="sidebar-item__anchor" title="License "><a class="" href="/plugins/stylelint-webpack-plugin/#license">License </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/plugins/terser-webpack-plugin/">TerserWebpackPlugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="入门 "><a class="" href="/plugins/terser-webpack-plugin/#getting-started">入门 </a></li><li class="sidebar-item__anchor" title="关于 source map 的说明 "><a class="" href="/plugins/terser-webpack-plugin/#note-about-source-maps">关于 source map 的说明 </a></li><li class="sidebar-item__anchor" title="选项 "><a class="" href="/plugins/terser-webpack-plugin/#options">选项 </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="test "><a class="" href="/plugins/terser-webpack-plugin/#test">test </a></li><li class="sidebar-item__anchor" title="include "><a class="" href="/plugins/terser-webpack-plugin/#include">include </a></li><li class="sidebar-item__anchor" title="exclude "><a class="" href="/plugins/terser-webpack-plugin/#exclude">exclude </a></li><li class="sidebar-item__anchor" title="parallel "><a class="" href="/plugins/terser-webpack-plugin/#parallel">parallel </a></li><li class="sidebar-item__anchor" title="minify "><a class="" href="/plugins/terser-webpack-plugin/#minify">minify </a></li><li class="sidebar-item__anchor" title="terserOptions "><a class="" href="/plugins/terser-webpack-plugin/#terseroptions">terserOptions </a></li><li class="sidebar-item__anchor" title="extractComments "><a class="" href="/plugins/terser-webpack-plugin/#extractcomments">extractComments </a></li></ul></li><li class="sidebar-item__anchor" title="示例 "><a class="" href="/plugins/terser-webpack-plugin/#examples">示例 </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="保留注释 "><a class="" href="/plugins/terser-webpack-plugin/#preserve-comments">保留注释 </a></li><li class="sidebar-item__anchor" title="删除注释 "><a class="" href="/plugins/terser-webpack-plugin/#remove-comments">删除注释 </a></li><li class="sidebar-item__anchor" title="自定义压缩函数 "><a class="" href="/plugins/terser-webpack-plugin/#custom-minify-function">自定义压缩函数 </a></li><li class="sidebar-item__anchor" title="Typescript "><a class="" href="/plugins/terser-webpack-plugin/#typescript">Typescript </a></li></ul></li><li class="sidebar-item__anchor" title="Contributing "><a class="" href="/plugins/terser-webpack-plugin/#contributing">Contributing </a></li><li class="sidebar-item__anchor" title="许可证 "><a class="" href="/plugins/terser-webpack-plugin/#license">许可证 </a></li></ul></div></div></div></nav><section class="page"><div class="markdown"><h1>Printable</h1><div id="md-content"><h1><span id="AutomaticPrefetchPlugin"></span>AutomaticPrefetchPlugin<a href="#AutomaticPrefetchPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p><code>AutomaticPrefetchPlugin</code> 会观察之前编译的 <strong>所有模块</strong> 的变化，以改进增量构建的时间。对比<a href="/plugins/prefetch-plugin/"><code>PrefetchPlugin</code></a> 而言，<code>PrefetchPlugin</code> 是预先发现 <strong>单个模块</strong>。</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p>可能有性能上的好处，也可能没有，因为增量构建时间非常快。</p></aside><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>AutomaticPrefetchPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h1><span id="BannerPlugin"></span>BannerPlugin<a href="#BannerPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>为每个 chunk 文件头部添加 banner。</p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>BannerPlugin</span><span class="token punctuation">(</span>banner<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 或者</span>
<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>BannerPlugin</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="options"></span>选项<a href="#options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><pre><code class="hljs language-ts"><span class="token punctuation">{</span>
  banner<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">function</span><span class="token punctuation">,</span> <span class="token comment">// 其值为字符串或函数，将作为注释存在</span>
  raw<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> <span class="token comment">// 如果值为 true，将直接输出，不会被作为注释</span>
  entryOnly<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> <span class="token comment">// 如果值为 true，将只在入口 chunks 文件中添加</span>
  test<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> RegExp <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> RegExp<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 包含所有匹配的模块</span>
  include<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> RegExp <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> RegExp<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 根据条件匹配所有模块</span>
  exclude<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> RegExp <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> RegExp<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 根据条件排除所有模块</span>
  footer<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> <span class="token comment">// 如果值为 true，banner 将会位于编译结果的最下方</span>
<span class="token punctuation">}</span></code></pre><h2><span id="usage"></span>用法<a href="#usage" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><pre><code class="hljs language-javascript"><span class="token keyword">import</span> webpack <span class="token keyword">from</span> <span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">;</span>

<span class="token comment">// 字符串</span>
<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>BannerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  banner<span class="token operator">:</span> <span class="token string">&#x27;hello world&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 函数</span>
<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>BannerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">banner</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">yourVariable</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">yourVariable: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>yourVariable<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="placeholders"></span>占位符<a href="#placeholders" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>从 webpack 2.5.0 开始，会对 <code>banner</code> 字符串中的占位符取值：</p><pre><code class="hljs language-javascript"><span class="token keyword">import</span> webpack <span class="token keyword">from</span> <span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>BannerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  banner<span class="token operator">:</span>
    <span class="token string">&#x27;fullhash:[fullhash], chunkhash:[chunkhash], name:[name], filebase:[filebase], query:[query], file:[file]&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h1><span id="CommonsChunkPlugin"></span>CommonsChunkPlugin<a href="#CommonsChunkPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>The <code>CommonsChunkPlugin</code> is an opt-in feature that creates a separate file (known as a chunk), consisting of common modules shared between multiple entry points.</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p>The CommonsChunkPlugin has been removed in webpack v4 legato. To learn how chunks are treated in the latest version, check out the <a href="/plugins/split-chunks-plugin/">SplitChunksPlugin</a>.</p></aside><p>By separating common modules from bundles, the resulting chunked file can be loaded once initially, and stored in cache for later use. This results in page speed optimizations as the browser can quickly serve the shared code from cache, rather than being forced to load a larger bundle whenever a new page is visited.</p><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="options"></span>Options<a href="#options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><pre><code class="hljs language-ts"><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token comment">// or</span>
  names<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// The chunk name of the commons chunk. An existing chunk can be selected by passing a name of an existing chunk.</span>
  <span class="token comment">// If an array of strings is passed this is equal to invoking the plugin multiple times for each chunk name.</span>
  <span class="token comment">// If omitted and `options.async` or `options.children` is set all chunks are used, otherwise `options.filename`</span>
  <span class="token comment">// is used as chunk name.</span>
  <span class="token comment">// When using `options.async` to create common chunks from other async chunks you must specify an entry-point</span>
  <span class="token comment">// chunk name here instead of omitting the `option.name`.</span>

  filename<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token comment">// The filename template for the commons chunk. Can contain the same placeholders as `output.filename`.</span>
  <span class="token comment">// If omitted the original filename is not modified (usually `output.filename` or `output.chunkFilename`).</span>
  <span class="token comment">// This option is not permitted if you&#x27;re using `options.async` as well, see below for more details.</span>

  minChunks<span class="token operator">:</span> <span class="token builtin">number</span><span class="token operator">|</span><span class="token number">Infinity</span><span class="token operator">|</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token keyword">module</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
  <span class="token comment">// The minimum number of chunks which need to contain a module before it&#x27;s moved into the commons chunk.</span>
  <span class="token comment">// The number must be greater than or equal 2 and lower than or equal to the number of chunks.</span>
  <span class="token comment">// Passing `Infinity` creates the commons chunk, but moves no modules into it.</span>
  <span class="token comment">// By providing a `function` you can add custom logic. (Defaults to the number of chunks)</span>

  chunks<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// Select the source chunks by chunk names. The chunk must be a child of the commons chunk.</span>
  <span class="token comment">// If omitted all entry chunks are selected.</span>

  children<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
  <span class="token comment">// If `true` all children of the commons chunk are selected</span>

  deepChildren<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
  <span class="token comment">// If `true` all descendants of the commons chunk are selected</span>

  <span class="token keyword">async</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token comment">// If `true` a new async commons chunk is created as child of `options.name` and sibling of `options.chunks`.</span>
  <span class="token comment">// It is loaded in parallel with `options.chunks`.</span>
  <span class="token comment">// Instead of using `option.filename`, it is possible to change the name of the output file by providing</span>
  <span class="token comment">// the desired string here instead of `true`.</span>

  minSize<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  <span class="token comment">// Minimum size of all common module before a commons chunk is created.</span>
<span class="token punctuation">}</span></code></pre><h2><span id="examples"></span>Examples<a href="#examples" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><h3><span id="commons-chunk-for-entries"></span>Commons chunk for entries<a href="#commons-chunk-for-entries" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Generate an extra chunk, which contains common modules shared between entry points.</p><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&#x27;commons&#x27;</span><span class="token punctuation">,</span>
  <span class="token comment">// (the commons chunk name)</span>

  filename<span class="token operator">:</span> <span class="token string">&#x27;commons.js&#x27;</span><span class="token punctuation">,</span>
  <span class="token comment">// (the filename of the commons chunk)</span>

  <span class="token comment">// minChunks: 3,</span>
  <span class="token comment">// (Modules must be shared between 3 entries)</span>

  <span class="token comment">// chunks: [&quot;pageA&quot;, &quot;pageB&quot;],</span>
  <span class="token comment">// (Only use these entries)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>You must load the generated chunk before the entry point:</p><pre><code class="hljs language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>commons.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>entry.bundle.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></code></pre><h3><span id="explicit-vendor-chunk"></span>Explicit vendor chunk<a href="#explicit-vendor-chunk" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Split your code into vendor and application.</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    vendor<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;jquery&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;other-lib&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    app<span class="token operator">:</span> <span class="token string">&#x27;./entry&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&#x27;vendor&#x27;</span><span class="token punctuation">,</span>
      <span class="token comment">// filename: &quot;vendor.js&quot;</span>
      <span class="token comment">// (Give the chunk a different name)</span>

      minChunks<span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span>
      <span class="token comment">// (with more entries, this ensures that no other module</span>
      <span class="token comment">//  goes into the vendor chunk)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><pre><code class="hljs language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vendor.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>In combination with long term caching you may need to use the <a href="https://github.com/soundcloud/chunk-manifest-webpack-plugin"><code>ChunkManifestWebpackPlugin</code></a> to avoid the vendor chunk changes. You should also use records to ensure stable module ids, e.g. using <code>NamedModulesPlugin</code> or <a href="/plugins/hashed-module-ids-plugin"><code>HashedModuleIdsPlugin</code></a>.</p></aside><h3><span id="move-common-modules-into-the-parent-chunk"></span>Move common modules into the parent chunk<a href="#move-common-modules-into-the-parent-chunk" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>With <a href="/guides/code-splitting">Code Splitting</a>, multiple child chunks of an entry chunk can have common dependencies. To prevent duplication these can be moved into the parent. This reduces overall size, but does have a negative effect on the initial load time. If it is expected that users will need to download many sibling chunks, i.e. children of the entry chunk, then this should improve load time overall.</p><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// names: [&quot;app&quot;, &quot;subPageA&quot;]</span>
  <span class="token comment">// (choose the chunks, or omit for all chunks)</span>

  children<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// (select all children of chosen chunks)</span>

  <span class="token comment">// minChunks: 3,</span>
  <span class="token comment">// (3 children must share the module before it&#x27;s moved)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3><span id="extra-async-commons-chunk"></span>Extra async commons chunk<a href="#extra-async-commons-chunk" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Similar to the above one, but instead of moving common modules into the parent (which increases initial load time) a new async-loaded additional commons chunk is used. This is automatically downloaded in parallel when the additional chunk is downloaded.</p><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&#x27;app&#x27;</span><span class="token punctuation">,</span>
  <span class="token comment">// or</span>
  names<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;app&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;subPageA&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// the name or list of names must match the name or names</span>
  <span class="token comment">// of the entry points that create the async chunks</span>

  children<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// (use all children of the chunk)</span>

  async<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// (create an async commons chunk)</span>

  minChunks<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token comment">// (3 children must share the module before it&#x27;s separated)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3><span id="passing-the-minchunks-property-a-function"></span>Passing the <code>minChunks</code> property a function<a href="#passing-the-minchunks-property-a-function" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>You also have the ability to pass the <code>minChunks</code> property a function. This function is called by the <code>CommonsChunkPlugin</code> and calls the function with <code>module</code> and <code>count</code> arguments.</p><p>The <code>module</code> argument represents each module in the chunks you have provided via the <code>name</code>/<code>names</code> property.
<code>module</code> has the shape of a <a href="https://github.com/webpack/webpack/blob/master/lib/NormalModule.js">NormalModule</a>, which has two particularly useful properties for this use case:</p><ul><li><code>module.context</code>: The directory that stores the file. For example: <code>&#x27;/my_project/node_modules/example-dependency&#x27;</code></li><li><code>module.resource</code>: The name of the file being processed. For example: <code>&#x27;/my_project/node_modules/example-dependency/index.js&#x27;</code></li></ul><p>The <code>count</code> argument represents how many chunks the <code>module</code> is used in.</p><p>This option is useful when you want to have fine-grained control over how the CommonsChunk algorithm determines where modules should be moved to.</p><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&#x27;my-single-lib-chunk&#x27;</span><span class="token punctuation">,</span>
  filename<span class="token operator">:</span> <span class="token string">&#x27;my-single-lib-chunk.js&#x27;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">minChunks</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// If module has a path, and inside of the path exists the name &quot;somelib&quot;,</span>
    <span class="token comment">// and it is used in 3 separate chunks/entries, then break it out into</span>
    <span class="token comment">// a separate chunk with chunk keyname &quot;my-single-lib-chunk&quot;, and filename &quot;my-single-lib-chunk.js&quot;</span>
    <span class="token keyword">return</span> module<span class="token punctuation">.</span>resource <span class="token operator">&amp;&amp;</span> <span class="token regex">/somelib/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>resource<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> count <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>As seen above, this example allows you to move only one lib to a separate file if and only if all conditions are met inside the function.</p><p>This concept may be used to obtain implicit common vendor chunks:</p><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&#x27;vendor&#x27;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">minChunks</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// this assumes your vendor imports exist in the node_modules directory</span>
    <span class="token keyword">return</span> module<span class="token punctuation">.</span>context <span class="token operator">&amp;&amp;</span> module<span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#x27;node_modules&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="manifest-file"></span>Manifest file<a href="#manifest-file" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>To extract the webpack bootstrap logic into a separate file, use the <code>CommonsChunkPlugin</code> on a <code>name</code> which is not defined as <code>entry</code>. Commonly the name <code>manifest</code> is used. See the <a href="/guides/caching">caching guide</a> for details.</p><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&#x27;manifest&#x27;</span><span class="token punctuation">,</span>
  minChunks<span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="combining-implicit-common-vendor-chunks-and-manifest-file"></span>Combining implicit common vendor chunks and manifest file<a href="#combining-implicit-common-vendor-chunks-and-manifest-file" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>Since the <code>vendor</code> and <code>manifest</code> chunk use a different definition for <code>minChunks</code>, you need to invoke the plugin twice:</p><pre><code class="hljs language-javascript"><span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&#x27;vendor&#x27;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">minChunks</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> module<span class="token punctuation">.</span>context <span class="token operator">&amp;&amp;</span> module<span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#x27;node_modules&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&#x27;manifest&#x27;</span><span class="token punctuation">,</span>
    minChunks<span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><h2><span id="more-examples"></span>More Examples<a href="#more-examples" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><ul><li><a href="https://github.com/webpack/webpack/tree/master/examples/common-chunk-and-vendor-chunk">Common and Vendor Chunks</a></li><li><a href="https://github.com/webpack/webpack/tree/8b888fedfaeaac6bd39168c0952cc19e6c34280a/examples/multiple-commons-chunks">Multiple Common Chunks</a></li><li><a href="https://github.com/webpack/webpack/tree/8b888fedfaeaac6bd39168c0952cc19e6c34280a/examples/multiple-entry-points-commons-chunk-css-bundle">Multiple Entry Points with Commons Chunk</a></li></ul><h1><span id="CompressionWebpackPlugin"></span>CompressionWebpackPlugin<a href="#CompressionWebpackPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<div align="center"></div><p><a href="https://npmjs.com/package/compression-webpack-plugin"><img src="https://img.shields.io/npm/v/compression-webpack-plugin.svg" alt="npm"/></a>
<a href="https://nodejs.org"><img src="https://img.shields.io/node/v/compression-webpack-plugin.svg" alt="node"/></a>
<a href="https://david-dm.org/webpack-contrib/compression-webpack-plugin"><img src="https://david-dm.org/webpack-contrib/compression-webpack-plugin.svg" alt="deps"/></a>
<a href="https://github.com/webpack-contrib/compression-webpack-plugin/actions"><img src="https://github.com/webpack-contrib/compression-webpack-plugin/workflows/compression-webpack-plugin/badge.svg" alt="tests"/></a>
<a href="https://codecov.io/gh/webpack-contrib/compression-webpack-plugin"><img src="https://codecov.io/gh/webpack-contrib/compression-webpack-plugin/branch/master/graph/badge.svg" alt="cover"/></a>
<a href="https://gitter.im/webpack/webpack"><img src="https://img.shields.io/badge/gitter-webpack%2Fwebpack-brightgreen.svg" alt="chat"/></a>
<a href="https://packagephobia.now.sh/result?p=compression-webpack-plugin"><img src="https://packagephobia.now.sh/badge?p=compression-webpack-plugin" alt="size"/></a></p><p>Prepare compressed versions of assets to serve them with Content-Encoding.</p><h2><span id="getting-started"></span>Getting Started<a href="#getting-started" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>To begin, you&#x27;ll need to install <code>compression-webpack-plugin</code>:</p><pre><code class="hljs language-console">npm install compression-webpack-plugin --save-dev
</code></pre><p>Then add the plugin to your <code>webpack</code> config. For example:</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> CompressionPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;compression-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>And run <code>webpack</code> via your preferred method.</p><h2><span id="options"></span>Options<a href="#options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><table><thead><tr><th align="center">Name</th><th align="center">Type</th><th align="center">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center" data-th="Name"><span><strong><a href="#test"><code>test</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{String|RegExp|Array&lt;String|RegExp&gt;}</code></span></td><td align="center" data-th="Default"><span><code>undefined</code></span></td><td align="left" data-th="Description"><span>Include all assets that pass test assertion</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#include"><code>include</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{String|RegExp|Array&lt;String|RegExp&gt;}</code></span></td><td align="center" data-th="Default"><span><code>undefined</code></span></td><td align="left" data-th="Description"><span>Include all assets matching any of these conditions</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#exclude"><code>exclude</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{String|RegExp|Array&lt;String|RegExp&gt;}</code></span></td><td align="center" data-th="Default"><span><code>undefined</code></span></td><td align="left" data-th="Description"><span>Exclude all assets matching any of these conditions</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#algorithm"><code>algorithm</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{String|Function}</code></span></td><td align="center" data-th="Default"><span><code>gzip</code></span></td><td align="left" data-th="Description"><span>The compression algorithm/function</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#compressionoptions"><code>compressionOptions</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{Object}</code></span></td><td align="center" data-th="Default"><span>maximum available compression level, for gzip: <code>{ level: 9 }</code></span></td><td align="left" data-th="Description"><span>Compression options for <code>algorithm</code></span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#threshold"><code>threshold</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{Number}</code></span></td><td align="center" data-th="Default"><span><code>0</code></span></td><td align="left" data-th="Description"><span>Only assets bigger than this size are processed (in bytes)</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#minratio"><code>minRatio</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{Number}</code></span></td><td align="center" data-th="Default"><span><code>0.8</code></span></td><td align="left" data-th="Description"><span>Only assets that compress better than this ratio are processed (<code>minRatio = Compressed Size / Original Size</code>)</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#filename"><code>filename</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{String|Function}</code></span></td><td align="center" data-th="Default"><span><code>[path][base].gz</code></span></td><td align="left" data-th="Description"><span>The target asset filename</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#deleteoriginalassets"><code>deleteOriginalAssets</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{Boolean|&#x27;keep-source-map&#x27;}</code></span></td><td align="center" data-th="Default"><span><code>false</code></span></td><td align="left" data-th="Description"><span>Whether to delete the original assets or not</span></td></tr></tbody></table><h3><span id="test"></span><code>test</code><a href="#test" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Type: <code>String|RegExp|Array&lt;String|RegExp&gt;</code>
Default: <code>undefined</code></p><p>Include all assets that pass test assertion.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.js(\?.*)?$/i</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="include"></span><code>include</code><a href="#include" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Type: <code>String|RegExp|Array&lt;String|RegExp&gt;</code>
Default: <code>undefined</code></p><p>Include all assets matching any of these conditions.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      include<span class="token operator">:</span> <span class="token regex">/\/includes/</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="exclude"></span><code>exclude</code><a href="#exclude" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Type: <code>String|RegExp|Array&lt;String|RegExp&gt;</code>
Default: <code>undefined</code></p><p>Exclude all assets matching any of these conditions.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      exclude<span class="token operator">:</span> <span class="token regex">/\/excludes/</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="algorithm"></span><code>algorithm</code><a href="#algorithm" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Type: <code>String|Function</code>
Default: <code>gzip</code></p><p>The compression algorithm/function.</p><blockquote><p>ℹ️ If you use custom function for the <code>algorithm</code> option, the default value of the <code>compressionOptions</code> option is <code>{}</code>.</p></blockquote><h4><span id="string"></span><code>String</code><a href="#string" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>The algorithm is taken from <a href="https://nodejs.org/api/zlib.html">zlib</a>.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      algorithm<span class="token operator">:</span> <span class="token string">&#x27;gzip&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="function"></span><code>Function</code><a href="#function" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Allow to specify a custom compression function.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token function">algorithm</span><span class="token punctuation">(</span><span class="token parameter">input<span class="token punctuation">,</span> compressionOptions<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">compressionFunction</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> compressionOptions<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="compressionoptions"></span><code>compressionOptions</code><a href="#compressionoptions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Type: <code>Object</code>
Default: <code>{ level: 9 }</code></p><p>Compression options for <code>algorithm</code>.</p><p>You can find all options here <a href="https://nodejs.org/api/zlib.html#zlib_class_options">zlib</a>.</p><blockquote><p>ℹ️ If you use custom function for the <code>algorithm</code> option, the default value is <code>{}</code>.</p></blockquote><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      compressionOptions<span class="token operator">:</span> <span class="token punctuation">{</span> level<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="threshold"></span><code>threshold</code><a href="#threshold" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Type: <code>Number</code>
Default: <code>0</code></p><p>Only assets bigger than this size are processed. In bytes.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      threshold<span class="token operator">:</span> <span class="token number">8192</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="minratio"></span><code>minRatio</code><a href="#minratio" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Type: <code>Number</code>
Default: <code>0.8</code></p><p>Only assets that compress better than this ratio are processed (<code>minRatio = Compressed Size / Original Size</code>).
Example: you have <code>image.png</code> file with 1024b size, compressed version of file has 768b size, so <code>minRatio</code> equal <code>0.75</code>.
In other words assets will be processed when the <code>Compressed Size / Original Size</code> value less <code>minRatio</code> value.</p><p>You can use <code>1</code> value to process assets that are smaller than the original.</p><p>Use a value of <code>Infinity</code> to process all assets even if they are larger than the original size or their original size is <code>0</code> bytes (useful when you are pre-zipping all assets for AWS).</p><p>Use a value of <code>Number.MAX_SAFE_INTEGER</code> to process all assets even if they are larger than the original size, excluding assets with their original size is <code>0</code> bytes.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// Compress all assets, including files with `0` bytes size</span>
      <span class="token comment">// minRatio: Infinity</span>

      <span class="token comment">// Compress all assets, excluding files with `0` bytes size</span>
      <span class="token comment">// minRatio: Number.MAX_SAFE_INTEGER</span>

      minRatio<span class="token operator">:</span> <span class="token number">0.8</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="filename"></span><code>filename</code><a href="#filename" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Type: <code>String|Function</code>
Default: <code>&quot;[path][base].gz&quot;</code></p><p>The target asset filename.</p><h4><span id="string"></span><code>String</code><a href="#string" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>For example we have <code>assets/images/image.png?foo=bar#hash</code>:</p><p><code>[path]</code> is replaced with the directories to the original asset, included trailing <code>/</code> (<code>assets/images/</code>).</p><p><code>[file]</code> is replaced with the path of original asset (<code>assets/images/image.png</code>).</p><p><code>[base]</code> is replaced with the base (<code>[name]</code> + <code>[ext]</code>) of the original asset (<code>image.png</code>).</p><p><code>[name]</code> is replaced with the name of the original asset (<code>image</code>).</p><p><code>[ext]</code> is replaced with the extension of the original asset, included <code>.</code> (<code>.png</code>).</p><p><code>[query]</code> is replaced with the query of the original asset, included <code>?</code> (<code>?foo=bar</code>).</p><p><code>[fragment]</code> is replaced with the fragment (in the concept of URL it is called <code>hash</code>) of the original asset (<code>#hash</code>).</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&#x27;[path][base].gz&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="function"></span><code>Function</code><a href="#function" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token function">filename</span><span class="token punctuation">(</span><span class="token parameter">pathData</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// The `pathData` argument contains all placeholders - `path`/`name`/`ext`/etc</span>
        <span class="token comment">// Available properties described above, for the `String` notation</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/\.svg$/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>pathData<span class="token punctuation">.</span>filename<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token string">&#x27;assets/svg/[path][base].gz&#x27;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token string">&#x27;assets/js/[path][base].gz&#x27;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="deleteoriginalassets"></span><code>deleteOriginalAssets</code><a href="#deleteoriginalassets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Type: <code>Boolean | &#x27;keep-source-map&#x27;</code>
Default: <code>false</code></p><p>Whether to delete the original assets or not.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      deleteOriginalAssets<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>To exclude sourcemaps from compression</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      exclude<span class="token operator">:</span> <span class="token regex">/.map$/</span>
      deleteOriginalAssets<span class="token operator">:</span> <span class="token string">&#x27;keep-source-map&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="examples"></span>Examples<a href="#examples" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><h3><span id="using-zopfli"></span>Using Zopfli<a href="#using-zopfli" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Prepare compressed versions of assets using <code>zopfli</code> library.</p><blockquote><p>ℹ️ <code>@gfx/zopfli</code> require minimum <code>8</code> version of <code>node</code>.</p></blockquote><p>To begin, you&#x27;ll need to install <code>@gfx/zopfli</code>:</p><pre><code class="hljs language-console">npm install @gfx/zopfli --save-dev
</code></pre><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> zopfli <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;@gfx/zopfli&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      compressionOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        numiterations<span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">algorithm</span><span class="token punctuation">(</span><span class="token parameter">input<span class="token punctuation">,</span> compressionOptions<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> zopfli<span class="token punctuation">.</span><span class="token function">gzip</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> compressionOptions<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="using-brotli"></span>Using Brotli<a href="#using-brotli" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><a href="https://en.wikipedia.org/wiki/Brotli">Brotli</a> is a compression algorithm originally developed by Google, and offers compression superior to gzip.</p><p>Node 10.16.0 and later has <a href="https://nodejs.org/api/zlib.html#zlib_zlib_createbrotlicompress_options">native support</a> for Brotli compression in its zlib module.</p><p>We can take advantage of this built-in support for Brotli in Node 10.16.0 and later by just passing in the appropriate <code>algorithm</code> to the CompressionPlugin:</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> zlib <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;zlib&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&#x27;[path][base].br&#x27;</span><span class="token punctuation">,</span>
      algorithm<span class="token operator">:</span> <span class="token string">&#x27;brotliCompress&#x27;</span><span class="token punctuation">,</span>
      test<span class="token operator">:</span> <span class="token regex">/\.(js|css|html|svg)$/</span><span class="token punctuation">,</span>
      compressionOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        params<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token punctuation">[</span>zlib<span class="token punctuation">.</span>constants<span class="token punctuation">.</span><span class="token constant">BROTLI_PARAM_QUALITY</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      threshold<span class="token operator">:</span> <span class="token number">10240</span><span class="token punctuation">,</span>
      minRatio<span class="token operator">:</span> <span class="token number">0.8</span><span class="token punctuation">,</span>
      deleteOriginalAssets<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><strong>Note</strong> Brotli’s <code>BROTLI_PARAM_QUALITY</code> option is functionally equivalent to zlib’s <code>level</code> option.
You can find all Brotli’s options in <a href="https://nodejs.org/api/zlib.html#zlib_class_brotlioptions">the relevant part of the zlib module documentation</a>.</p><h3><span id="multiple-compressed-versions-of-assets-for-different-algorithm"></span>Multiple compressed versions of assets for different algorithm<a href="#multiple-compressed-versions-of-assets-for-different-algorithm" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> zlib <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;zlib&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&#x27;[path][base].gz&#x27;</span><span class="token punctuation">,</span>
      algorithm<span class="token operator">:</span> <span class="token string">&#x27;gzip&#x27;</span><span class="token punctuation">,</span>
      test<span class="token operator">:</span> <span class="token regex">/\.js$|\.css$|\.html$/</span><span class="token punctuation">,</span>
      threshold<span class="token operator">:</span> <span class="token number">10240</span><span class="token punctuation">,</span>
      minRatio<span class="token operator">:</span> <span class="token number">0.8</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&#x27;[path][base].br&#x27;</span><span class="token punctuation">,</span>
      algorithm<span class="token operator">:</span> <span class="token string">&#x27;brotliCompress&#x27;</span><span class="token punctuation">,</span>
      test<span class="token operator">:</span> <span class="token regex">/\.(js|css|html|svg)$/</span><span class="token punctuation">,</span>
      compressionOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        params<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token punctuation">[</span>zlib<span class="token punctuation">.</span>constants<span class="token punctuation">.</span><span class="token constant">BROTLI_PARAM_QUALITY</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      threshold<span class="token operator">:</span> <span class="token number">10240</span><span class="token punctuation">,</span>
      minRatio<span class="token operator">:</span> <span class="token number">0.8</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="contributing"></span>Contributing<a href="#contributing" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>Please take a moment to read our contributing guidelines if you haven&#x27;t yet done so.</p><p><a href="https://github.com/webpack-contrib/compression-webpack-plugin/blob/master/.github/CONTRIBUTING.md">CONTRIBUTING</a></p><h2><span id="license"></span>License<a href="#license" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><a href="https://github.com/webpack-contrib/compression-webpack-plugin/blob/master/LICENSE">MIT</a></p><h1><span id="ContextExclusionPlugin"></span>ContextExclusionPlugin<a href="#ContextExclusionPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p><em>Context</em> refers to a <a href="/guides/dependency-management/#require-with-expression">require with an expression</a> such as <code>require(&#x27;./locale/&#x27; + name + &#x27;.json&#x27;)</code>.</p><p>The <code>ContextExclusionPlugin</code> allows you to exclude context. Provide RegExp as an argument when initializing the Plugin to exclude all context that matches it.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ContextExclusionPlugin</span><span class="token punctuation">(</span><span class="token regex">/dont/</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h1><span id="ContextReplacementPlugin"></span>ContextReplacementPlugin<a href="#ContextReplacementPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p><em>Context</em> refers to a <a href="/guides/dependency-management/#require-with-expression">require with an expression</a> such as <code>require(&#x27;./locale/&#x27; + name + &#x27;.json&#x27;)</code>. When encountering such an expression, webpack infers the directory (<code>&#x27;./locale/&#x27;</code>) and a regular expression (<code>/^.*\.json$/</code>). Since the <code>name</code> is not known at compile time, webpack includes every file as module in the bundle.</p><p>The <code>ContextReplacementPlugin</code> allows you to override the inferred information. There are various ways to configure the plugin:</p><h2><span id="usage"></span>Usage<a href="#usage" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><pre><code class="hljs language-typescript"><span class="token keyword">new</span> <span class="token class-name">webpack</span><span class="token punctuation">.</span><span class="token function">ContextReplacementPlugin</span><span class="token punctuation">(</span>
  resourceRegExp<span class="token operator">:</span> RegExp<span class="token punctuation">,</span>
  newContentResource<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  newContentRecursive<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
  newContentRegExp<span class="token operator">?</span><span class="token operator">:</span> RegExp
<span class="token punctuation">)</span></code></pre><p>If the resource (directory) matches <code>resourceRegExp</code>, the plugin replaces the default resource, recursive flag or generated regular expression with <code>newContentResource</code>, <code>newContentRecursive</code> or <code>newContextRegExp</code> respectively. If <code>newContentResource</code> is relative, it is resolved relative to the previous resource.</p><p>Here&#x27;s a small example to restrict module usage:</p><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ContextReplacementPlugin</span><span class="token punctuation">(</span><span class="token regex">/moment[/\\]locale$/</span><span class="token punctuation">,</span> <span class="token regex">/de|fr|hu/</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The <code>moment/locale</code> context is restricted to files matching <code>/de|fr|hu/</code>. Thus only those locales are included (see <a href="https://github.com/moment/moment/issues/2373">this issue</a> for more information).</p><h2><span id="content-callback"></span>Content Callback<a href="#content-callback" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><pre><code class="hljs language-typescript"><span class="token keyword">new</span> <span class="token class-name">webpack</span><span class="token punctuation">.</span><span class="token function">ContextReplacementPlugin</span><span class="token punctuation">(</span>
  resourceRegExp<span class="token operator">:</span> RegExp<span class="token punctuation">,</span>
  <span class="token function-variable function">newContentCallback</span><span class="token operator">:</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The <code>newContentCallback</code> function is given a <a href="/api/plugins/module-factories/"><code>data</code> object of the <code>ContextModuleFactory</code></a> and is expected to overwrite the <code>request</code> attribute of the supplied object.</p><p>Using this callback we can dynamically redirect requests to a new location:</p><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ContextReplacementPlugin</span><span class="token punctuation">(</span><span class="token regex">/^\.\/locale$/</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token regex">/\/moment\//</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>context<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

  Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    regExp<span class="token operator">:</span> <span class="token regex">/^\.\/\w+/</span><span class="token punctuation">,</span>
    request<span class="token operator">:</span> <span class="token string">&#x27;../../locale&#x27;</span><span class="token punctuation">,</span> <span class="token comment">// resolved relatively</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="other-options"></span>Other Options<a href="#other-options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>The <code>newContentResource</code> and <code>newContentCreateContextMap</code> parameters are also available:</p><pre><code class="hljs language-typescript"><span class="token keyword">new</span> <span class="token class-name">webpack</span><span class="token punctuation">.</span><span class="token function">ContextReplacementPlugin</span><span class="token punctuation">(</span>
  resourceRegExp<span class="token operator">:</span> RegExp<span class="token punctuation">,</span>
  newContentResource<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  newContentCreateContextMap<span class="token operator">:</span> object <span class="token comment">// mapping runtime-request (userRequest) to compile-time-request (request)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>These two parameters can be used together to redirect requests in a more targeted way. The <code>newContentCreateContextMap</code> allows you to map runtime requests to compile requests in the form of an object:</p><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">ContextReplacementPlugin</span><span class="token punctuation">(</span><span class="token regex">/selector/</span><span class="token punctuation">,</span> <span class="token string">&#x27;./folder&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token string">&#x27;./request&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;./request&#x27;</span><span class="token punctuation">,</span>
  <span class="token string">&#x27;./other-request&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;./new-request&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h1><span id="CopyWebpackPlugin"></span>CopyWebpackPlugin<a href="#CopyWebpackPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<div align="center"></div><p><a href="https://npmjs.com/package/copy-webpack-plugin"><img src="https://img.shields.io/npm/v/copy-webpack-plugin.svg" alt="npm"/></a>
<a href="https://nodejs.org"><img src="https://img.shields.io/node/v/copy-webpack-plugin.svg" alt="node"/></a>
<a href="https://david-dm.org/webpack-contrib/copy-webpack-plugin"><img src="https://david-dm.org/webpack-contrib/copy-webpack-plugin.svg" alt="deps"/></a>
<a href="https://github.com/webpack-contrib/copy-webpack-plugin/actions"><img src="https://github.com/webpack-contrib/copy-webpack-plugin/workflows/copy-webpack-plugin/badge.svg" alt="tests"/></a>
<a href="https://codecov.io/gh/webpack-contrib/copy-webpack-plugin"><img src="https://codecov.io/gh/webpack-contrib/copy-webpack-plugin/branch/master/graph/badge.svg" alt="cover"/></a>
<a href="https://gitter.im/webpack/webpack"><img src="https://img.shields.io/badge/gitter-webpack%2Fwebpack-brightgreen.svg" alt="chat"/></a>
<a href="https://packagephobia.now.sh/result?p=copy-webpack-plugin"><img src="https://packagephobia.now.sh/badge?p=copy-webpack-plugin" alt="size"/></a></p><p>Copies individual files or entire directories, which already exist, to the build directory.</p><h2><span id="getting-started"></span>Getting Started<a href="#getting-started" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>To begin, you&#x27;ll need to install <code>copy-webpack-plugin</code>:</p><pre><code class="hljs language-console">npm install copy-webpack-plugin --save-dev
</code></pre><p>Then add the plugin to your <code>webpack</code> config. For example:</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> CopyPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;copy-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;source&#x27;</span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token string">&#x27;dest&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;other&#x27;</span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token string">&#x27;public&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><blockquote><p>ℹ️ <code>copy-webpack-plugin</code> is not designed to copy files generated from the build process; rather, it is to copy files that already exist in the source tree, as part of the build process.</p></blockquote><blockquote><p>ℹ️ If you want <code>webpack-dev-server</code> to write files to the output directory during development, you can force it with the <a href="https://github.com/webpack/webpack-dev-middleware#writetodisk"><code>writeToDisk</code></a> option or the <a href="https://github.com/gajus/write-file-webpack-plugin"><code>write-file-webpack-plugin</code></a>.</p></blockquote><blockquote><p>ℹ️ You can get the original source filename from <a href="/api/stats/#asset-objects">Asset Objects</a>.</p></blockquote><h2><span id="options"></span>Options<a href="#options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><table><thead><tr><th align="center">Name</th><th align="center">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center" data-th="Name"><span><strong><a href="#patterns"><code>patterns</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{Array&lt;String|Object&gt;}</code></span></td><td align="left" data-th="Description"><span>Specify file related patterns for plugin</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#options"><code>options</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{Object}</code></span></td><td align="left" data-th="Description"><span>Specify options for plugin</span></td></tr></tbody></table><p>The plugin&#x27;s signature:</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> CopyPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;copy-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;source&#x27;</span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token string">&#x27;dest&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;other&#x27;</span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token string">&#x27;public&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">{</span>
        concurrency<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="patterns"></span>Patterns<a href="#patterns" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><table><thead><tr><th align="center">Name</th><th align="center">Type</th><th align="center">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center" data-th="Name"><span><a href="#from"><code>from</code></a></span></td><td align="center" data-th="Type"><span><code>{String}</code></span></td><td align="center" data-th="Default"><span><code>undefined</code></span></td><td align="left" data-th="Description"><span>Glob or path from where we copy files.</span></td></tr><tr><td align="center" data-th="Name"><span><a href="#to"><code>to</code></a></span></td><td align="center" data-th="Type"><span><code>{String|Function}</code></span></td><td align="center" data-th="Default"><span><code>compiler.options.output</code></span></td><td align="left" data-th="Description"><span>Output path.</span></td></tr><tr><td align="center" data-th="Name"><span><a href="#context"><code>context</code></a></span></td><td align="center" data-th="Type"><span><code>{String}</code></span></td><td align="center" data-th="Default"><span><code>options.context || compiler.options.context</code></span></td><td align="left" data-th="Description"><span>A path that determines how to interpret the <code>from</code> path.</span></td></tr><tr><td align="center" data-th="Name"><span><a href="#globoptions"><code>globOptions</code></a></span></td><td align="center" data-th="Type"><span><code>{Object}</code></span></td><td align="center" data-th="Default"><span><code>undefined</code></span></td><td align="left" data-th="Description"><span><a href="https://github.com/sindresorhus/globby#options">Options</a> passed to the glob pattern matching library including <code>ignore</code> option.</span></td></tr><tr><td align="center" data-th="Name"><span><a href="#filter"><code>filter</code></a></span></td><td align="center" data-th="Type"><span><code>{Function}</code></span></td><td align="center" data-th="Default"><span><code>undefined</code></span></td><td align="left" data-th="Description"><span>Allows to filter copied assets.</span></td></tr><tr><td align="center" data-th="Name"><span><a href="#totype"><code>toType</code></a></span></td><td align="center" data-th="Type"><span><code>{String}</code></span></td><td align="center" data-th="Default"><span><code>undefined</code></span></td><td align="left" data-th="Description"><span>Determinate what is <code>to</code> option - directory, file or template.</span></td></tr><tr><td align="center" data-th="Name"><span><a href="#force"><code>force</code></a></span></td><td align="center" data-th="Type"><span><code>{Boolean}</code></span></td><td align="center" data-th="Default"><span><code>false</code></span></td><td align="left" data-th="Description"><span>Overwrites files already in <code>compilation.assets</code> (usually added by other plugins/loaders).</span></td></tr><tr><td align="center" data-th="Name"><span><a href="#priority"><code>priority</code></a></span></td><td align="center" data-th="Type"><span><code>{Number}</code></span></td><td align="center" data-th="Default"><span><code>0</code></span></td><td align="left" data-th="Description"><span>Allows you to specify the copy priority.</span></td></tr><tr><td align="center" data-th="Name"><span><a href="#transform"><code>transform</code></a></span></td><td align="center" data-th="Type"><span><code>{Object}</code></span></td><td align="center" data-th="Default"><span><code>undefined</code></span></td><td align="left" data-th="Description"><span>Allows to modify the file contents. Enable <code>transform</code> caching. You can use <code>{ transform: {cache: { key: &#x27;my-cache-key&#x27; }} }</code> to invalidate the cache.</span></td></tr><tr><td align="center" data-th="Name"><span><a href="#transformall"><code>transformAll</code></a></span></td><td align="center" data-th="Type"><span><code>{Function}</code></span></td><td align="center" data-th="Default"><span><code>undefined</code></span></td><td align="left" data-th="Description"><span>Allows you to modify the contents of multiple files and save the result to one file.</span></td></tr><tr><td align="center" data-th="Name"><span><a href="#noerroronmissing"><code>noErrorOnMissing</code></a></span></td><td align="center" data-th="Type"><span><code>{Boolean}</code></span></td><td align="center" data-th="Default"><span><code>false</code></span></td><td align="left" data-th="Description"><span>Doesn&#x27;t generate an error on missing file(s).</span></td></tr><tr><td align="center" data-th="Name"><span><a href="#info"><code>info</code></a></span></td><td align="center" data-th="Type"><span><code>{Object|Function}</code></span></td><td align="center" data-th="Default"><span><code>undefined</code></span></td><td align="left" data-th="Description"><span>Allows to add assets info.</span></td></tr></tbody></table><h4><span id="from"></span><code>from</code><a href="#from" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>String</code>
Default: <code>undefined</code></p><p>Glob or path from where we copy files.
Globs accept <a href="https://github.com/mrmlnc/fast-glob#pattern-syntax">fast-glob pattern-syntax</a>.
Glob can only be a <code>string</code>.</p><blockquote><p>⚠️ Don&#x27;t use directly <code>\\</code> in <code>from</code> option if it is a <code>glob</code> (i.e <code>path\to\file.ext</code>) option because on UNIX the backslash is a valid character inside a path component, i.e., it&#x27;s not a separator.
On Windows, the forward slash and the backward slash are both separators.
Instead please use <code>/</code>.</p></blockquote><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&#x27;relative/path/to/file.ext&#x27;</span><span class="token punctuation">,</span>
        <span class="token string">&#x27;relative/path/to/dir&#x27;</span><span class="token punctuation">,</span>
        path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;src&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;file.ext&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;src&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;dir&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string">&#x27;**/*&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;**/*&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// If absolute path is a `glob` we replace backslashes with forward slashes, because only forward slashes can be used in the `glob`</span>
        path<span class="token punctuation">.</span>posix<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>
          path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;src&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\\/g</span><span class="token punctuation">,</span> <span class="token string">&#x27;/&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token string">&#x27;*.txt&#x27;</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h5><span id="for-windows"></span><code>For windows</code><a href="#for-windows" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p>If you define <code>from</code> as absolute file path or absolute folder path on <code>Windows</code>, you can use windows path segment (<code>\\</code>)</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;file.txt&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>But you should always use forward-slashes in <code>glob</code> expressions
See <a href="https://github.com/mrmlnc/fast-glob#how-to-write-patterns-on-windows">fast-glob manual</a>.</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token comment">// If absolute path is a `glob` we replace backslashes with forward slashes, because only forward slashes can be used in the `glob`</span>
          <span class="token keyword">from</span><span class="token operator">:</span> path<span class="token punctuation">.</span>posix<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>
            path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;fixtures&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\\/g</span><span class="token punctuation">,</span> <span class="token string">&#x27;/&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string">&#x27;*.txt&#x27;</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>The <code>context</code> behaves differently depending on what the <code>from</code> is (<code>glob</code>, <code>file</code> or <code>dir</code>).
More <a href="#examples"><code>examples</code></a></p><h4><span id="to"></span><code>to</code><a href="#to" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>String|Function</code>
Default: <code>compiler.options.output</code></p><h5><span id="string"></span>String<a href="#string" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p>Output path.</p><blockquote><p>⚠️ Don&#x27;t use directly <code>\\</code> in <code>to</code> (i.e <code>path\to\dest</code>) option because on UNIX the backslash is a valid character inside a path component, i.e., it&#x27;s not a separator.
On Windows, the forward slash and the backward slash are both separators.
Instead please use <code>/</code> or <code>path</code> methods.</p></blockquote><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;**/*&#x27;</span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">&#x27;relative/path/to/dest/&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;**/*&#x27;</span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">&#x27;/absolute/path/to/dest/&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;**/*&#x27;</span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">&#x27;[path][name].[contenthash][ext]&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h5><span id="function"></span>Function<a href="#function" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p>Allows to modify the writing path.</p><blockquote><p>⚠️ Don&#x27;t return directly <code>\\</code> in <code>to</code> (i.e <code>path\to\newFile</code>) option because on UNIX the backslash is a valid character inside a path component, i.e., it&#x27;s not a separator.
On Windows, the forward slash and the backward slash are both separators.
Instead please use <code>/</code> or <code>path</code> methods.</p></blockquote><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;src/*.png&#x27;</span><span class="token punctuation">,</span>
          <span class="token function">to</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> context<span class="token punctuation">,</span> absoluteFilename <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token string">&#x27;dest/newPath/[name][ext]&#x27;</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;src/*.png&#x27;</span><span class="token punctuation">,</span>
          <span class="token function">to</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> context<span class="token punctuation">,</span> absoluteFilename <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;dest/newPath/[name][ext]&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="context"></span><code>context</code><a href="#context" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>String</code>
Default: <code>options.context|compiler.options.context</code></p><p>A path that determines how to interpret the <code>from</code> path.</p><blockquote><p>⚠️ Don&#x27;t use directly <code>\\</code> in <code>context</code> (i.e <code>path\to\context</code>) option because on UNIX the backslash is a valid character inside a path component, i.e., it&#x27;s not a separator.
On Windows, the forward slash and the backward slash are both separators.
Instead please use <code>/</code> or <code>path</code> methods.</p></blockquote><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;src/*.txt&#x27;</span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">&#x27;dest/&#x27;</span><span class="token punctuation">,</span>
          context<span class="token operator">:</span> <span class="token string">&#x27;app/&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>The <code>context</code> option can be an absolute or relative path. If <code>context</code> is a relative, then it is converted to absolute based to <code>compiler.options.context</code></p><p>Also, <code>context</code> indicates how to interpret the search results. Further, he is considered in this role.</p><p>To determine the structure from which the found resources will be copied to the destination folder, the <code>context</code> option is used.</p><p>If <code>from</code> is a file, then <code>context</code> is equal to the directory in which this file is located. Accordingly, the result will be only the file name.</p><p>If <code>from</code> is a directory, then <code>context</code> is the same as <code>from</code> and is equal to the directory itself. In this case, the result will be a hierarchical structure of the found folders and files relative to the specified directory.</p><p>If <code>from</code> is a glob, then regardless of the <code>context</code> option, the result will be the structure specified in the <code>from</code> option</p><p>More <a href="#examples"><code>examples</code></a></p><h4><span id="globoptions"></span><code>globOptions</code><a href="#globoptions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>Object</code>
Default: <code>undefined</code></p><p>Allows to configure the glob pattern matching library used by the plugin. <a href="https://github.com/sindresorhus/globby#options">See the list of supported options</a>
To exclude files from the selection, you should use <a href="https://github.com/mrmlnc/fast-glob#ignore">globOptions.ignore option</a></p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;public/**/*&#x27;</span><span class="token punctuation">,</span>
          globOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
            dot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            gitignore<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            ignore<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;**/file.*&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;**/ignored-directory/**&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="filter"></span><code>filter</code><a href="#filter" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>Function</code>
Default: <code>undefined</code></p><blockquote><p>ℹ️ To ignore files by path please use the <a href="#globoptions"><code>globOptions.ignore</code></a> option.</p></blockquote><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;fs&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>promise<span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;public/**/*&#x27;</span><span class="token punctuation">,</span>
          <span class="token function-variable function">filter</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">resourcePath</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> fs<span class="token punctuation">.</span>promises<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>resourcePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> content <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>content <span class="token operator">===</span> <span class="token string">&#x27;my-custom-content&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="totype"></span><code>toType</code><a href="#totype" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>String</code>
Default: <code>undefined</code></p><p>Determinate what is <code>to</code> option - directory, file or template.
Sometimes it is hard to say what is <code>to</code>, example <code>path/to/dir-with.ext</code>.
If you want to copy files in directory you need use <code>dir</code> option.
We try to automatically determine the <code>type</code> so you most likely do not need this option.</p><table><thead><tr><th align="center">Name</th><th align="center">Type</th><th align="center">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center" data-th="Name"><span><strong><a href="#dir"><code>&#x27;dir&#x27;</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{String}</code></span></td><td align="center" data-th="Default"><span><code>undefined</code></span></td><td align="left" data-th="Description"><span>If <code>to</code> has no extension or ends on <code>&#x27;/&#x27;</code></span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#file"><code>&#x27;file&#x27;</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{String}</code></span></td><td align="center" data-th="Default"><span><code>undefined</code></span></td><td align="left" data-th="Description"><span>If <code>to</code> is not a directory and is not a template</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#template"><code>&#x27;template&#x27;</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{String}</code></span></td><td align="center" data-th="Default"><span><code>undefined</code></span></td><td align="left" data-th="Description"><span>If <code>to</code> contains <a href="/configuration/output/#template-strings">a template pattern</a></span></td></tr></tbody></table><h5><span id="dir"></span><code>&#x27;dir&#x27;</code><a href="#dir" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;path/to/file.txt&#x27;</span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">&#x27;directory/with/extension.ext&#x27;</span><span class="token punctuation">,</span>
          toType<span class="token operator">:</span> <span class="token string">&#x27;dir&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h5><span id="file"></span><code>&#x27;file&#x27;</code><a href="#file" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;path/to/file.txt&#x27;</span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">&#x27;file/without/extension&#x27;</span><span class="token punctuation">,</span>
          toType<span class="token operator">:</span> <span class="token string">&#x27;file&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h5><span id="template"></span><code>&#x27;template&#x27;</code><a href="#template" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;src/&#x27;</span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">&#x27;dest/[name].[contenthash][ext]&#x27;</span><span class="token punctuation">,</span>
          toType<span class="token operator">:</span> <span class="token string">&#x27;template&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="force"></span><code>force</code><a href="#force" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>Boolean</code>
Default: <code>false</code></p><p>Overwrites files already in <code>compilation.assets</code> (usually added by other plugins/loaders).</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;src/**/*&#x27;</span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">&#x27;dest/&#x27;</span><span class="token punctuation">,</span>
          force<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="priority"></span><code>priority</code><a href="#priority" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>Number</code>
Default: <code>0</code></p><p>Allows to specify the priority of copying files with the same destination name.
Files for patterns with higher priority will be copied later.
To overwrite files, the <a href="#force"><code>force</code></a> option must be enabled.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// Copied second and will overwrite &quot;dir_2/file.txt&quot;</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;dir_1/file.txt&#x27;</span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">&#x27;newfile.txt&#x27;</span><span class="token punctuation">,</span>
          force<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          priority<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// Copied first</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;dir_2/file.txt&#x27;</span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">&#x27;newfile.txt&#x27;</span><span class="token punctuation">,</span>
          priority<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="transform"></span><code>transform</code><a href="#transform" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>Function|Object</code>
Default: <code>undefined</code></p><p>Allows to modify the file contents.</p><h5><span id="Function"></span><code>Function</code><a href="#Function" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;src/*.png&#x27;</span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">&#x27;dest/&#x27;</span><span class="token punctuation">,</span>
          <span class="token comment">// The `content` argument is a [`Buffer`](https://nodejs.org/api/buffer.html) object, it could be converted to a `String` to be processed using `content.toString()`</span>
          <span class="token comment">// The `absoluteFrom` argument is a `String`, it is absolute path from where the file is being copied</span>
          <span class="token function">transform</span><span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> absoluteFrom</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">optimize</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h5><span id="_object"></span><code>Object</code><a href="#_object" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><table><thead><tr><th align="center">Name</th><th align="center">Type</th><th align="center">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center" data-th="Name"><span><strong><a href="#transformer"><code>transformer</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{Function}</code></span></td><td align="center" data-th="Default"><span><code>undefined</code></span></td><td align="left" data-th="Description"><span>Allows to modify the file contents.</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#cache"><code>cache</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{Boolean|Object}</code></span></td><td align="center" data-th="Default"><span><code>false</code></span></td><td align="left" data-th="Description"><span>Enable <code>transform</code> caching. You can use <code>transform: { cache: { key: &#x27;my-cache-key&#x27; } }</code> to invalidate the cache.</span></td></tr></tbody></table><h6><span id="transformer"></span><code>transformer</code><a href="#transformer" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h6><p>Type: <code>Function</code>
Default: <code>undefined</code></p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;src/*.png&#x27;</span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">&#x27;dest/&#x27;</span><span class="token punctuation">,</span>
          <span class="token comment">// The `content` argument is a [`Buffer`](https://nodejs.org/api/buffer.html) object, it could be converted to a `String` to be processed using `content.toString()`</span>
          <span class="token comment">// The `absoluteFrom` argument is a `String`, it is absolute path from where the file is being copied</span>
          transform<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token function">transformer</span><span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> absoluteFrom</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token function">optimize</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;src/*.png&#x27;</span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">&#x27;dest/&#x27;</span><span class="token punctuation">,</span>
          transform<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token function">transformer</span><span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token function">optimize</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h6><span id="cache"></span><code>cache</code><a href="#cache" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h6><p>Type: <code>Boolean|Object</code>
Default: <code>false</code></p><p><strong>webpack.config.js</strong></p><p>Enable/disable and configure caching.
Default path to cache directory: <code>node_modules/.cache/copy-webpack-plugin</code>.</p><h6><span id="boolean"></span><code>Boolean</code><a href="#boolean" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h6><p>Enables/Disable <code>transform</code> caching.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;src/*.png&#x27;</span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">&#x27;dest/&#x27;</span><span class="token punctuation">,</span>
          transform<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token function">transformer</span><span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token function">optimize</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            cache<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h5><span id="object"></span><code>Object</code><a href="#object" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p>Enables <code>transform</code> caching and setup cache directory and invalidation keys.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;src/*.png&#x27;</span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">&#x27;dest/&#x27;</span><span class="token punctuation">,</span>
          transform<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token function">transformer</span><span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token function">optimize</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            cache<span class="token operator">:</span> <span class="token punctuation">{</span>
              directory<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;cache-directory&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              keys<span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token comment">// May be useful for invalidating cache based on external values</span>
                <span class="token comment">// For example, you can invalid cache based on `process.version` - { node: process.version }</span>
                key<span class="token operator">:</span> <span class="token string">&#x27;value&#x27;</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>You can setup invalidation keys using a function.</p><p>Simple function:</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;src/*.png&#x27;</span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">&#x27;dest/&#x27;</span><span class="token punctuation">,</span>
          transform<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token function">transformer</span><span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token function">optimize</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            cache<span class="token operator">:</span> <span class="token punctuation">{</span>
              directory<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;cache-directory&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token function-variable function">keys</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">defaultCacheKeys<span class="token punctuation">,</span> absoluteFrom</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> keys <span class="token operator">=</span> <span class="token function">getCustomCacheInvalidationKeysSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token keyword">return</span> <span class="token punctuation">{</span>
                  <span class="token operator">...</span>defaultCacheKeys<span class="token punctuation">,</span>
                  keys<span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Async function:</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;src/*.png&#x27;</span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">&#x27;dest/&#x27;</span><span class="token punctuation">,</span>
          transform<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token function">transformer</span><span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token function">optimize</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            cache<span class="token operator">:</span> <span class="token punctuation">{</span>
              directory<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;cache-directory&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token function-variable function">keys</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">defaultCacheKeys<span class="token punctuation">,</span> absoluteFrom</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> keys <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getCustomCacheInvalidationKeysAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token keyword">return</span> <span class="token punctuation">{</span>
                  <span class="token operator">...</span>defaultCacheKeys<span class="token punctuation">,</span>
                  keys<span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="transformall"></span><code>transformAll</code><a href="#transformall" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>类型：<code>Function</code>
默认值：<code>undefined</code></p><p>允许你去更改多个文件的内容，并将结果保存到一个文件中。</p><blockquote><p>ℹ️ 必须指定 <code>to</code> 配置项为一个文件。只允许使用 <code>[contenthash]</code> 与 <code>[fullhash]</code> 模板字符串。</p></blockquote><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;src/**/*.txt&#x27;</span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">&#x27;dest/file.txt&#x27;</span><span class="token punctuation">,</span>
          <span class="token comment">// `assets` 参数是一个符合 pattern.from (&quot;src/**/*.txt&quot;) 静态资源数组。</span>
          <span class="token function">transformAll</span><span class="token punctuation">(</span><span class="token parameter">assets</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> result <span class="token operator">=</span> assets<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">accumulator<span class="token punctuation">,</span> asset</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token comment">// 静态资源内容可以使用 `source` 方法从 `asset.source` 中获取。</span>
              <span class="token comment">// 静态资源内容是一个 [`Buffer`](https://nodejs.org/api/buffer.html) 对象，可以使用 `content.toString()` 将其转为 `String`</span>
              <span class="token keyword">const</span> content <span class="token operator">=</span> asset<span class="token punctuation">.</span>data<span class="token punctuation">;</span>

              accumulator <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>accumulator<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>content<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
              <span class="token keyword">return</span> accumulator<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> result<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="noerroronmissing"></span><code>noErrorOnMissing</code><a href="#noerroronmissing" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Type: <code>Boolean</code>
Default: <code>false</code></p><p>Doesn&#x27;t generate an error on missing file(s).</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;missing-file.txt&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          noErrorOnMissing<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="info"></span><code>info</code><a href="#info" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>Object|Function&lt;Object&gt;</code>
Default: <code>undefined</code></p><p>Allows to add assets info.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&#x27;relative/path/to/file.ext&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;**/*&#x27;</span><span class="token punctuation">,</span>
          <span class="token comment">// Terser skip this file for minimization</span>
          info<span class="token operator">:</span> <span class="token punctuation">{</span> minimized<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&#x27;relative/path/to/file.ext&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;**/*&#x27;</span><span class="token punctuation">,</span>
          <span class="token comment">// Terser skip this file for minimization</span>
          <span class="token function-variable function">info</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> minimized<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="options"></span>Options<a href="#options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><table><thead><tr><th align="center">Name</th><th align="center">Type</th><th align="center">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center" data-th="Name"><span><a href="#concurrency"><code>concurrency</code></a></span></td><td align="center" data-th="Type"><span><code>{Number}</code></span></td><td align="center" data-th="Default"><span><code>100</code></span></td><td align="left" data-th="Description"><span>Limits the number of simultaneous requests to fs</span></td></tr></tbody></table><h4><span id="concurrency"></span><code>concurrency</code><a href="#concurrency" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>limits the number of simultaneous requests to fs</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>patterns<span class="token punctuation">]</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">{</span> concurrency<span class="token operator">:</span> <span class="token number">50</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="examples"></span>Examples<a href="#examples" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><h4><span id="different-variants-from-glob-file-or-dir"></span>Different variants <code>from</code> (<code>glob</code>, <code>file</code> or <code>dir</code>).<a href="#different-variants-from-glob-file-or-dir" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Take for example the following file structure:</p><pre><code class="hljs language-js">src <span class="token operator">/</span> directory <span class="token operator">-</span> nested <span class="token operator">/</span> deep <span class="token operator">-</span> nested <span class="token operator">/</span> deepnested <span class="token operator">-</span> file<span class="token punctuation">.</span>txt<span class="token punctuation">;</span>
src <span class="token operator">/</span> directory <span class="token operator">-</span> nested <span class="token operator">/</span> nested <span class="token operator">-</span> file<span class="token punctuation">.</span>txt<span class="token punctuation">;</span></code></pre><h5><span id="from-is-a-glob"></span>From is a Glob<a href="#from-is-a-glob" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p>Everything that you specify in <code>from</code> will be included in the result:</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;src/directory-nested/**/*&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Result:</p><pre><code class="hljs language-txt">src/directory-nested/deep-nested/deepnested-file.txt,
src/directory-nested/nested-file.txt
</code></pre><p>If you want only content <code>src/directory-nested/</code>, you should only indicate <code>glob</code> in <code>from</code>. The path to the folder in which the search should take place, should be moved to <code>context</code>.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;**/*&#x27;</span><span class="token punctuation">,</span>
          context<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;src&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;directory-nested&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Result:</p><pre><code class="hljs language-txt">deep-nested/deepnested-file.txt,
nested-file.txt
</code></pre><h5><span id="from-is-a-dir"></span>From is a Dir<a href="#from-is-a-dir" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;src&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;directory-nested&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Result:</p><pre><code class="hljs language-txt">deep-nested/deepnested-file.txt,
nested-file.txt
</code></pre><p>Technically, this is <code>**/*</code> with a predefined context equal to the specified directory.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;**/*&#x27;</span><span class="token punctuation">,</span>
          context<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;src&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;directory-nested&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Result:</p><pre><code class="hljs language-txt">deep-nested/deepnested-file.txt,
nested-file.txt
</code></pre><h5><span id="from-is-a-file"></span>From is a File<a href="#from-is-a-file" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>
            __dirname<span class="token punctuation">,</span>
            <span class="token string">&#x27;src&#x27;</span><span class="token punctuation">,</span>
            <span class="token string">&#x27;directory-nested&#x27;</span><span class="token punctuation">,</span>
            <span class="token string">&#x27;nested-file.txt&#x27;</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Result:</p><pre><code class="hljs language-txt">nested-file.txt
</code></pre><p>Technically, this is a filename with a predefined context equal to <code>path.dirname(pathToFile)</code>.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;nested-file.txt&#x27;</span><span class="token punctuation">,</span>
          context<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;src&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;directory-nested&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Result:</p><pre><code class="hljs language-txt">nested-file.txt
</code></pre><h4><span id="ignoring-files"></span>Ignoring files<a href="#ignoring-files" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> path<span class="token punctuation">.</span>posix<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>
            path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;src&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\\/g</span><span class="token punctuation">,</span> <span class="token string">&#x27;/&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string">&#x27;**/*&#x27;</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
          globOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
            ignore<span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token comment">// Ignore all `txt` files</span>
              <span class="token string">&#x27;**/*.txt&#x27;</span><span class="token punctuation">,</span>
              <span class="token comment">// Ignore all files in all subdirectories</span>
              <span class="token string">&#x27;**/subdir/**&#x27;</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="flatten-copy"></span>Flatten copy<a href="#flatten-copy" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Removes all directory references and only copies file names.</p><blockquote><p>⚠️ If files have the same name, the result is non-deterministic.</p></blockquote><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;src/**/*&#x27;</span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">&#x27;[name][ext]&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Result:</p><pre><code class="hljs language-txt">file-1.txt
file-2.txt
nested-file.txt
</code></pre><h4><span id="copy-in-new-directory"></span>Copy in new directory<a href="#copy-in-new-directory" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token comment">// When copying files starting with a dot, must specify the toType option</span>
          <span class="token comment">// toType: &quot;file&quot;,</span>
          <span class="token function">to</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> context<span class="token punctuation">,</span> absoluteFilename <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">newdirectory/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>path<span class="token punctuation">.</span><span class="token function">relative</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> absoluteFilename<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;directory&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Result:</p><pre><code class="hljs language-txt">&quot;newdirectory/file-1.txt&quot;,
&quot;newdirectory/nestedfile.txt&quot;,
&quot;newdirectory/nested/deep-nested/deepnested.txt&quot;,
&quot;newdirectory/nested/nestedfile.txt&quot;,
</code></pre><h4><span id="Skip-running-JavaScript-files-through-a-minimizer-skiprunningjavaScriptfilesthroughaminimizer"></span>Skip running JavaScript files through a minimizer $#skiprunningjavaScriptfilesthroughaminimizer$<a href="#Skip-running-JavaScript-files-through-a-minimizer-skiprunningjavaScriptfilesthroughaminimizer" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Useful if you need to simply copy <code>*.js</code> files to destination &quot;as is&quot; without evaluating and minimizing them using Terser.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&#x27;relative/path/to/file.ext&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;**/*&#x27;</span><span class="token punctuation">,</span>
          <span class="token comment">// Terser skip this file for minimization</span>
          info<span class="token operator">:</span> <span class="token punctuation">{</span> minimized<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h5><span id="yarnworkspacesandmonorepos"></span><code>yarn workspaces</code> and <code>monorepos</code><a href="#yarnworkspacesandmonorepos" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p>当时用 <code>yarn workspaces</code> 或者 <code>monorepos</code> 时，由于包提升方式不同，node_modules 的相对复制路径可能会失效。
为了避免这种情况，请使用 <code>require.resolve</code> 指定复制路径。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>
            require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>moduleName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/package.json</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
          <span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/target</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">&#x27;target&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="contributing"></span>Contributing<a href="#contributing" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>Please take a moment to read our contributing guidelines if you haven&#x27;t yet done so.</p><p><a href="https://github.com/webpack-contrib/copy-webpack-plugin/blob/master/.github/CONTRIBUTING.md">CONTRIBUTING</a></p><h2><span id="license"></span>License<a href="#license" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><a href="https://github.com/webpack-contrib/copy-webpack-plugin/blob/master/LICENSE">MIT</a></p><h1><span id="CssMinimizerWebpackPlugin"></span>CssMinimizerWebpackPlugin<a href="#CssMinimizerWebpackPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<div align="center"></div><p><a href="https://npmjs.com/package/css-minimizer-webpack-plugin"><img src="https://img.shields.io/npm/v/css-minimizer-webpack-plugin.svg" alt="npm"/></a>
<a href="https://nodejs.org"><img src="https://img.shields.io/node/v/css-minimizer-webpack-plugin.svg" alt="node"/></a>
<a href="https://david-dm.org/webpack-contrib/css-minimizer-webpack-plugin"><img src="https://david-dm.org/webpack-contrib/css-minimizer-webpack-plugin.svg" alt="deps"/></a>
<a href="https://github.com/webpack-contrib/css-minimizer-webpack-plugin/actions"><img src="https://github.com/webpack-contrib/css-minimizer-webpack-plugin/workflows/css-minimizer-webpack-plugin/badge.svg" alt="tests"/></a>
<a href="https://codecov.io/gh/webpack-contrib/css-minimizer-webpack-plugin"><img src="https://codecov.io/gh/webpack-contrib/css-minimizer-webpack-plugin/branch/master/graph/badge.svg" alt="cover"/></a>
<a href="https://gitter.im/webpack/webpack"><img src="https://img.shields.io/badge/gitter-webpack%2Fwebpack-brightgreen.svg" alt="chat"/></a>
<a href="https://packagephobia.now.sh/result?p=css-minimizer-webpack-plugin"><img src="https://packagephobia.now.sh/badge?p=css-minimizer-webpack-plugin" alt="size"/></a></p><p>这个插件使用 <a href="https://cssnano.co/">cssnano</a> 优化和压缩 CSS。</p><p>就像 <a href="https://github.com/NMFR/optimize-css-assets-webpack-plugin">optimize-css-assets-webpack-plugin</a> 一样，但在 source maps 和 assets 中使用查询字符串会更加准确，支持缓存和并发模式下运行。</p><h2><span id="getting-started"></span>起步<a href="#getting-started" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>首先，你需要安装 <code>css-minimizer-webpack-plugin</code>：</p><pre><code class="hljs language-console">npm install css-minimizer-webpack-plugin --save-dev
</code></pre><p>接着在 <code>webpack</code> 配置中加入该插件。示例：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;mini-css-extract-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> CssMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;css-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/.s?css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&#x27;css-loader&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;sass-loader&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// 在 webpack@5 中，你可以使用 `...` 语法来扩展现有的 minimizer（即 `terser-webpack-plugin`），将下一行取消注释</span>
      <span class="token comment">// `...`,</span>
      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>这将仅在生产环境开启 CSS 优化。</p><p>如果还想在开发环境下启用 CSS 优化，请将 <code>optimization.minimize</code> 设置为 <code>true</code>:</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token comment">// [...]</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// [...]</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>然后通过你喜欢的方式运行 <code>webpack</code>。</p><h2><span id="note-about-source-maps"></span>关于 source maps 的提示<a href="#note-about-source-maps" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><strong>仅对 <a href="/configuration/devtool/"><code>devtool</code></a> 配置项的 <code>source-map</code>、<code>inline-source-map</code>、<code>hidden-source-map</code> 与 <code>nosources-source-map</code> 值生效。</strong></p><p>为什么呢？因为 CSS 仅支持这些 source map 类型。</p><p>插件支持 <a href="/configuration/devtool/"><code>devtool</code></a> 并且使用 <code>SourceMapDevToolPlugin</code> 插件。
使用受支持的 <code>devtool</code> 值可以启用 source map 生成。
使用 <code>SourceMapDevToolPlugin</code> 并启用 <code>columns</code> 配置项可以启用 source map 生成。</p><p>使用 source map 将错误信息位置映射到 modules 中（这降低了复杂度）。
如果你是用自定义 <code>minify</code> 函数，请阅读 <code>minify</code> 章节以确保正确处理 source map。</p><h2><span id="options"></span>选项<a href="#options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><table><thead><tr><th align="center">选项名</th><th align="center">类型</th><th align="center">默认值</th><th align="left">描述</th></tr></thead><tbody><tr><td align="center" data-th="选项名"><span><strong><a href="#test"><code>test</code></a></strong></span></td><td align="center" data-th="类型"><span><code>String|RegExp|Array&lt;String|RegExp&gt;</code></span></td><td align="center" data-th="默认值"><span><code>/\.css(\?.*)?$/i</code></span></td><td align="left" data-th="描述"><span>匹配要处理的文件</span></td></tr><tr><td align="center" data-th="选项名"><span><strong><a href="#include"><code>include</code></a></strong></span></td><td align="center" data-th="类型"><span><code>String|RegExp|Array&lt;String|RegExp&gt;</code></span></td><td align="center" data-th="默认值"><span><code>undefined</code></span></td><td align="left" data-th="描述"><span>要引入的文件</span></td></tr><tr><td align="center" data-th="选项名"><span><strong><a href="#exclude"><code>exclude</code></a></strong></span></td><td align="center" data-th="类型"><span><code>String|RegExp|Array&lt;String|RegExp&gt;</code></span></td><td align="center" data-th="默认值"><span><code>undefined</code></span></td><td align="left" data-th="描述"><span>要排除的文件</span></td></tr><tr><td align="center" data-th="选项名"><span><strong><a href="#parallel"><code>parallel</code></a></strong></span></td><td align="center" data-th="类型"><span><code>Boolean|Number</code></span></td><td align="center" data-th="默认值"><span><code>true</code></span></td><td align="left" data-th="描述"><span>启用/禁用多进程并行处理。</span></td></tr><tr><td align="center" data-th="选项名"><span><strong><a href="#minify"><code>minify</code></a></strong></span></td><td align="center" data-th="类型"><span><code>Function|Array&lt;Function&gt;</code></span></td><td align="center" data-th="默认值"><span><code>CssMinimizerPlugin.cssnanoMinify</code></span></td><td align="left" data-th="描述"><span>允许覆盖默认的 minify 函数。</span></td></tr><tr><td align="center" data-th="选项名"><span><strong><a href="#minimizeroptions"><code>minimizerOptions</code></a></strong></span></td><td align="center" data-th="类型"><span><code>Object|Array&lt;Object&gt;</code></span></td><td align="center" data-th="默认值"><span><code>{ preset: &#x27;default&#x27; }</code></span></td><td align="left" data-th="描述"><span>Cssnano 优化 <a href="https://cssnano.co/docs/optimisations">配置项</a>。</span></td></tr><tr><td align="center" data-th="选项名"><span><strong><a href="#warningsfilter"><code>warningsFilter</code></a></strong></span></td><td align="center" data-th="类型"><span><code>Function&lt;(warning, file, source) -&gt; Boolean&gt;</code></span></td><td align="center" data-th="默认值"><span><code>() =&gt; true</code></span></td><td align="left" data-th="描述"><span>允许过滤掉 css-minimizer 的警告。</span></td></tr></tbody></table><h3><span id="test"></span><code>test</code><a href="#test" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>类型：<code>String|RegExp|Array&lt;String|RegExp&gt;</code> - 默认值：<code>/\.css(\?.*)?$/i</code></p><p>用来匹配文件。</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.foo\.css$/i</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="include"></span><code>include</code><a href="#include" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>类型：<code>String|RegExp|Array&lt;String|RegExp&gt;</code>
默认值：<code>undefined</code></p><p>要包含的文件。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        include<span class="token operator">:</span> <span class="token regex">/\/includes/</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="exclude"></span><code>exclude</code><a href="#exclude" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>类型：<code>String|RegExp|Array&lt;String|RegExp&gt;</code>
默认值：<code>undefined</code></p><p>要排除的文件。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        exclude<span class="token operator">:</span> <span class="token regex">/\/excludes/</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="parallel"></span><code>parallel</code><a href="#parallel" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>类型：<code>Boolean|Number</code>
默认值：<code>true</code></p><p>使用多进程并发执行，提升构建速度。
运行时默认的并发数：<code>os.cpus().length - 1</code>。</p><blockquote><p>ℹ️ 并行化可以显著提升构建速度，所以<strong>强烈建议</strong>使用。
如果启用了并行化，<code>minimizerOptions</code> 中的包必须通过字符串引入（<code>packageName</code> 或者 <code>require.resolve(packageName)</code>）。在 <a href="#minimizeroptions"><code>minimizerOptions</code></a> 获取更多详细信息。</p></blockquote><h4><span id="boolean"></span><code>Boolean</code><a href="#boolean" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>启用/禁用多进程并发执行。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        parallel<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="number"></span><code>Number</code><a href="#number" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>启用多进程并发执行且设置并发数。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        parallel<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="minify"></span><code>minify</code><a href="#minify" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>类型：<code>Function|Array&lt;Function&gt;</code>
默认值：<code>CssMinimizerPlugin.cssnanoMinify</code></p><p>允许覆盖默认的 minify 函数。
默认情况下，插件使用 <a href="https://github.com/cssnano/cssnano">cssnano</a> 包。
对于使用和测试未发布或版本衍生版本很有用。</p><p>可选配置：</p><ul><li>CssMinimizerPlugin.cssnanoMinify</li><li>CssMinimizerPlugin.cssoMinify</li><li>CssMinimizerPlugin.cleanCssMinify</li><li>CssMinimizerPlugin.esbuildMinify</li><li><code>async (data, inputMap, minimizerOptions) =&gt; {return {code: &quot;a{color: red}&quot;, map: &quot;...&quot;, warnings: [], errors: []}}</code></li></ul><blockquote><p>⚠️ <strong>启用 <code>parallel</code> 选项时，始终在 <code>minify</code> 函数中使用 <code>require</code></strong>。</p></blockquote><h4><span id="function"></span><code>Function</code><a href="#function" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
          level<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token number">1</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              roundingPrecision<span class="token operator">:</span> <span class="token string">&#x27;all=3,px=5&#x27;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        minify<span class="token operator">:</span> CssMinimizerPlugin<span class="token punctuation">.</span>cleanCssMinify<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="array"></span><code>Array</code><a href="#array" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>如果 <code>minify</code> 配置项传入一个数组，<code>minimizerOptions</code> 也必须是个数组。
<code>miniify</code> 数组中的函数索引对应于 <code>minimizerOptions</code> 数组中具有相同索引的 options 对象。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        minimizerOptions<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 第一个函数的配置项（CssMinimizerPlugin.cssnanoMinify）</span>
          <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 第二个函数的配置项（CssMinimizerPlugin.cleanCssMinify）</span>
          <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 第三个函数的配置项</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        minify<span class="token operator">:</span> <span class="token punctuation">[</span>
          CssMinimizerPlugin<span class="token punctuation">.</span>cssnanoMinify<span class="token punctuation">,</span>
          CssMinimizerPlugin<span class="token punctuation">.</span>cleanCssMinify<span class="token punctuation">,</span>
          <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> inputMap<span class="token punctuation">,</span> minimizerOptions</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// To do something</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
              code<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">a{color: red}</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
              map<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{&quot;version&quot;: &quot;3&quot;, ...}</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
              warnings<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              errors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="minimizeroptions"></span><code>minimizerOptions</code><a href="#minimizeroptions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>类型：<code>Object|Array&lt;Object&gt;</code>
默认值：<code>{ preset: &#x27;default&#x27; }</code></p><p>Cssnano 优化 <a href="https://cssnano.co/docs/optimisations">选项</a>.</p><h4><span id="object"></span><code>Object</code><a href="#object" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
          preset<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&#x27;default&#x27;</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              discardComments<span class="token operator">:</span> <span class="token punctuation">{</span> removeAll<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="array"></span><code>Array</code><a href="#array" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><code>miniify</code> 数组中的函数索引对应于 <code>minimizerOptions</code> 数组中具有相同索引的 options 对象。
如果你使用了类似于 <code>minimizerOptions</code> 的对象，那么所有函数都会接受它。</p><blockquote><p>如果启用了并行化，<code>minimizerOptions</code> 中的包必须通过字符串引入（<code>packageName</code> 或者 <code>require.resolve(packageName)</code>）。在这种情况下，我们不应该使用 <code>require</code>/<code>import</code>。</p></blockquote><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
          preset<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;cssnano-preset-simple&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h5><span id="processoroptions"></span><code>processorOptions</code> (⚠ only cssnano)<a href="#processoroptions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p>类型：<code>Object</code>
默认值：<code>{ from: assetName }</code></p><p>允许配置 cssnano 的 <a href="https://postcss.org/api/#processoptions"><code>processoptions</code></a> 配置项。
<code>parser</code>、<code> stringifier</code> 和 <code>syntax</code> 可以是一个函数，也可以是一个字符串，用来表示将会被导出的模块。</p><blockquote><p>⚠️ <strong>如果传入一个函数，则必须禁用<code>parallel</code> 配置项。</strong>.</p></blockquote><pre><code class="hljs language-js"><span class="token keyword">import</span> sugarss <span class="token keyword">from</span> <span class="token string">&#x27;sugarss&#x27;</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        parallel<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
          processorOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
            parser<span class="token operator">:</span> sugarss<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
          processorOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
            parser<span class="token operator">:</span> <span class="token string">&#x27;sugarss&#x27;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="warningsfilter"></span><code>warningsFilter</code><a href="#warningsfilter" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>类型：<code>Function&lt;(warning, file, source) -&gt; Boolean&gt;</code>
默认值：<code>() =&gt; true</code></p><p>允许过滤 css-minimizer warnings（默认使用 <a href="https://github.com/cssnano/cssnano">cssnano</a>）。
返回 <code>true</code> 将保留 warning，否则返回假值（<code>false</code>/<code>null</code>/<code>undefined</code>）。</p><blockquote><p>⚠️ 如果没有使用 source maps，<code>source</code> 参数将包含 <code>undefined</code>。</p></blockquote><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token function-variable function">warningsFilter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">warning<span class="token punctuation">,</span> file<span class="token punctuation">,</span> source</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/Dropping unreachable code/i</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>warning<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/file\.css/i</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/source\.css/i</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="examples"></span>示例<a href="#examples" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><h3><span id="use-sourcemaps"></span>使用 sourcemaps<a href="#use-sourcemaps" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>不要忘记为所有 loader 启用 <code>sourceMap</code> 选项。</p><pre><code class="hljs language-js"><span class="token keyword">const</span> CssMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;css-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  devtool<span class="token operator">:</span> <span class="token string">&#x27;source-map&#x27;</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    loaders<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/.s?css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">&#x27;css-loader&#x27;</span><span class="token punctuation">,</span> options<span class="token operator">:</span> <span class="token punctuation">{</span> sourceMap<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">&#x27;sass-loader&#x27;</span><span class="token punctuation">,</span> options<span class="token operator">:</span> <span class="token punctuation">{</span> sourceMap<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="remove-all-comments"></span>移除所有注释<a href="#remove-all-comments" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>移除所有注释（包括以 <code>/*!</code> 开头的注释）。</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
          preset<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&#x27;default&#x27;</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              discardComments<span class="token operator">:</span> <span class="token punctuation">{</span> removeAll<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="using-custom-minifier-cssohttpsgithubcomcsscsso"></span>使用自定义 minifier <a href="https://github.com/css/csso">csso</a><a href="#using-custom-minifier-cssohttpsgithubcomcsscsso" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  devtool<span class="token operator">:</span> <span class="token string">&#x27;source-map&#x27;</span><span class="token punctuation">,</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        minify<span class="token operator">:</span> CssMinimizerPlugin<span class="token punctuation">.</span>cssoMinify<span class="token punctuation">,</span>
        <span class="token comment">// Uncomment this line for options</span>
        <span class="token comment">// minimizerOptions: { restructure: false },</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="using-custom-minifier-clean-css"></span>使用自定义 minifier <a href="https://github.com/jakubpawlowicz/clean-css">clean-css</a><a href="#using-custom-minifier-clean-css" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  devtool<span class="token operator">:</span> <span class="token string">&#x27;source-map&#x27;</span><span class="token punctuation">,</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        minify<span class="token operator">:</span> CssMinimizerPlugin<span class="token punctuation">.</span>cleanCssMinify<span class="token punctuation">,</span>
        <span class="token comment">// Uncomment this line for options</span>
        <span class="token comment">// minimizerOptions: { compatibility: &#x27;ie11,-properties.merging&#x27; },</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="Using-custom-minifier-esbuild"></span>Using custom minifier <a href="https://github.com/evanw/esbuild">esbuild</a><a href="#Using-custom-minifier-esbuild" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  devtool<span class="token operator">:</span> <span class="token string">&#x27;source-map&#x27;</span><span class="token punctuation">,</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        minify<span class="token operator">:</span> CssMinimizerPlugin<span class="token punctuation">.</span>esbuildMinify<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="contributing"></span>贡献<a href="#contributing" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>如果你还没有阅读，请花一点时间阅读我们的贡献指南。</p><p><a href="https://github.com/webpack-contrib/css-minimizer-webpack-plugin/blob/master/.github/CONTRIBUTING.md">CONTRIBUTING</a></p><h2><span id="license"></span>License<a href="#license" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><a href="https://github.com/webpack-contrib/css-minimizer-webpack-plugin/blob/master/LICENSE">MIT</a></p><h1><span id="DefinePlugin"></span>DefinePlugin<a href="#DefinePlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p><code>DefinePlugin</code> 允许在 <strong>编译时</strong> 将你代码中的变量替换为其他值或表达式。这在需要根据开发模式与生产模式进行不同的操作时，非常有用。例如，如果想在开发构建中进行日志记录，而不在生产构建中进行，就可以定义一个全局常量去判断是否记录日志。这就是 <code>DefinePlugin</code> 的发光之处，设置好它，就可以忘掉开发环境和生产环境的构建规则。</p><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 定义...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="usage"></span>Usage<a href="#usage" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>传递给 <code>DefinePlugin</code> 的每个键都是一个标识符或多个以 <code>.</code> 连接的标识符。</p><ul><li>如果该值为字符串，它将被作为代码片段来使用。</li><li>如果该值不是字符串，则将被转换成字符串（包括函数方法）。</li><li>如果值是一个对象，则它所有的键将使用相同方法定义。</li><li>如果键添加 <code>typeof</code> 作为前缀，它会被定义为 typeof 调用。</li></ul><p>这些值将内联到代码中，从而允许通过代码压缩来删除冗余的条件判断。</p><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token constant">PRODUCTION</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token constant">VERSION</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">&#x27;5fa3b9&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token constant">BROWSER_SUPPORTS_HTML5</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token constant">TWO</span><span class="token operator">:</span> <span class="token string">&#x27;1+1&#x27;</span><span class="token punctuation">,</span>
  <span class="token string">&#x27;typeof window&#x27;</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">&#x27;object&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string">&#x27;process.env.NODE_ENV&#x27;</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre><code class="hljs language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Running App version &#x27;</span> <span class="token operator">+</span> <span class="token constant">VERSION</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token constant">BROWSER_SUPPORTS_HTML5</span><span class="token punctuation">)</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;html5shiv&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p>在为 <code>process</code> 定义值时，<code>&#x27;process.env.NODE_ENV&#x27;: JSON.stringify(&#x27;production&#x27;)</code> 会比 <code>process: { env: { NODE_ENV: JSON.stringify(&#x27;production&#x27;) } }</code> 更好，后者会覆盖 <code>process</code> 对象，这可能会破坏与某些模块的兼容性，因为这些模块会在 process 对象上定义其他值。</p></aside><aside class="tip"><h6 class="tip__prefix">提示</h6><p>请注意，由于本插件会直接替换文本，因此提供的值必须在字符串本身中再包含一个 <strong>实际的引号</strong> 。通常，可以使用类似 <code>&#x27;&quot;production&quot;&#x27;</code> 这样的替换引号，或者直接用 <code>JSON.stringify(&#x27;production&#x27;)</code>。</p></aside><pre><code class="hljs language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token constant">PRODUCTION</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Debug info&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">PRODUCTION</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Production log&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>未经 webpack 压缩过的代码：</p><pre><code class="hljs language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Debug info&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Production log&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>经过压缩后：</p><pre><code class="hljs language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Production log&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="feature-flags"></span>Feature Flags<a href="#feature-flags" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>使用 <a href="https://en.wikipedia.org/wiki/Feature_toggle">feature flags</a> 在生产/开发构建中可以启用/禁用项目的不同特性。</p><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token constant">NICE_FEATURE</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token constant">EXPERIMENTAL_FEATURE</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="service-urls"></span>Service URL<a href="#service-urls" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>在生产或开发构建中使用不同的服务 URL：</p><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token constant">SERVICE_URL</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">&#x27;https://dev.example.com&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="runtime-values-via-runtimevalue"></span>Runtime values via <code>runtimeValue</code><a href="#runtime-values-via-runtimevalue" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>function (getterFunction, [string] | true | object) =&gt; getterFunction()</code></p><p>It is possible to define variables with values that rely on files and will be re-evaluated when such files change in the file system. This means webpack will rebuild when such watched files change.</p><p>There&#x27;re two arguments for <code>webpack.DefinePlugin.runtimeValue</code> function:</p><ul><li><p>The first argument is a <code>function(module, key, version)</code> that should return the value to be assigned to the definition.</p></li><li><p>The second argument could either be an array of file paths to watch for or a <code>true</code> to flag the module as uncacheable. Since 5.26.0, it can also take an object argument with the following properties:</p><ul><li><code>fileDependencies?: string[]</code> A list of files the function depends on.</li><li><code>contextDependencies?: string[]</code> A list of directories the function depends on.</li><li><code>missingDependencies?: string[]</code> A list of not existing files the function depends on.</li><li><code>buildDependencies?: string[]</code> A list of build dependencies the function depends on.</li><li><code>version?: string | () =&gt; string</code> A version of the function.</li></ul></li></ul><pre><code class="hljs language-javascript"><span class="token keyword">const</span> fileDep <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;sample.txt&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token constant">BUILT_AT</span><span class="token operator">:</span> webpack<span class="token punctuation">.</span>DefinePlugin<span class="token punctuation">.</span><span class="token function">runtimeValue</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span>now<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    fileDependencies<span class="token operator">:</span> <span class="token punctuation">[</span>fileDep<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The value of <code>BUILT_AT</code> would be the time at which the <code>&#x27;sample.txt&#x27;</code> was last updated in the file system, e.g. <code>1597953013291</code>.</p><h1><span id="DllPlugin"></span>DllPlugin<a href="#DllPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p><code>DllPlugin</code> 和 <code>DllReferencePlugin</code> 用某种方法实现了拆分 bundles，同时还大幅度提升了构建的速度。&quot;DLL&quot; 一词代表微软最初引入的动态链接库。</p><h2><span id="dllplugin"></span>DllPlugin<a href="#dllplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>此插件用于在单独的 webpack 配置中创建一个 dll-only-bundle。 此插件会生成一个名为 <code>manifest.json</code> 的文件，这个文件是用于让 <a href="#dllreferenceplugin"><code>DllReferencePlugin</code></a> 能够映射到相应的依赖上。</p><ul><li><code>context</code>（可选）： manifest 文件中请求的 context (默认值为 webpack 的 context)</li><li><code>format</code> (boolean = false)：如果为 <code>true</code>，则 manifest json 文件 (输出文件) 将被格式化。</li><li><code>name</code>：暴露出的 DLL 的函数名（<a href="https://github.com/webpack/webpack/blob/master/lib/TemplatedPathPlugin.js">TemplatePaths</a>：<code>[fullhash]</code> &amp; <code>[name]</code> ）</li><li><code>path</code>：manifest.json 文件的 <strong>绝对路径</strong>（输出文件）</li><li><code>entryOnly</code> (boolean = true)：如果为 <code>true</code>，则仅暴露入口</li><li><code>type</code>：dll bundle 的类型</li></ul><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllPlugin</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p>我们建议 DllPlugin 只在 <code>entryOnly: true</code> 时使用，否则 DLL 中的 tree shaking 将无法工作，因为所有 exports 均可使用。</p></aside><p>在给定的 <code>path</code> 路径下创建一个 <code>manifest.json</code> 文件。这个文件包含了从 require 和 import 中 request 到模块 id 的映射。 <code>DllReferencePlugin</code> 也会用到这个文件。</p><p>此插件与 <a href="/configuration/output/#outputlibrary"><code>output.library</code></a> 的选项相结合可以暴露出（也称为放入全局作用域）dll 函数。</p><h2><span id="dllreferenceplugin"></span>DllReferencePlugin<a href="#dllreferenceplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>此插件配置在 webpack 的主配置文件中，此插件会把 dll-only-bundles 引用到需要的预编译的依赖中。</p><ul><li><code>context</code>：（<strong>绝对路径</strong>） manifest (或者是内容属性)中请求的上下文</li><li><code>extensions</code>：用于解析 dll bundle 中模块的扩展名 (仅在使用 &#x27;scope&#x27; 时使用)。</li><li><code>manifest</code> ：包含 <code>content</code> 和 <code>name</code> 的对象，或者是一个字符串 —— 编译时用于加载 JSON manifest 的绝对路径</li><li><code>content</code> (可选)： 请求到模块 id 的映射（默认值为 <code>manifest.content</code>）</li><li><code>name</code> (可选)：dll 暴露地方的名称（默认值为 <code>manifest.name</code>）（可参考<a href="/configuration/externals/"><code>externals</code></a>）</li><li><code>scope</code> (可选)：dll 中内容的前缀</li><li><code>sourceType</code> (可选)：dll 是如何暴露的 (<a href="/configuration/output/#outputlibrarytarget">libraryTarget</a>)</li></ul><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllReferencePlugin</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>通过引用 dll 的 manifest 文件来把依赖的名称映射到模块的 id 上，之后再在需要的时候通过内置的 <code>__webpack_require__</code> 函数来 <code>require</code> 对应的模块</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p>保持 <code>name</code> 与 <a href="/configuration/output/#outputlibrary"><code>output.library</code></a> 一致。</p></aside><h3><span id="modes"></span>模式(Modes)<a href="#modes" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>这个插件支持两种模式，分别是作用域（<em>scoped</em>）和映射（<em>mapped</em>）。</p><h4><span id="scoped-mode"></span>Scoped Mode<a href="#scoped-mode" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>dll 中的内容可以使用模块前缀的方式引用，举例来说，设置 <code>scope = &#x27;xyz&#x27;</code>，这个 dll 中的名为 <code>abc</code> 的文件可以通过 <code>require(&#x27;xyz/abc&#x27;)</code> 来获取。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p><a href="https://github.com/webpack/webpack/tree/master/examples/dll-user">查看 scope 的使用示例</a></p></aside><h4><span id="mapped-mode"></span>Mapped Mode<a href="#mapped-mode" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>dll 中的内容会被映射到当前目录下。如果被 <code>require</code> 的文件与 dll 中的某个文件匹配（解析之后），那么这个 dll 中的文件就会被使用。</p><p>由于这是在解析了 dll 中每个文件之后才触发的，因此相同的路径必须能够确保这个 dll bundle 的使用者（不一定是人，可指某些代码）有权限访问。 举例来说， 假如一个 dll bundle 中含有 <code>loadash</code> 库以及文件 <code>abc</code>， 那么 <code>require(&quot;lodash&quot;)</code> 和 <code>require(&quot;./abc&quot;)</code> 都不会被编译进主 bundle 文件中，而是会被 dll 所使用。</p><h2><span id="usage"></span>用法(Usage)<a href="#usage" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><aside class="warning"><h6 class="warning__prefix">警告</h6><p><code>DllReferencePlugin</code> 和 <code>DllPlugin</code> 都是在 <em>单独的</em> webpack 配置中使用的。</p></aside><p><strong>webpack.vendor.config.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  context<span class="token operator">:</span> __dirname<span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">&#x27;[name]_[fullhash]&#x27;</span><span class="token punctuation">,</span>
  path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;manifest.json&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>webpack.app.config.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllReferencePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  context<span class="token operator">:</span> __dirname<span class="token punctuation">,</span>
  manifest<span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./manifest.json&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  scope<span class="token operator">:</span> <span class="token string">&#x27;xyz&#x27;</span><span class="token punctuation">,</span>
  sourceType<span class="token operator">:</span> <span class="token string">&#x27;commonjs2&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="examples"></span>示例<a href="#examples" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><a href="https://github.com/webpack/webpack/tree/master/examples/dll">Vendor</a> 和 <a href="https://github.com/webpack/webpack/tree/master/examples/dll-user">User</a></p><p><em>两个单独的用例，用来分别演示作用域（scope）和上下文（context）。</em></p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>多个 <code>DllPlugins</code> 和 <code>DllReferencePlugins</code>。</p></aside><h2><span id="references"></span>参考<a href="#references" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><h3><span id="source"></span>Source<a href="#source" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><ul><li><a href="https://github.com/webpack/webpack/blob/master/lib/DllPlugin.js">DllPlugin source</a></li><li><a href="https://github.com/webpack/webpack/blob/master/lib/DllReferencePlugin.js">DllReferencePlugin source</a></li><li><a href="https://github.com/webpack/webpack/blob/master/lib/DllEntryPlugin.js">DllEntryPlugin source</a></li><li><a href="https://github.com/webpack/webpack/blob/master/lib/DllModuleFactory.js">DllModuleFactory source</a></li><li><a href="https://github.com/webpack/webpack/blob/master/lib/LibManifestPlugin.js">ManifestPlugin source</a></li></ul><h3><span id="tests"></span>Tests<a href="#tests" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><ul><li><a href="https://github.com/webpack/webpack/blob/master/test/configCases/dll-plugin/0-create-dll/webpack.config.js">DllPlugin creation test</a></li><li><a href="https://github.com/webpack/webpack/blob/master/test/configCases/dll-plugin/2-use-dll-without-scope/webpack.config.js">DllPlugin without scope test</a></li><li><a href="https://github.com/webpack/webpack/tree/master/test/configCases/dll-plugin">DllReferencePlugin use Dll test</a></li></ul><h1><span id="EnvironmentPlugin"></span>EnvironmentPlugin<a href="#EnvironmentPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>The <code>EnvironmentPlugin</code> is shorthand for using the <a href="/plugins/define-plugin"><code>DefinePlugin</code></a> on <a href="https://nodejs.org/api/process.html#process_process_env"><code>process.env</code></a> keys.</p><h2><span id="usage"></span>Usage<a href="#usage" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>The <code>EnvironmentPlugin</code> accepts either an array of keys or an object mapping its keys to their default values.</p><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>EnvironmentPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;NODE_ENV&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;DEBUG&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>This is equivalent to the following <code>DefinePlugin</code> application:</p><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string">&#x27;process.env.NODE_ENV&#x27;</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string">&#x27;process.env.DEBUG&#x27;</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DEBUG</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>Not specifying the environment variable raises an &quot;<code>EnvironmentPlugin</code> - <code>${key}</code> environment variable is undefined&quot; error.</p></aside><h2><span id="usage-with-default-values"></span>Usage with default values<a href="#usage-with-default-values" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>Alternatively, the <code>EnvironmentPlugin</code> supports an object, which maps keys to their default values. The default value for a key is taken if the key is undefined in <code>process.env</code>.</p><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>EnvironmentPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token constant">NODE_ENV</span><span class="token operator">:</span> <span class="token string">&#x27;development&#x27;</span><span class="token punctuation">,</span> <span class="token comment">// use &#x27;development&#x27; unless process.env.NODE_ENV is defined</span>
  <span class="token constant">DEBUG</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p>Variables coming from <code>process.env</code> are always strings.</p></aside><aside class="tip"><h6 class="tip__prefix">提示</h6><p>Unlike <a href="/plugins/define-plugin"><code>DefinePlugin</code></a>, default values are applied to <code>JSON.stringify</code> by the <code>EnvironmentPlugin</code>.</p></aside><aside class="tip"><h6 class="tip__prefix">提示</h6><p>Default values of <code>null</code> and <code>undefined</code> behave differently. Use <code>undefined</code> for variables that <em>must</em> be provided during bundling, or <code>null</code> if they are optional.</p></aside><aside class="warning"><h6 class="warning__prefix">警告</h6><p>If an environment variable is not found during bundling and no default value was provided, webpack will throw an error instead of a warning.</p></aside><p><strong>Example:</strong></p><p>Let&#x27;s investigate the result when running the previous <code>EnvironmentPlugin</code> configuration on a test file <code>entry.js</code>:</p><pre><code class="hljs language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#x27;production&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Welcome to production&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DEBUG</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Debugging output&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>When executing <code>NODE_ENV=production webpack</code> in the terminal to build, <code>entry.js</code> becomes this:</p><pre><code class="hljs language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&#x27;production&#x27;</span> <span class="token operator">===</span> <span class="token string">&#x27;production&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// &lt;-- &#x27;production&#x27; from NODE_ENV is taken</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Welcome to production&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// &lt;-- default value is taken</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Debugging output&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>Running <code>DEBUG=false webpack</code> yields:</p><pre><code class="hljs language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&#x27;development&#x27;</span> <span class="token operator">===</span> <span class="token string">&#x27;production&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// &lt;-- default value is taken</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Welcome to production&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&#x27;false&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// &lt;-- &#x27;false&#x27; from DEBUG is taken</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Debugging output&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><h2><span id="use-case-git-version"></span>Use Case: Git Version<a href="#use-case-git-version" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>The following <code>EnvironmentPlugin</code> configuration provides <code>process.env.GIT_VERSION</code> (such as &quot;v5.4.0-2-g25139f57f&quot;) and <code>process.env.GIT_AUTHOR_DATE</code> (such as &quot;2020-11-04T12:25:16+01:00&quot;) corresponding to the last Git commit of the repository:</p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> child_process <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;child_process&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">git</span><span class="token punctuation">(</span><span class="token parameter">command</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> child_process<span class="token punctuation">.</span><span class="token function">execSync</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">git </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>command<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span> encoding<span class="token operator">:</span> <span class="token string">&#x27;utf8&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>EnvironmentPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token constant">GIT_VERSION</span><span class="token operator">:</span> <span class="token function">git</span><span class="token punctuation">(</span><span class="token string">&#x27;describe --always&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token constant">GIT_AUTHOR_DATE</span><span class="token operator">:</span> <span class="token function">git</span><span class="token punctuation">(</span><span class="token string">&#x27;log -1 --format=%aI&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="dotenvplugin"></span>DotenvPlugin<a href="#dotenvplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>The third-party <a href="https://github.com/mrsteele/dotenv-webpack"><code>DotenvPlugin</code></a> (<code>dotenv-webpack</code>) allows you to expose (a subset of) <a href="https://www.npmjs.com/package/dotenv">dotenv variables</a>:</p><pre><code class="hljs language-bash">// .env
<span class="token assign-left variable">DB_HOST</span><span class="token operator">=</span><span class="token number">127.0</span>.0.1
<span class="token assign-left variable">DB_PASS</span><span class="token operator">=</span>foobar
<span class="token assign-left variable">S3_API</span><span class="token operator">=</span>mysecretkey</code></pre><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">Dotenv</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  path<span class="token operator">:</span> <span class="token string">&#x27;./.env&#x27;</span><span class="token punctuation">,</span> <span class="token comment">// Path to .env file (this is the default)</span>
  safe<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// load .env.example (defaults to &quot;false&quot; which does not use dotenv-safe)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h1><span id="EslintWebpackPlugin"></span>EslintWebpackPlugin<a href="#EslintWebpackPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<div align="center"></div><p><a href="https://npmjs.com/package/eslint-webpack-plugin"><img src="https://img.shields.io/npm/v/eslint-webpack-plugin.svg" alt="npm"/></a>
<a href="https://nodejs.org"><img src="https://img.shields.io/node/v/eslint-webpack-plugin.svg" alt="node"/></a>
<a href="https://david-dm.org/webpack-contrib/eslint-webpack-plugin"><img src="https://david-dm.org/webpack-contrib/eslint-webpack-plugin.svg" alt="deps"/></a>
<a href="https://github.com/webpack-contrib/eslint-webpack-plugin/actions"><img src="https://github.com/webpack-contrib/eslint-webpack-plugin/workflows/eslint-webpack-plugin/badge.svg" alt="tests"/></a>
<a href="https://codecov.io/gh/webpack-contrib/eslint-webpack-plugin"><img src="https://codecov.io/gh/webpack-contrib/eslint-webpack-plugin/branch/master/graph/badge.svg" alt="coverage"/></a>
<a href="https://gitter.im/webpack/webpack"><img src="https://badges.gitter.im/webpack/webpack.svg" alt="chat"/></a>
<a href="https://packagephobia.now.sh/result?p=eslint-webpack-plugin"><img src="https://packagephobia.now.sh/badge?p=eslint-webpack-plugin" alt="size"/></a></p><blockquote><p>eslint-webpack-plugin 3.0 仅支持 webpack 5。对于 webpack 4 请查看 <a href="https://github.com/webpack-contrib/eslint-webpack-plugin/tree/2.x">2.x 分支</a>。</p></blockquote><p>该插件使用 <a href="https://eslint.org/"><code>eslint</code></a> 来查找和修复 JavaScript 代码中的问题。</p><h2><span id="getting-started"></span>开始<a href="#getting-started" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>首先，需要安装 <code>eslint-webpack-plugin</code>：</p><pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> eslint-webpack-plugin --save-dev</code></pre><p><strong>注意</strong>: 如果未安装 <code>eslint &gt;= 7</code> ，你还需先通过 npm 安装：</p><pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> eslint --save-dev</code></pre><p>然后把插件添加到你的 webpack 配置。例如：</p><pre><code class="hljs language-js"><span class="token keyword">const</span> ESLintPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;eslint-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">ESLintPlugin</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="options"></span>选项<a href="#options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>你可以传入 <a href="https://eslint.org/docs/developer-guide/nodejs-api#-new-eslintoptions">eslint 参数</a>。</p><p>注意你提供的配置选项会传给 <code>ESLint</code> 类。
这是一组和你在 <code>package.json</code> 与 <code>.eslintrc</code> 所指定选项不同的选项。
查阅 <a href="https://eslint.org/docs/developer-guide/nodejs-api#-new-eslintoptions">eslint 文档</a> 获取更多详情。</p><p><strong>警告</strong>: 在 eslint-webpack-plugin 1.x 版本中，配置项会传递给已废弃的 <a href="https://eslint.org/docs/developer-guide/nodejs-api#cliengine">CLIEngine</a>。</p><h3><span id="context"></span><code>context</code><a href="#context" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><ul><li>类型：<code>String</code></li><li>默认值：<code>compiler.context</code></li></ul><p>指定文件根目录，类型为字符串。</p><h3><span id="eslintpath"></span><code>eslintPath</code><a href="#eslintpath" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><ul><li>类型：<code>String</code></li><li>默认值：<code>eslint</code></li></ul><p>用于 linting 的 <code>eslint</code> 实例的路径。如果 <code>eslintPath</code> 是类似官方 eslint 的目录，或者指定了 <code>formatter</code> 选项，那么就不需要安装 <code>eslint</code> 了。</p><h3><span id="estensions"></span><code>extensions</code><a href="#estensions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><ul><li>类型：<code>String|Array[String]</code></li><li>默认值：<code>&#x27;js&#x27;</code></li></ul><p>指定需要检查的扩展名。</p><h3><span id="exclude"></span><code>exclude</code><a href="#exclude" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><ul><li>类型：<code>String|Array[String]</code></li><li>默认值：<code>&#x27;node_modules&#x27;</code></li></ul><p>指定需要排除的文件及目录。必须是相对于 <code>options.context</code> 的相对路径。</p><h3><span id="files"></span><code>files</code><a href="#files" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><ul><li>类型：<code>String|Array[String]</code></li><li>默认值：<code>null</code></li></ul><p>指定目录、文件或 globs ，必须是相对于 <code>options.context</code> 的相对路径。
如果是目录则递归查找所有匹配 <code>options.extensions</code> 选项的文件。
如果是文件或 globs 则忽略 <code>options.extensions</code> 选项。</p><h3><span id="fix"></span><code>fix</code><a href="#fix" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><ul><li>类型：<code>Boolean</code></li><li>默认值：<code>false</code></li></ul><p>启用 <a href="https://eslint.org/docs/developer-guide/nodejs-api#-eslintoutputfixesresults">ESLint 自动修复特性</a>。</p><p><strong>小心: 该选项会修改源文件。</strong></p><h3><span id="formatter"></span><code>formatter</code><a href="#formatter" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><ul><li>类型：<code>String|Function</code></li><li>默认值：<code>&#x27;stylish&#x27;</code></li></ul><p>接受一个有单一参数的函数：该参数为 eslint 消息（一个对象）的数组。函数必须返回字符串格式的 output。可以使用官方的 <a href="https://eslint.org/docs/user-guide/formatters/">eslint formatters</a>。</p><h3><span id="lintdirtymodulesonly"></span><code>lintDirtyModulesOnly</code><a href="#lintdirtymodulesonly" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><ul><li>类型：<code>Boolean</code></li><li>默认值：<code>false</code></li></ul><p>只对内容修改了的文件进行 lint，启动时跳过 lint 。</p><h3><span id="threads"></span><code>threads</code><a href="#threads" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><ul><li>类型：<code>Boolean | Number</code></li><li>默认值：<code>false</code></li></ul><p>以线程池方式运行 lint 。线程池大小是自动的，除非你指定一个数值。</p><h3><span id="errors-and-warning"></span>错误以及警告<a href="#errors-and-warning" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><strong>该插件默认会根据 eslint 错误/警告的数量自动调整错误报告（error reporting）。</strong>
你也可以通过 <code>emitError</code> <strong>或</strong> <code>emitWarning</code> 强制开启错误报告行为：</p><h4><span id="emiterror"></span><code>emitError</code><a href="#emiterror" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><ul><li>类型：<code>Boolean</code></li><li>默认值：<code>true</code></li></ul><p>总是发送发现的错误 ，设置为 <code>false</code> 以禁用。</p><h4><span id="emitwarning"></span><code>emitWarning</code><a href="#emitwarning" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><ul><li>类型：<code>Boolean</code></li><li>默认值：<code>true</code></li></ul><p>总是发送发现的警告，设置为 <code>false</code> 以禁用。</p><h4><span id="failonerror"></span><code>failOnError</code><a href="#failonerror" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><ul><li>类型：<code>Boolean</code></li><li>默认值：<code>true</code></li></ul><p>任何错误都会导致模块构建（module build）失败，设置为 <code>false</code> 禁用。</p><h4><span id="failonwarning"></span><code>failOnWarning</code><a href="#failonwarning" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><ul><li>类型：<code>Boolean</code></li><li>默认值：<code>false</code></li></ul><p>当设置为 <code>true</code> 时，任何警告都会导致模块构建（module build）失败。</p><h4><span id="quiet"></span><code>quiet</code><a href="#quiet" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><ul><li>类型：<code>Boolean</code></li><li>默认值：<code>false</code></li></ul><p>设置为 <code>true</code> 后，仅处理和报告错误，忽略警告。</p><h4><span id="outputreport"></span><code>outputReport</code><a href="#outputreport" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><ul><li>类型：<code>Boolean|Object</code></li><li>默认值：<code>false</code></li></ul><p>把错误输出到一个文件，例如在 Jenkins CI 使用 checkstyle xml 文件。</p><p><code>filePath</code> 为绝对路径或者相对于 webpack 配置: <code>output.path</code> 的相对路径。
你可以为输出文件传入不同的 <code>formatter</code> 。
如果没有传入，则使用默认的或已配置的 formatter 。</p><h2><span id="changelog"></span>更新日志<a href="#changelog" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><a href="https://github.com/webpack-contrib/eslint-webpack-plugin/blob/master/CHANGELOG.md">更新日志</a></p><h2><span id="license"></span>License<a href="#license" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><a href="https://github.com/webpack-contrib/eslint-webpack-plugin/blob/master/LICENSE">MIT</a></p><h1><span id="EvalSourceMapDevToolPlugin"></span>EvalSourceMapDevToolPlugin<a href="#EvalSourceMapDevToolPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>本插件可以为 source map 的生成提供更好更细粒度的控制。<a href="/configuration/devtool/"><code>devtool</code></a> 中的某些配置会自动使用它。</p><pre><code class="hljs language-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>EvalSourceMapDevToolPlugin</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="options"></span>选项<a href="#options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>支持以下选项：</p><ul><li><code>test</code> (<code>string|RegExp|array</code>): 默认值为 <code>.js</code> 和 <code>.css</code>，为与给定的模块扩展名相匹配的模块，添加 source map。</li><li><code>include</code> (<code>string|RegExp|array</code>): 为与给定路径相匹配的模块，添加 source map。</li><li><code>exclude</code> (<code>string|RegExp|array</code>): 排除一些与给定值相匹配的模块，不会为它们生成映射关系。</li><li><code>append</code> (<code>string</code>): 将给定的值添加到源代码中，通常是 <code>#sourceMappingURL</code> 注释，<code>[url]</code> 在 source map 文件中将会被替换成 url，值为 <code>false</code> 表示不添加。</li><li><code>moduleFilenameTemplate</code> (<code>string</code>): 查看 <a href="/configuration/output/#outputdevtoolmodulefilenametemplate"><code>output.devtoolModuleFilenameTemplate</code></a>。</li><li><code>module</code> (<code>boolean</code>): 默认值为 <code>true</code>，表示是否为 loaders 添加 source map。</li><li><code>columns</code> (<code>boolean</code>): 默认值为 <code>true</code>，表示是否使用列映射(column mapping)。</li><li><code>protocol</code> (<code>string</code>): 默认协议名为 <code>webpack-internal://</code>，允许用户重新定义协议。</li></ul><aside class="tip"><h6 class="tip__prefix">提示</h6><p>将 <code>module</code> 或者 <code>columns</code> 设置为 <code>false</code> 将产生较不精确的源映射，但会明显提高编译性能。</p></aside><aside class="tip"><h6 class="tip__prefix">提示</h6><p>如果要在 <a href="/configuration/mode/#mode-development">开发模式</a> 下对此插件使用自定义配置，请确保禁用默认配置。 即设置 <code>devtool: false</code>。</p></aside><h2><span id="examples"></span>示例<a href="#examples" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>以下示例演示了此插件的一些常见用例。</p><h3><span id="basic-use-case"></span>基本用例<a href="#basic-use-case" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>可以使用以下代码替换配置选项 <code>devtool: eval-source-map</code>，并使用等效的自定义插件配置：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  devtool<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>EvalSourceMapDevToolPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="exclude-vendor-maps"></span>排除 Vendor(第三方库) Maps<a href="#exclude-vendor-maps" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>下面的代码将排除 <code>vendor.js</code> 包中任何模块 source map 的生成：</p><pre><code class="hljs language-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>EvalSourceMapDevToolPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  exclude<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;vendor.js&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h1><span id="HashedModuleIdsPlugin"></span>HashedModuleIdsPlugin<a href="#HashedModuleIdsPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>This plugin will cause hashes to be based on the relative path of the module, generating a four character string as the module id. Suggested for use in production.</p><pre><code class="hljs language-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ids<span class="token punctuation">.</span>HashedModuleIdsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// Options...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="options"></span>Options<a href="#options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>This plugin supports the following options:</p><ul><li><code>context</code>: The context directory (<strong>absolute path</strong>) for creating names.</li><li><code>hashFunction</code>: The hashing algorithm to use, defaults to <code>&#x27;md4&#x27;</code>. All functions from Node.JS&#x27; <a href="https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options"><code>crypto.createHash</code></a> are supported.</li><li><code>hashDigest</code>: The encoding to use when generating the hash, defaults to <code>&#x27;base64&#x27;</code>. All encodings from Node.JS&#x27; <a href="https://nodejs.org/api/crypto.html#crypto_hash_digest_encoding"><code>hash.digest</code></a> are supported.</li><li><code>hashDigestLength</code>: The prefix length of the hash digest to use, defaults to <code>4</code>. Note that some generated ids might be longer than specified here, to avoid module id collisions.</li></ul><h2><span id="usage"></span>Usage<a href="#usage" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>Here&#x27;s an example of how this plugin might be used:</p><pre><code class="hljs language-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ids<span class="token punctuation">.</span>HashedModuleIdsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  context<span class="token operator">:</span> __dirname<span class="token punctuation">,</span>
  hashFunction<span class="token operator">:</span> <span class="token string">&#x27;sha256&#x27;</span><span class="token punctuation">,</span>
  hashDigest<span class="token operator">:</span> <span class="token string">&#x27;hex&#x27;</span><span class="token punctuation">,</span>
  hashDigestLength<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h1><span id="HotModuleReplacementPlugin"></span>HotModuleReplacementPlugin<a href="#HotModuleReplacementPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p><a href="/concepts/hot-module-replacement">Hot Module Replacement</a>，除此之外还被称为 HMR。</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p>HMR <strong>绝对不能</strong>被用在生产环境。</p></aside><h2><span id="basic-usage"></span>基本使用<a href="#basic-usage" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>启用 HMR 很容易，且在大多数情况下不需要任何配置。</p><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// Options...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h1><span id="HtmlMinimizerWebpackPlugin"></span>HtmlMinimizerWebpackPlugin<a href="#HtmlMinimizerWebpackPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<div align="center"></div><p><a href="https://npmjs.com/package/html-minimizer-webpack-plugin"><img src="https://img.shields.io/npm/v/html-minimizer-webpack-plugin.svg" alt="npm"/></a>
<a href="https://nodejs.org"><img src="https://img.shields.io/node/v/html-minimizer-webpack-plugin.svg" alt="node"/></a>
<a href="https://david-dm.org/webpack-contrib/html-minimizer-webpack-plugin"><img src="https://david-dm.org/webpack-contrib/html-minimizer-webpack-plugin.svg" alt="deps"/></a>
<a href="https://github.com/webpack-contrib/html-minimizer-webpack-plugin/actions"><img src="https://github.com/webpack-contrib/html-minimizer-webpack-plugin/workflows/html-minimizer-webpack-plugin/badge.svg" alt="tests"/></a>
<a href="https://codecov.io/gh/webpack-contrib/html-minimizer-webpack-plugin"><img src="https://codecov.io/gh/webpack-contrib/html-minimizer-webpack-plugin/branch/master/graph/badge.svg" alt="cover"/></a>
<a href="https://gitter.im/webpack/webpack"><img src="https://img.shields.io/badge/gitter-webpack%2Fwebpack-brightgreen.svg" alt="chat"/></a>
<a href="https://packagephobia.now.sh/result?p=html-minimizer-webpack-plugin"><img src="https://packagephobia.now.sh/badge?p=html-minimizer-webpack-plugin" alt="size"/></a></p><p>This plugin uses <a href="https://github.com/terser/html-minifier-terser">html-minifier-terser</a> to optimize and minify your HTML.</p><h2><span id="Getting-Started"></span>Getting Started<a href="#Getting-Started" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>To begin, you&#x27;ll need to install <code>html-minimizer-webpack-plugin</code>:</p><pre><code class="hljs language-console">npm install html-minimizer-webpack-plugin --save-dev
</code></pre><p>Then add the plugin to your <code>webpack</code> configuration. For example:</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> HtmlMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;html-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> CopyPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;copy-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    loaders<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.html$/i</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;asset/resource&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          context<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;dist&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;./src/*.html&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// For webpack@5 you can use the `...` syntax to extend existing minimizers (i.e. `terser-webpack-plugin`), uncomment the next line</span>
      <span class="token comment">// `...`</span>
      <span class="token keyword">new</span> <span class="token class-name">HtmlMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>This will enable HTML optimization only in production mode.
If you want to run it also in development set the <code>optimization.minimize</code> option to <code>true</code>.</p><p>And run <code>webpack</code> via your preferred method.</p><h2><span id="Options"></span>Options<a href="#Options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><table><thead><tr><th align="center">Name</th><th align="center">Type</th><th align="center">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center" data-th="Name"><span><strong><a href="#test"><code>test</code></a></strong></span></td><td align="center" data-th="Type"><span><code>String|RegExp|Array&lt;String|RegExp&gt;</code></span></td><td align="center" data-th="Default"><span><code>/\.html(\?.*)?$/i</code></span></td><td align="left" data-th="Description"><span>Test to match files against.</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#include"><code>include</code></a></strong></span></td><td align="center" data-th="Type"><span><code>String|RegExp|Array&lt;String|RegExp&gt;</code></span></td><td align="center" data-th="Default"><span><code>undefined</code></span></td><td align="left" data-th="Description"><span>Files to include.</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#exclude"><code>exclude</code></a></strong></span></td><td align="center" data-th="Type"><span><code>String|RegExp|Array&lt;String|RegExp&gt;</code></span></td><td align="center" data-th="Default"><span><code>undefined</code></span></td><td align="left" data-th="Description"><span>Files to exclude.</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#parallel"><code>parallel</code></a></strong></span></td><td align="center" data-th="Type"><span><code>Boolean|Number</code></span></td><td align="center" data-th="Default"><span><code>true</code></span></td><td align="left" data-th="Description"><span>Use multi-process parallel running to improve the build speed.</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#minify"><code>minify</code></a></strong></span></td><td align="center" data-th="Type"><span><code>Function|Array&lt;Function&gt;</code></span></td><td align="center" data-th="Default"><span><code>HtmlMinimizerPlugin.htmlMinifierTerser</code></span></td><td align="left" data-th="Description"><span>Allows you to override default minify function.</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#minimizerOptions"><code>minimizerOptions</code></a></strong></span></td><td align="center" data-th="Type"><span><code>Object|Array&lt;Object&gt;</code></span></td><td align="center" data-th="Default"><span><code>{ caseSensitive: true, collapseWhitespace: true, conservativeCollapse: true, keepClosingSlash: true, minifyCSS: true, minifyJS: true, removeComments: true, removeScriptTypeAttributes: true, removeStyleLinkTypeAttributes: true, }</code></span></td><td align="left" data-th="Description"><span><code>Html-minifier-terser</code> optimisations <a href="https://github.com/terser/html-minifier-terser#options-quick-reference">options</a>.</span></td></tr></tbody></table><h3><span id="test"></span><code>test</code><a href="#test" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Type: <code>String|RegExp|Array&lt;String|RegExp&gt;</code> - default: <code>/\.html(\?.*)?$/i</code></p><p>Test to match files against.</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">HtmlMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.foo\.html/i</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="include"></span><code>include</code><a href="#include" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Type: <code>String|RegExp|Array&lt;String|RegExp&gt;</code>
Default: <code>undefined</code></p><p>Files to include.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">HtmlMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        include<span class="token operator">:</span> <span class="token regex">/\/includes/</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="exclude"></span><code>exclude</code><a href="#exclude" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Type: <code>String|RegExp|Array&lt;String|RegExp&gt;</code>
Default: <code>undefined</code></p><p>Files to exclude.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">HtmlMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        exclude<span class="token operator">:</span> <span class="token regex">/\/excludes/</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="parallel"></span><code>parallel</code><a href="#parallel" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Type: <code>Boolean|Number</code>
Default: <code>true</code></p><p>Use multi-process parallel running to improve the build speed.
Default number of concurrent runs: <code>os.cpus().length - 1</code>.</p><blockquote><p>ℹ️ Parallelization can speed up your build significantly and is therefore <strong>highly recommended</strong>.</p></blockquote><h4><span id="Boolean"></span><code>Boolean</code><a href="#Boolean" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Enable/disable multi-process parallel running.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">HtmlMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        parallel<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="Number"></span><code>Number</code><a href="#Number" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Enable multi-process parallel running and set number of concurrent runs.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">HtmlMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        parallel<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="minify"></span><code>minify</code><a href="#minify" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Type: <code>Function|Array&lt;Function&gt;</code>
Default: <code>HtmlMinimizerPlugin.htmlMinifierTerser</code></p><p>Allows you to override default minify function.
By default, plugin uses <a href="https://github.com/terser/html-minifier-terser">html-minifier-terser</a> package.
Useful for using and testing unpublished versions or forks.</p><blockquote><p>⚠️ <strong>Always use <code>require</code> inside <code>minify</code> function when <code>parallel</code> option enabled</strong>.</p></blockquote><h4><span id="Function"></span><code>Function</code><a href="#Function" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">HtmlMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
          collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">minify</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> minimizerOptions</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> htmlMinifier <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;html-minifier-terser&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>filename<span class="token punctuation">,</span> input<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token keyword">return</span> <span class="token punctuation">{</span>
            code<span class="token operator">:</span> htmlMinifier<span class="token punctuation">.</span><span class="token function">minify</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> minimizerOptions<span class="token punctuation">)</span><span class="token punctuation">,</span>
            warnings<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            errors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="Array"></span><code>Array</code><a href="#Array" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>If an array of functions is passed to the <code>minify</code> option, the <code>minimizerOptions</code> can be an array or an object.
If <code>minimizerOptions</code> is array, the function index in the <code>minify</code> array corresponds to the options object with the same index in the <code>minimizerOptions</code> array.
If you use <code>minimizerOptions</code> like object, all <code>minify</code> function accept it.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">HtmlMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        minimizerOptions<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token comment">// Options for the first function (HtmlMinimizerPlugin.htmlMinifierTerser)</span>
          <span class="token punctuation">{</span>
            collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token comment">// Options for the second function</span>
          <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        minify<span class="token operator">:</span> <span class="token punctuation">[</span>
          HtmlMinimizerPlugin<span class="token punctuation">.</span>htmlMinifierTerser<span class="token punctuation">,</span>
          <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> minimizerOptions</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>filename<span class="token punctuation">,</span> input<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// To do something</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
              code<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">optimised code</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
              warnings<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              errors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="minimizerOptions"></span><code>minimizerOptions</code><a href="#minimizerOptions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Type: <code>Object|Array&lt;Object&gt;</code>
Default: <code>{ caseSensitive: true, collapseWhitespace: true, conservativeCollapse: true, keepClosingSlash: true, minifyCSS: true, minifyJS: true, removeComments: true, removeScriptTypeAttributes: true, removeStyleLinkTypeAttributes: true, }</code></p><p><code>Html-minifier-terser</code> optimisations <a href="https://github.com/terser/html-minifier-terser#options-quick-reference">options</a>.</p><h4><span id="Object"></span><code>Object</code><a href="#Object" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">HtmlMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
          collapseWhitespace<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="Array-1"></span><code>Array</code><a href="#Array-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>The function index in the <code>minify</code> array corresponds to the options object with the same index in the <code>minimizerOptions</code> array.
If you use <code>minimizerOptions</code> like object, all <code>minify</code> function accept it.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">HtmlMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        minimizerOptions<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token comment">// Options for the first function (HtmlMinimizerPlugin.htmlMinifierTerser)</span>
          <span class="token punctuation">{</span>
            collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token comment">// Options for the second function</span>
          <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        minify<span class="token operator">:</span> <span class="token punctuation">[</span>
          HtmlMinimizerPlugin<span class="token punctuation">.</span>htmlMinifierTerser<span class="token punctuation">,</span>
          <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> minimizerOptions</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>filename<span class="token punctuation">,</span> input<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// To do something</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
              code<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">optimised code</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
              warnings<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              errors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="Contributing"></span>Contributing<a href="#Contributing" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>Please take a moment to read our contributing guidelines if you haven&#x27;t yet done so.</p><p><a href="https://github.com/webpack-contrib/html-minimizer-webpack-plugin/blob/master/.github/CONTRIBUTING.md">CONTRIBUTING</a></p><h2><span id="License"></span>License<a href="#License" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><a href="https://github.com/webpack-contrib/html-minimizer-webpack-plugin/blob/master/LICENSE">MIT</a></p><h1><span id="HtmlWebpackPlugin"></span>HtmlWebpackPlugin<a href="#HtmlWebpackPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p><a href="https://github.com/jantimon/html-webpack-plugin"><code>HtmlWebpackPlugin</code></a> 简化了 HTML 文件的创建，以便为你的 webpack 包提供服务。这对于那些文件名中包含哈希值，并且哈希值会随着每次编译而改变的 webpack 包特别有用。你可以让该插件为你生成一个 HTML 文件，使用 <a href="https://lodash.com/docs#template">lodash 模板</a>提供模板，或者使用你自己的 <a href="/loaders">loader</a>。</p><h2><span id="installation"></span>安装<a href="#installation" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev html-webpack-plugin</code></pre><h2><span id="basic-usage"></span>基本用法<a href="#basic-usage" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>该插件将为你生成一个 HTML5 文件，
在 body 中使用 <code>script</code> 标签引入你所有 webpack 生成的 bundle。
只需添加该插件到你的 webpack 配置中，如下所示：</p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;html-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token string">&#x27;index.js&#x27;</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;./dist&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">&#x27;index_bundle.js&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>这将会生成一个包含以下内容的 <code>dist/index.html</code> 文件：</p><pre><code class="hljs language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>webpack App<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index_bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre><p>如果你有多个 webpack 入口，他们都会在已生成 HTML 文件中的 <code>&lt;script&gt;</code> 标签内引入。</p><p>如果在 webpack 的输出中有任何 CSS 资源（例如，使用 <a href="/plugins/mini-css-extract-plugin/">MiniCssExtractPlugin</a> 提取的 CSS），那么这些资源也会在 HTML 文件 <code>&lt;head&gt;</code> 元素中的 <code>&lt;link&gt;</code> 标签内引入。</p><h2><span id="configuration"></span>配置<a href="#configuration" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>获取所有的配置选项，请浏览<a href="https://github.com/jantimon/html-webpack-plugin#options">插件文档</a>。</p><h2><span id="third-party-addons"></span>第三方插件<a href="#third-party-addons" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>该插件支持第三方插件。详细列表参阅<a href="https://github.com/jantimon/html-webpack-plugin#plugins">文档</a>。</p><h1><span id="IgnorePlugin"></span>IgnorePlugin<a href="#IgnorePlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>IgnorePlugin prevents the generation of modules for <code>import</code> or <code>require</code> calls matching the regular expressions or filter functions:</p><h2><span id="using-regular-expressions"></span>Using regular expressions<a href="#using-regular-expressions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><ul><li><code>resourceRegExp</code>: A RegExp to test the resource against.</li><li><code>contextRegExp</code>: (optional) A RegExp to test the context (directory) against.</li></ul><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>IgnorePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> resourceRegExp<span class="token punctuation">,</span> contextRegExp <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="using-filter-functions"></span>Using filter functions<a href="#using-filter-functions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><ul><li><code>checkResource (resource, context)</code> A Filter function that receives <code>resource</code> and <code>context</code> as arguments, must return boolean.</li></ul><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>IgnorePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">checkResource</span><span class="token punctuation">(</span><span class="token parameter">resource</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something with resource</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span> <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="example-of-ignoring-moment-locales"></span>Example of ignoring Moment Locales<a href="#example-of-ignoring-moment-locales" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>As of <a href="https://momentjs.com/">moment</a> 2.18, all locales are bundled together with the core library (see <a href="https://github.com/moment/moment/issues/2373">this GitHub issue</a>).</p><p>The <code>resourceRegExp</code> parameter passed to <code>IgnorePlugin</code> is not tested against the resolved file names or absolute module names being imported or required, but rather against the <em>string</em> passed to <code>require</code> or <code>import</code> <em>within the source code where the import is taking place</em>. For example, if you&#x27;re trying to exclude <code>node_modules/moment/locale/*.js</code>, this won&#x27;t work:</p><pre><code class="hljs language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">new webpack.IgnorePlugin({ resourceRegExp: /moment\/locale\// });</span></span></code></pre><p>Rather, because <code>moment</code> imports with this code:</p><pre><code class="hljs language-js"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./locale/&#x27;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>...your first regexp must match that <code>&#x27;./locale/&#x27;</code> string. The second <code>contextRegExp</code> parameter is then used to select specific directories from where the import took place. The following will cause those locale files to be ignored:</p><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>IgnorePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  resourceRegExp<span class="token operator">:</span> <span class="token regex">/^\.\/locale$/</span><span class="token punctuation">,</span>
  contextRegExp<span class="token operator">:</span> <span class="token regex">/moment$/</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>...which means &quot;any require statement matching <code>&#x27;./locale&#x27;</code> from any directories ending with <code>&#x27;moment&#x27;</code> will be ignored.</p><h1><span id="ImageMinimizerWebpackPlugin"></span>ImageMinimizerWebpackPlugin<a href="#ImageMinimizerWebpackPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<div align="center"><p><p>Plugin and Loader for <a href="http://webpack.js.org/">webpack</a> to
optimize (compress) all images using<!-- --> <!-- -->
<a href="https://github.com/imagemin/imagemin">imagemin</a>. Do not worry
about size of images, now they are always optimized/compressed.</p></p></div><p><a href="https://npmjs.com/package/image-minimizer-webpack-plugin"><img src="https://img.shields.io/npm/v/image-minimizer-webpack-plugin.svg" alt="npm"/></a>
<a href="https://nodejs.org"><img src="https://img.shields.io/node/v/image-minimizer-webpack-plugin.svg" alt="node"/></a>
<a href="https://david-dm.org/webpack-contrib/image-minimizer-webpack-plugin"><img src="https://david-dm.org/webpack-contrib/image-minimizer-webpack-plugin.svg" alt="deps"/></a>
<a href="https://github.com/webpack-contrib/image-minimizer-webpack-plugin/actions"><img src="https://github.com/webpack-contrib/image-minimizer-webpack-plugin/workflows/image-minimizer-webpack-plugin/badge.svg" alt="tests"/></a>
<a href="https://codecov.io/gh/webpack-contrib/image-minimizer-webpack-plugin"><img src="https://codecov.io/gh/webpack-contrib/image-minimizer-webpack-plugin/branch/master/graph/badge.svg" alt="cover"/></a>
<a href="https://gitter.im/webpack/webpack"><img src="https://badges.gitter.im/webpack/webpack.svg" alt="chat"/></a>
<a href="https://packagephobia.now.sh/result?p=image-minimizer-webpack-plugin"><img src="https://packagephobia.now.sh/badge?p=image-minimizer-webpack-plugin" alt="size"/></a></p><h2><span id="Getting-Started"></span>Getting Started<a href="#Getting-Started" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>This plugin can use 2 tools to compress images:</p><ul><li><a href="https://github.com/imagemin/imagemin"><code>imagemin</code></a> - optimize your images by default, since it is stable and works with all types of images</li><li><a href="https://github.com/GoogleChromeLabs/squoosh/tree/dev/libsquoosh"><code>squoosh</code></a> - while working in experimental mode with <code>.jpg</code>, <code>.jpeg</code>, <code>.png</code>, <code>.webp</code>, <code>.avif</code> file types.</li></ul><p>To begin, you&#x27;ll need to install <code>image-minimizer-webpack-plugin</code>:</p><pre><code class="hljs language-console">npm install image-minimizer-webpack-plugin --save-dev
</code></pre><p>Images can be optimized in two modes:</p><ol><li><a href="https://en.wikipedia.org/wiki/Lossless_compression">Lossless</a> (without loss of quality).</li><li><a href="https://en.wikipedia.org/wiki/Lossy_compression">Lossy</a> (with loss of quality).</li></ol><h3><span id="Optimize-with-imagemin"></span>Optimize with <a href="https://github.com/imagemin/imagemin">imagemin</a><a href="#Optimize-with-imagemin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Note:</p><ul><li><a href="https://github.com/imagemin/imagemin-mozjpeg">imagemin-mozjpeg</a> can be configured in lossless and lossy mode.</li><li><a href="https://github.com/imagemin/imagemin-svgo">imagemin-svgo</a> can be configured in lossless and lossy mode.</li></ul><p>Explore the options to get the best result for you.</p><p><strong>Recommended imagemin plugins for lossless optimization</strong></p><pre><code class="hljs language-shell"><span class="token function">npm</span> <span class="token function">install</span> imagemin-gifsicle imagemin-jpegtran imagemin-optipng imagemin-svgo --save-dev</code></pre><p><strong>Recommended imagemin plugins for lossy optimization</strong></p><pre><code class="hljs language-shell"><span class="token function">npm</span> <span class="token function">install</span> imagemin-gifsicle imagemin-mozjpeg imagemin-pngquant imagemin-svgo --save-dev</code></pre><p>For <code>imagemin-svgo</code> v9.0.0+ need use svgo <a href="https://github.com/svg/svgo#configuration">configuration</a></p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> extendDefaultPlugins <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;svgo&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;asset&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// Lossless optimization with custom option</span>
        <span class="token comment">// Feel free to experiment with options for better result for you</span>
        plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">[</span><span class="token string">&#x27;gifsicle&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> interlaced<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">[</span><span class="token string">&#x27;jpegtran&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> progressive<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">[</span><span class="token string">&#x27;optipng&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> optimizationLevel<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token comment">// Svgo configuration here https://github.com/svg/svgo#configuration</span>
          <span class="token punctuation">[</span>
            <span class="token string">&#x27;svgo&#x27;</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              plugins<span class="token operator">:</span> <span class="token function">extendDefaultPlugins</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                  name<span class="token operator">:</span> <span class="token string">&#x27;removeViewBox&#x27;</span><span class="token punctuation">,</span>
                  active<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                  name<span class="token operator">:</span> <span class="token string">&#x27;addAttributesToSVGElement&#x27;</span><span class="token punctuation">,</span>
                  params<span class="token operator">:</span> <span class="token punctuation">{</span>
                    attributes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> xmlns<span class="token operator">:</span> <span class="token string">&#x27;http://www.w3.org/2000/svg&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                  <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="Optimize-with-squoosh"></span>Optimize with <a href="https://github.com/GoogleChromeLabs/squoosh/tree/dev/libsquoosh"><code>squoosh</code></a><a href="#Optimize-with-squoosh" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><pre><code class="hljs language-console">npm install @squoosh/lib --save-dev
</code></pre><p><strong>Recommended <code>@squoosh/lib</code> options for lossy optimization</strong></p><p>For lossy optimization we recommend using the default settings <code>@squoosh/lib</code>.
The default values and supported file types for each option can be found in the <code>[codecs.ts]</code>(<a href="https://github.com/GoogleChromeLabs/squoosh/blob/dev/libsquoosh/src/codecs.ts">https://github.com/GoogleChromeLabs/squoosh/blob/dev/libsquoosh/src/codecs.ts</a>) file under <code>codecs</code>.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(jpe?g|png)$/i</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;asset&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      minify<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>squooshMinify<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><strong>Recommended <code>squoosh</code> options for lossless optimization</strong></p><p>For lossless optimization we recommend using the options listed below in <code>minimizerOptions.encodeOptions</code>.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(jpe?g|png)$/i</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;asset&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      minify<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>squooshMinify<span class="token punctuation">,</span>
      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        encodeOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
          mozjpeg<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// That setting might be close to lossless, but it’s not guaranteed</span>
            <span class="token comment">// https://github.com/GoogleChromeLabs/squoosh/issues/85</span>
            quality<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          webp<span class="token operator">:</span> <span class="token punctuation">{</span>
            lossless<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          avif<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// https://github.com/GoogleChromeLabs/squoosh/blob/dev/codecs/avif/enc/README.md</span>
            cqLevel<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><blockquote><p>ℹ️ If you want to use <code>loader</code> or <code>plugin</code> standalone see sections below, but this is not recommended.</p></blockquote><h3><span id="Standalone-Loader"></span>Standalone Loader<a href="#Standalone-Loader" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><a href="/concepts/loaders/">Documentation: Using loaders</a></p><p>In your <code>webpack.config.js</code>, add the <code>ImageMinimizerPlugin.loader</code> and specify the <a href="/guides/asset-modules/">asset modules options</a>:</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;asset&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              severityError<span class="token operator">:</span> <span class="token string">&#x27;warning&#x27;</span><span class="token punctuation">,</span> <span class="token comment">// Ignore errors on corrupted images</span>
              minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
                plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;gifsicle&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="Standalone-Plugin"></span>Standalone Plugin<a href="#Standalone-Plugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><a href="/concepts/plugins/">Documentation: Using plugins</a></p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;asset&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// Make sure that the plugin placed after any plugins that added images</span>
    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      severityError<span class="token operator">:</span> <span class="token string">&#x27;warning&#x27;</span><span class="token punctuation">,</span> <span class="token comment">// Ignore errors on corrupted images</span>
      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;gifsicle&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// Disable `loader`</span>
      loader<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="Options"></span>Options<a href="#Options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><h3><span id="Plugin-Options"></span>Plugin Options<a href="#Plugin-Options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><table><thead><tr><th align="center">Name</th><th align="center">Type</th><th align="center">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center" data-th="Name"><span><strong><a href="#test"><code>test</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{String\/RegExp|Array&lt;String|RegExp&gt;}</code></span></td><td align="center" data-th="Default"><span><code>/.(jpe?g|png|gif|tif|webp|svg|avif)$/i</code></span></td><td align="left" data-th="Description"><span>Test to match files against</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#include"><code>include</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{String\/RegExp|Array&lt;String|RegExp&gt;}</code></span></td><td align="center" data-th="Default"><span><code>undefined</code></span></td><td align="left" data-th="Description"><span>Files to <code>include</code></span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#exclude"><code>exclude</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{String\/RegExp|Array&lt;String|RegExp&gt;}</code></span></td><td align="center" data-th="Default"><span><code>undefined</code></span></td><td align="left" data-th="Description"><span>Files to <code>exclude</code></span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#filter"><code>filter</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{Function}</code></span></td><td align="center" data-th="Default"><span><code>() =&gt; true</code></span></td><td align="left" data-th="Description"><span>Allows filtering of images for optimization</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#severityError"><code>severityError</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{String}</code></span></td><td align="center" data-th="Default"><span><code>&#x27;error&#x27;</code></span></td><td align="left" data-th="Description"><span>Allows to choose how errors are displayed</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#minify"><code>minify</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{Function | Array&lt;Function&gt;}</code></span></td><td align="center" data-th="Default"><span><code>ImageMinimizerPlugin.imageminMinify</code></span></td><td align="left" data-th="Description"><span>Allows to override default minify function</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#minimizerOptions"><code>minimizerOptions</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{Object|Array&lt;Object&gt;}</code></span></td><td align="center" data-th="Default"><span><code>{ plugins: [] }</code></span></td><td align="left" data-th="Description"><span>Options for <code>imagemin</code></span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#loader"><code>loader</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{Boolean}</code></span></td><td align="center" data-th="Default"><span><code>true</code></span></td><td align="left" data-th="Description"><span>Automatically adding <code>imagemin-loader</code></span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#maxConcurrency"><code>maxConcurrency</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{Number}</code></span></td><td align="center" data-th="Default"><span><code>Math.max(1, os.cpus().length - 1)</code></span></td><td align="left" data-th="Description"><span>Maximum number of concurrency optimization processes in one time</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#filename"><code>filename</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{string|Function}</code></span></td><td align="center" data-th="Default"><span><code>&#x27;[path][name][ext]&#x27;</code></span></td><td align="left" data-th="Description"><span>Allows to set the filename for the generated asset. Useful for converting to a <code>webp</code></span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#deleteOriginalAssets"><code>deleteOriginalAssets</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{Boolean}</code></span></td><td align="center" data-th="Default"><span><code>false</code></span></td><td align="left" data-th="Description"><span>Allows to delete the original asset. Useful for converting to a <code>webp</code> and remove original assets</span></td></tr></tbody></table><h4><span id="test"></span><code>test</code><a href="#test" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>String|RegExp|Array&lt;String|RegExp&gt;</code>
Default: <code>/\.(jpe?g\|png\|gif\|tif\|webp\|svg\|avif)\$/i</code></p><p>Test to match files against.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="include"></span><code>include</code><a href="#include" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>String|RegExp|Array&lt;String|RegExp&gt;</code>
Default: <code>undefined</code></p><p>Files to include.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      include<span class="token operator">:</span> <span class="token regex">/\/includes/</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="exclude"></span><code>exclude</code><a href="#exclude" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>String|RegExp|Array&lt;String|RegExp&gt;</code>
Default: <code>undefined</code></p><p>Files to exclude.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      exclude<span class="token operator">:</span> <span class="token regex">/\/excludes/</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="filter"></span><code>filter</code><a href="#filter" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>Function</code>
Default: <code>() =&gt; true</code></p><p>Allows filtering of images for optimization.</p><p>Return <code>true</code> to optimize the image, <code>false</code> otherwise.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token function-variable function">filter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">source<span class="token punctuation">,</span> sourcePath</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// The `source` argument is a `Buffer` of source file</span>
        <span class="token comment">// The `sourcePath` argument is an absolute path to source</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>source<span class="token punctuation">.</span>byteLength <span class="token operator">&lt;</span> <span class="token number">8192</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="severityError"></span><code>severityError</code><a href="#severityError" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>String</code>
Default: <code>&#x27;error&#x27;</code></p><p>Allows to choose how errors are displayed.</p><p>Сan have the following values:</p><ul><li><code>&#x27;off&#x27;</code> - suppresses errors and warnings</li><li><code>&#x27;warning&#x27;</code> - emit warnings instead errors</li><li><code>&#x27;error&#x27;</code> - emit errors</li></ul><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      severityError<span class="token operator">:</span> <span class="token string">&#x27;warning&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="minify"></span><code>minify</code><a href="#minify" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>Function|Array&lt;Function&gt;</code>
Default: <code>ImageMinimizerPlugin.imageminMinify</code></p><p>Allows to override default minify function.
By default plugin uses <a href="https://github.com/imagemin/imagemin">imagemin</a> package.
Useful for using and testing unpublished versions or forks.</p><p>Аvailable minifiers:</p><ul><li>ImageMinimizerPlugin.imageminMinify</li><li>ImageMinimizerPlugin.squooshMinify</li></ul><h5><span id="Function"></span><code>Function</code><a href="#Function" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token function-variable function">minify</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> minimizerOptions</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">,</span> input<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">let</span> result<span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">minifyAndReturnBuffer</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// Return original input if there was an error</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> input<span class="token punctuation">,</span> errors<span class="token operator">:</span> <span class="token punctuation">[</span>error<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> result<span class="token punctuation">,</span> warnings<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> errors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h5><span id="Array"></span><code>Array</code><a href="#Array" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p>If an array of functions is passed to the <code>minify</code> option, the <code>minimizerOptions</code> can be an array or an object.
If <code>minimizerOptions</code> is array, the function index in the <code>minify</code> array corresponds to the options object with the same index in the <code>minimizerOptions</code> array.
If you use <code>minimizerOptions</code> like object, all <code>minify</code> function accept it.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      minify<span class="token operator">:</span> <span class="token punctuation">[</span>
        ImageMinimizerPlugin<span class="token punctuation">.</span>imageminMinify<span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> minimizerOptions</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">,</span> input<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token keyword">let</span> result<span class="token punctuation">;</span>

          <span class="token keyword">try</span> <span class="token punctuation">{</span>
            result <span class="token operator">=</span> <span class="token function">minifyAndReturnBuffer</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Return original input if there was an error</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> input<span class="token punctuation">,</span> errors<span class="token operator">:</span> <span class="token punctuation">[</span>error<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> result<span class="token punctuation">,</span> warnings<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> errors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// Options for the first function (ImageMinimizerPlugin.imageminMinify)</span>
        <span class="token punctuation">{</span>
          plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;gifsicle&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;mozjpeg&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;pngquant&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;svgo&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// Options for the second function</span>
        <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="minimizerOptions"></span><code>minimizerOptions</code><a href="#minimizerOptions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>Object|Array&lt;Object&gt;</code>
Default: <code>{ plugins: [] }</code></p><p>Options for <code>minify</code> functions. <a href="https://github.com/imagemin/imagemin"><code>imagemin</code></a> is default minify function.</p><p>More information and examples <a href="https://github.com/imagemin/imagemin">here</a>.</p><h5><span id="Object"></span><code>Object</code><a href="#Object" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token comment">// Name</span>
          <span class="token string">&#x27;gifsicle&#x27;</span><span class="token punctuation">,</span>
          <span class="token comment">// Name with options</span>
          <span class="token punctuation">[</span><span class="token string">&#x27;mozjpeg&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> quality<span class="token operator">:</span> <span class="token number">80</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token comment">// Full package name</span>
          <span class="token punctuation">[</span>
            <span class="token string">&#x27;imagemin-svgo&#x27;</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                  removeViewBox<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">[</span>
            <span class="token comment">// Custom package name</span>
            <span class="token string">&#x27;nonstandard-imagemin-package-name&#x27;</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> myOptions<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h5><span id="Array-1"></span><code>Array</code><a href="#Array-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p>The function index in the <code>minify</code> array corresponds to the options object with the same index in the <code>minimizerOptions</code> array.
If you use <code>minimizerOptions</code> like object, all <code>minify</code> function accept it.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      minify<span class="token operator">:</span> <span class="token punctuation">[</span>
        ImageMinimizerPlugin<span class="token punctuation">.</span>imageminMinify<span class="token punctuation">,</span>
        <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> minimizerOptions</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">,</span> input<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token keyword">let</span> result<span class="token punctuation">;</span>

          <span class="token keyword">try</span> <span class="token punctuation">{</span>
            result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">minifyAndReturnBuffer</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Return original input if there was an error</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> input<span class="token punctuation">,</span> errors<span class="token operator">:</span> <span class="token punctuation">[</span>error<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> result<span class="token punctuation">,</span> warnings<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> errors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// Options for the first function (ImageMinimizerPlugin.imageminMinify)</span>
        <span class="token punctuation">{</span>
          plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;gifsicle&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;mozjpeg&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;pngquant&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;svgo&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// Options for the second function</span>
        <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="loader"></span><code>loader</code><a href="#loader" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>Boolean</code>
Default: <code>true</code></p><p>Automatically adding <code>imagemin-loader</code>.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      loader<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="maxConcurrency"></span><code>maxConcurrency</code><a href="#maxConcurrency" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>Number</code>
Default: <code>Math.max(1, os.cpus().length - 1)</code></p><p>Maximum number of concurrency optimization processes in one time.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      maxConcurrency<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="filename"></span><code>filename</code><a href="#filename" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>String|Function</code>
Default: <code>&#x27;[path][name][ext]&#x27;</code></p><p>Allows to set the filename for the generated asset. Useful for converting to a <code>webp</code>.
Supported values see in <a href="/configuration/output/#template-strings"><code>webpack template strings</code></a>, <code>File-level</code> section.</p><h5><span id="String"></span><code>String</code><a href="#String" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// Images are converted to `webp` and the original assets have been kept</span>
    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.(png)$/i</span><span class="token punctuation">,</span>
      filename<span class="token operator">:</span> <span class="token string">&#x27;[path][name].webp&#x27;</span><span class="token punctuation">,</span>
      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;imagemin-webp&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h5><span id="Function-1"></span><code>Function</code><a href="#Function-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// Images are converted to `webp` and the original assets have been kept</span>
    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.(png)$/i</span><span class="token punctuation">,</span>
      <span class="token function-variable function">filename</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">pathData<span class="token punctuation">,</span> assetInfo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/imageLg/i</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>pathData<span class="token punctuation">.</span>filename<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token string">&#x27;./bigImages/[path][name].webp&#x27;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token string">&#x27;[path][name].webp&#x27;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;imagemin-webp&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h5><span id="Converting-to-webp-using-ImageMinimizerPluginsquooshMinify"></span>Converting to <code>webp</code> using <code>ImageMinimizerPlugin.squooshMinify</code><a href="#Converting-to-webp-using-ImageMinimizerPluginsquooshMinify" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
const defaultTargets = {
  &quot;.png&quot;: &quot;oxipng&quot;,
  &quot;.jpg&quot;: &quot;mozjpeg&quot;,
  &quot;.jpeg&quot;: &quot;mozjpeg&quot;,
  &quot;.jxl&quot;: &quot;jxl&quot;,
  &quot;.webp&quot;: &quot;webp&quot;,
  &quot;.avif&quot;: &quot;avif&quot;,
};
*/</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// Images are converted to `webp` and the original assets have been kept</span>
    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.(png)$/i</span><span class="token punctuation">,</span>
      filename<span class="token operator">:</span> <span class="token string">&#x27;[path][name].webp&#x27;</span><span class="token punctuation">,</span>
      minify<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>squooshMinify<span class="token punctuation">,</span>
      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        targets<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">&#x27;.png&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;webp&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="deleteOriginalAssets"></span><code>deleteOriginalAssets</code><a href="#deleteOriginalAssets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>Boolean</code>
Default: <code>false</code></p><p>Allows to remove original assets. Useful for converting to a <code>webp</code> and remove original assets</p><blockquote><p>ℹ️ Doesn&#x27;t make sense if you haven&#x27;t changed the original value of the <code>filename</code> option</p></blockquote><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// Images are converted to `webp` and the original assets have been removed</span>
    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.(png)$/i</span><span class="token punctuation">,</span>
      deleteOriginalAssets<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      filename<span class="token operator">:</span> <span class="token string">&#x27;[path][name].webp&#x27;</span><span class="token punctuation">,</span>
      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;imagemin-webp&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>To generate and compress the original assets:</p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// And the original assets will be compressed</span>
    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.(png)$/i</span><span class="token punctuation">,</span>
      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;pngquant&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// Images are converted to `webp` and the original assets have been removed</span>
    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.(png)$/i</span><span class="token punctuation">,</span>
      deleteOriginalAssets<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      filename<span class="token operator">:</span> <span class="token string">&#x27;[path][name].webp&#x27;</span><span class="token punctuation">,</span>
      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;imagemin-webp&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="Loader-Options"></span>Loader Options<a href="#Loader-Options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><table><thead><tr><th align="center">Name</th><th align="center">Type</th><th align="center">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center" data-th="Name"><span><strong><a href="#filter-1"><code>filter</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{Function}</code></span></td><td align="center" data-th="Default"><span><code>undefined</code></span></td><td align="left" data-th="Description"><span>Allows filtering of images for optimization</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="https://github.com/webpack-contrib/image-minimizer-webpack-plugin/blob/master/severityError-1"><code>severityError</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{String}</code></span></td><td align="center" data-th="Default"><span><code>&#x27;error&#x27;</code></span></td><td align="left" data-th="Description"><span>Allows to choose how errors are displayed</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#minify-1"><code>minify</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{Function | Array&lt;Function&gt;}</code></span></td><td align="center" data-th="Default"><span><code>ImageMinimizerPlugin.imageminMinify</code></span></td><td align="left" data-th="Description"><span>Allows to override default minify function</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#minimizerOptions"><code>minimizerOptions</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{Object|Array&lt;Object&gt;}</code></span></td><td align="center" data-th="Default"><span><code>{ plugins: [] }</code></span></td><td align="left" data-th="Description"><span>Options for <code>imagemin</code></span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#filename-1"><code>filename</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{string|Function}</code></span></td><td align="center" data-th="Default"><span><code>&#x27;[path][name][ext]&#x27;</code></span></td><td align="left" data-th="Description"><span>Allows to set the filename for the generated asset. Useful for converting to a <code>webp</code></span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#deleteOriginalAssets-1"><code>deleteOriginalAssets</code></a></strong></span></td><td align="center" data-th="Type"><span><code>{Boolean}</code></span></td><td align="center" data-th="Default"><span><code>false</code></span></td><td align="left" data-th="Description"><span>Allows to delete the original asset. Useful for converting to a <code>webp</code> and remove original assets</span></td></tr></tbody></table><h4><span id="filter-1"></span><code>filter</code><a href="#filter-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>Function</code>
Default: <code>() =&gt; true</code></p><p>Allows filtering of images for optimization.</p><p>Return <code>true</code> to optimize the image, <code>false</code> otherwise.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;asset&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              cache<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              <span class="token function-variable function">filter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">source<span class="token punctuation">,</span> sourcePath</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token comment">// The `source` argument is a `Buffer` of source file</span>
                <span class="token comment">// The `sourcePath` argument is an absolute path to source</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>source<span class="token punctuation">.</span>byteLength <span class="token operator">&lt;</span> <span class="token number">8192</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
              minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
                plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;gifsicle&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="severityError-1"></span><code>severityError</code><a href="#severityError-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>String</code>
Default: <code>&#x27;error&#x27;</code></p><p>Allows to choose how errors are displayed.</p><p>Сan have the following values:</p><ul><li><code>&#x27;off&#x27;</code> - suppresses errors and warnings</li><li><code>&#x27;warning&#x27;</code> - emit warnings instead errors</li><li><code>&#x27;error&#x27;</code> - emit errors</li></ul><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;asset&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              severityError<span class="token operator">:</span> <span class="token string">&#x27;warning&#x27;</span><span class="token punctuation">,</span>
              minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
                plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;gifsicle&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="minify-1"></span><code>minify</code><a href="#minify-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>Function|Array&lt;Function&gt;</code>
Default: <code>ImageMinimizerPlugin.imageminMinify</code></p><p>Allows to override default minify function.
By default plugin uses <a href="https://github.com/imagemin/imagemin">imagemin</a> package.
Useful for using and testing unpublished versions or forks.</p><p>Аvailable minifiers:</p><ul><li>ImageMinimizerPlugin.imageminMinify</li><li>ImageMinimizerPlugin.squooshMinify</li></ul><h5><span id="Function-2"></span><code>Function</code><a href="#Function-2" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;asset&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token function-variable function">minify</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> minimizerOptions</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">,</span> input<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token keyword">let</span> result<span class="token punctuation">;</span>

                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                  result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">minifyAndReturnBuffer</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token comment">// Return original input if there was an error</span>
                  <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> input<span class="token punctuation">,</span> errors<span class="token operator">:</span> <span class="token punctuation">[</span>error<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> result<span class="token punctuation">,</span> warnings<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> errors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
              minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h5><span id="Array-2"></span><code>Array</code><a href="#Array-2" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p>If an array of functions is passed to the <code>minify</code> option, the <code>minimizerOptions</code> can be an array or an object.
If <code>minimizerOptions</code> is array, the function index in the <code>minify</code> array corresponds to the options object with the same index in the <code>minimizerOptions</code> array.
If you use <code>minimizerOptions</code> like object, all <code>minify</code> function accept it.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;asset&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              minify<span class="token operator">:</span> <span class="token punctuation">[</span>
                ImageMinimizerPlugin<span class="token punctuation">.</span>imageminMinify<span class="token punctuation">,</span>
                <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> minimizerOptions</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                  <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">,</span> input<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

                  <span class="token keyword">let</span> result<span class="token punctuation">;</span>

                  <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">minifyAndReturnBuffer</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// Return original input if there was an error</span>
                    <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> input<span class="token punctuation">,</span> errors<span class="token operator">:</span> <span class="token punctuation">[</span>error<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
                  <span class="token punctuation">}</span>

                  <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> result<span class="token punctuation">,</span> warnings<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> errors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token punctuation">]</span><span class="token punctuation">,</span>
              minimizerOptions<span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token comment">// Options for the first function (ImageMinimizerPlugin.imageminMinify)</span>
                <span class="token punctuation">{</span>
                  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;gifsicle&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;mozjpeg&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;pngquant&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;svgo&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token comment">// Options for the second function</span>
                <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="minimizerOptions-1"></span><code>minimizerOptions</code><a href="#minimizerOptions-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>Object|Array&lt;Object&gt;</code>
Default: <code>{ plugins: [] }</code></p><p>Options for <code>minify</code> functions. <a href="https://github.com/imagemin/imagemin"><code>imagemin</code></a> is default minify function.</p><p>More information and examples <a href="https://github.com/imagemin/imagemin">here</a>.</p><h5><span id="Object-1"></span><code>Object</code><a href="#Object-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;asset&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
                plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
                  <span class="token punctuation">[</span><span class="token string">&#x27;gifsicle&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> interlaced<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> optimizationLevel<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h5><span id="Array-3"></span><code>Array</code><a href="#Array-3" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p>The function index in the <code>minify</code> array corresponds to the options object with the same index in the <code>minimizerOptions</code> array.
If you use <code>minimizerOptions</code> like object, all <code>minify</code> function accept it.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;asset&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              minify<span class="token operator">:</span> <span class="token punctuation">[</span>
                ImageMinimizerPlugin<span class="token punctuation">.</span>imageminMinify<span class="token punctuation">,</span>
                <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> minimizerOptions</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                  <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">,</span> input<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

                  <span class="token keyword">let</span> result<span class="token punctuation">;</span>

                  <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">minifyAndReturnBuffer</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// Return original input if there was an error</span>
                    <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> input<span class="token punctuation">,</span> errors<span class="token operator">:</span> <span class="token punctuation">[</span>error<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
                  <span class="token punctuation">}</span>

                  <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> result<span class="token punctuation">,</span> warnings<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> errors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token punctuation">]</span><span class="token punctuation">,</span>
              minimizerOptions<span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token comment">// Options for the first function (ImageMinimizerPlugin.imageminMinify)</span>
                <span class="token punctuation">{</span>
                  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">[</span><span class="token string">&#x27;gifsicle&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> interlaced<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> optimizationLevel<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                  <span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token comment">// Options for the second function</span>
                <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="filename-1"></span><code>filename</code><a href="#filename-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>String|Function</code>
Default: <code>&#x27;[path][name][ext]&#x27;</code></p><p>Allows to set the filename for the generated asset. Useful for converting to a <code>webp</code>.
Supported values see in <a href="/configuration/output/#template-strings"><code>webpack template strings</code></a>, <code>File-level</code> section.</p><h5><span id="String-1"></span><code>String</code><a href="#String-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(jpe?g|png|gif)$/i</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            test<span class="token operator">:</span> <span class="token regex">/\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>
            type<span class="token operator">:</span> <span class="token string">&#x27;asset&#x27;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              filename<span class="token operator">:</span> <span class="token string">&#x27;[path][name].webp&#x27;</span><span class="token punctuation">,</span>
              minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
                plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;imagemin-webp&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h5><span id="Function-3"></span><code>Function</code><a href="#Function-3" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(jpe?g|png|gif)$/i</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            test<span class="token operator">:</span> <span class="token regex">/\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>
            type<span class="token operator">:</span> <span class="token string">&#x27;asset&#x27;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token function-variable function">filename</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">pathData<span class="token punctuation">,</span> assetInfo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/imageLg/i</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>pathData<span class="token punctuation">.</span>filename<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token keyword">return</span> <span class="token string">&#x27;./bigImages/[path][name].webp&#x27;</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token keyword">return</span> <span class="token string">&#x27;[path][name].webp&#x27;</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
              minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
                plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;imagemin-webp&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="deleteOriginalAssets-1"></span><code>deleteOriginalAssets</code><a href="#deleteOriginalAssets-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>Boolean</code>
Default: <code>false</code></p><p>Allows to keep the original asset. Useful for converting to a <code>webp</code> and remove original assets.</p><blockquote><p>ℹ️ Doesn&#x27;t make sense if you haven&#x27;t changed the original value of the <code>filename</code> option</p></blockquote><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(png)$/i</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            test<span class="token operator">:</span> <span class="token regex">/\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>
            type<span class="token operator">:</span> <span class="token string">&#x27;asset&#x27;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token comment">// PNG images are converted to WEBP, and the originals will keep</span>
              deleteOriginalAssets<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              filename<span class="token operator">:</span> <span class="token string">&#x27;[path][name].webp&#x27;</span><span class="token punctuation">,</span>
              minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
                plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;imagemin-webp&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="Additional-API"></span>Additional API<a href="#Additional-API" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><h3><span id="imageminNormalizeConfigconfig"></span><code>imageminNormalizeConfig(config)</code><a href="#imageminNormalizeConfigconfig" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>The function normalizes configuration (converts plugins names and options to <code>Function</code>s) for using in <code>imagemin</code> package directly.</p><pre><code class="hljs language-js"><span class="token keyword">const</span> imagemin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;imagemin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> imageminNormalizeConfig <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> imageminConfig <span class="token operator">=</span> <span class="token function">imageminNormalizeConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&#x27;jpegtran&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>
      <span class="token string">&#x27;pngquant&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        quality<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/*
  console.log(imageminConfig);
  =&gt;
  {
    plugins: [Function, Function],
    pluginsMeta: [
      { name: &quot;imagemin-jpegtran&quot;, version: &quot;x.x.x&quot;, options: {} },
      { name: &quot;imagemin-pngquant&quot;, version: &quot;x.x.x&quot;, options: { quality: [0.6, 0.8] }
    ]
  }
*/</span>

<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> files <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">imagemin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;images/*.{jpg,png}&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    destination<span class="token operator">:</span> <span class="token string">&#x27;build/images&#x27;</span><span class="token punctuation">,</span>
    plugins<span class="token operator">:</span> imageminConfig<span class="token punctuation">.</span>plugins<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// =&gt; [{data: &lt;Buffer 89 50 4e …&gt;, path: &#x27;build/images/foo.jpg&#x27;}, …]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="Examples"></span>Examples<a href="#Examples" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><h3><span id="Optimize-images-based-on-size"></span>Optimize images based on size<a href="#Optimize-images-based-on-size" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>You can use difference options (like <code>progressive</code>/<code>interlaced</code> and etc) based on image size (example - don&#x27;t do progressive transformation for small images).</p><p>What is <code>progressive</code> image? <a href="https://jmperezperez.com/medium-image-progressive-loading-placeholder/"><code>Answer here</code></a>.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// Only apply this one to files equal to or over 8192 bytes</span>
      <span class="token function-variable function">filter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>source<span class="token punctuation">.</span>byteLength <span class="token operator">&gt;=</span> <span class="token number">8192</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#x27;jpegtran&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> progressive<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// Only apply this one to files under 8192</span>
      <span class="token function-variable function">filter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>source<span class="token punctuation">.</span>byteLength <span class="token operator">&lt;</span> <span class="token number">8192</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#x27;jpegtran&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> progressive<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="Optimize-and-transform-images-to-webp"></span>Optimize and transform images to <code>webp</code><a href="#Optimize-and-transform-images-to-webp" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;image-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;pngquant&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      deleteOriginalAssets<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      filename<span class="token operator">:</span> <span class="token string">&#x27;[path][name].webp&#x27;</span><span class="token punctuation">,</span>
      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;imagemin-webp&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="Contributing"></span>Contributing<a href="#Contributing" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>Please take a moment to read our contributing guidelines if you haven&#x27;t yet done so.</p><p><a href="https://github.com/webpack-contrib/image-minimizer-webpack-plugin/blob/master/.github/CONTRIBUTING.md">CONTRIBUTING</a></p><h2><span id="License"></span>License<a href="#License" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><a href="https://github.com/webpack-contrib/image-minimizer-webpack-plugin/blob/master/LICENSE">MIT</a></p><h1><span id="InstallWebpackPlugin"></span>InstallWebpackPlugin<a href="#InstallWebpackPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p><a href="https://npmjs.com/package/install-webpack-plugin"><img src="https://img.shields.io/npm/v/install-webpack-plugin.svg" alt="npm"/></a>
<a href="https://david-dm.org/webpack-contrib/install-webpack-plugin"><img src="https://david-dm.org/webpack-contrib/install-webpack-plugin.svg" alt="deps"/></a>
<a href="https://travis-ci.org/webpack-contrib/install-webpack-plugin"><img src="https://travis-ci.org/webpack-contrib/install-webpack-plugin.svg?branch=master" alt="test"/></a>
<a href="https://codecov.io/gh/webpack-contrib/install-webpack-plugin"><img src="https://codecov.io/gh/webpack-contrib/install-webpack-plugin/branch/master/graph/badge.svg" alt="coverage"/></a>
<a href="https://gitter.im/webpack/webpack"><img src="https://img.shields.io/badge/gitter-webpack%2Fwebpack-brightgreen.svg" alt="chat"/></a></p><div align="center"><p><p>Speed up development by<!-- --> <!-- -->
<b>automatically installing &amp; saving dependencies</b> with Webpack.</p></p></div><p>It is inefficient to <kbd>Ctrl-C</kbd> your
build script &amp; server just to install
a dependency you didn&#x27;t know you needed until now.</p><p>Instead, use <code>require</code> or <code>import</code> how you normally would and installation
will happen <strong>automatically to install &amp; save missing dependencies</strong> while you work!</p><pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev install-webpack-plugin</code></pre><h1><span id="Usage"></span>Usage<a href="#Usage" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1><p>In your <code>webpack.config.js</code>:</p><pre><code class="hljs language-js">plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">InstallPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span></code></pre><p><strong>This is equivalent to</strong>:</p><pre><code class="hljs language-js">plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">InstallPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    dependencies<span class="token operator">:</span> <span class="token punctuation">{</span>
      peer<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    packageManager<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getDefaultPackageManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">{</span>
        dev<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        quiet<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    prompt<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span></code></pre><h1><span id="Options"></span>Options<a href="#Options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1><h2><span id="dependencies"></span>dependencies<a href="#dependencies" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><strong>Type:</strong> <code>Object</code></p><p>Dependencies related options.</p><h3><span id="peer"></span>peer<a href="#peer" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><strong>Type:</strong> <code>Boolean</code></p><p><strong>Default:</strong> <code>true</code></p><p>Install missing peer dependencies.</p><pre><code class="hljs language-js">plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">InstallPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    dependencies<span class="token operator">:</span> <span class="token punctuation">{</span>
      peer<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span></code></pre><h2><span id="packageManager"></span>packageManager<a href="#packageManager" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><strong>Type:</strong> <code>&#x27;npm&#x27; | &#x27;yarn&#x27; | &#x27;pnpm&#x27; | Object | Function</code></p><p>Package manager to use for installing dependencies.</p><pre><code class="hljs language-js">plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">InstallPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      packageManager<span class="token operator">:</span> <span class="token string">&#x27;yarn&#x27;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span></code></pre><p>You can provide a <code>Function</code> to the <code>packageManager</code> to make it dynamic:</p><pre><code class="hljs language-js">plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">InstallPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">packageManager</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;babel-preset-react-hmre&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;webpack-dev-middleware&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;webpack-hot-middleware&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span></code></pre><h3><span id="type"></span>type<a href="#type" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><strong>Type:</strong> <code>&#x27;npm&#x27; | &#x27;yarn&#x27; | &#x27;pnpm&#x27;</code></p><p>Name of package manager to use for installing dependencies.</p><h3><span id="options"></span>options<a href="#options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><strong>Type:</strong> <code>Object</code></p><p>Package manager related options.</p><h3><span id="arguments"></span>arguments<a href="#arguments" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><strong>Type:</strong> <code>Array</code></p><p>Provide custom arguments to use with package manager.</p><pre><code class="hljs language-js">plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">InstallPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      packageManager<span class="token operator">:</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;npm&#x27;</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          arguments<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;--ignore-scripts&#x27;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span></code></pre><h3><span id="dev"></span>dev<a href="#dev" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><strong>Type:</strong> <code>Boolean</code></p><p><strong>Default:</strong> <code>false</code></p><p>Install as development dependencies.</p><pre><code class="hljs language-js">plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">InstallPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      packageManager<span class="token operator">:</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;npm&#x27;</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          dev<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span></code></pre><h3><span id="quiet"></span>quiet<a href="#quiet" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><strong>Type:</strong> <code>Boolean</code></p><p><strong>Default:</strong> <code>false</code></p><p>Reduce the amount of console logging.</p><pre><code class="hljs language-js">plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">InstallPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      packageManager<span class="token operator">:</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;npm&#x27;</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          quiet<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span></code></pre><h2><span id="prompt"></span>prompt<a href="#prompt" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><strong>Type:</strong> <code>Boolean</code></p><p><strong>Default:</strong> <code>true</code></p><p>Show a prompt to confirm installation.</p><pre><code class="hljs language-js">plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">InstallPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      prompt<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span></code></pre><h1><span id="Demo"></span>Demo<a href="#Demo" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1><p><img src="https://cloud.githubusercontent.com/assets/15182/12540538/6a4e8f1a-c2d0-11e5-97ee-4ddaf6892645.gif" alt="install-webpack-plugin demo"/></p><h1><span id="Features"></span>Features<a href="#Features" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1><ul class="contains-task-list"><li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->Works with webpack <code>^v5.0.0</code>.</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->Auto-installs <code>.babelrc</code> plugins &amp; presets.</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->Supports both ES5 &amp; ES6 Modules.
(e.g. <code>require</code>, <code>import</code>)</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->Supports Namespaced packages.
(e.g. <code>@cycle/dom</code>)</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->Supports Dot-delimited packages.
(e.g. <code>lodash.capitalize</code>)</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->Supports CSS imports.
(e.g. <code>@import &quot;~bootstrap&quot;</code>)</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->Supports webpack loaders.
(e.g. <code>babel-loader</code>, <code>file-loader</code>, etc.)</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->Supports inline webpack loaders.
(e.g. <code>require(&quot;bundle?lazy!./App&quot;</code>)</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->Auto-installs missing <code>peerDependencies</code>.
(e.g. <code>@cycle/core</code> will automatically install <code>rx@*</code>)</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->Supports webpack&#x27;s <code>resolve.alias</code> &amp; <code>resolve.root</code> configuration.
(e.g. <code>require(&quot;react&quot;)</code> can alias to <code>react-lite</code>)</li></ul><h2><span id="Contributing"></span>Contributing<a href="#Contributing" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>Please take a moment to read our contributing guidelines if you haven&#x27;t yet done so.</p><p><a href="https://github.com/webpack-contrib/install-webpack-plugin/blob/master/.github/CONTRIBUTING.md">CONTRIBUTING</a></p><h1><span id="插件"></span>插件<a href="#%E6%8F%92%E4%BB%B6" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>Webpack 拥有丰富的插件接口。webpack 自身的大部分功能都使用这些插件接口。这使得 webpack 很<strong>灵活</strong>。</p><table><thead><tr><th>插件</th><th>描述</th></tr></thead><tbody><tr><td data-th="插件"><span><a href="/plugins/banner-plugin"><code>BannerPlugin</code></a></span></td><td data-th="描述"><span>为每个 chunk 文件头部添加 banner</span></td></tr><tr><td data-th="插件"><span><a href="/plugins/commons-chunk-plugin"><code>CommonsChunkPlugin</code></a></span></td><td data-th="描述"><span>提取 chunk 之间的公共模块用以共享</span></td></tr><tr><td data-th="插件"><span><a href="/plugins/compression-webpack-plugin"><code>CompressionWebpackPlugin</code></a></span></td><td data-th="描述"><span>准备好用 Content-Encoding 格式传送的压缩版资源包</span></td></tr><tr><td data-th="插件"><span><a href="/plugins/context-replacement-plugin"><code>ContextReplacementPlugin</code></a></span></td><td data-th="描述"><span>重写 require 表达式的推断上下文</span></td></tr><tr><td data-th="插件"><span><a href="/plugins/copy-webpack-plugin"><code>CopyWebpackPlugin</code></a></span></td><td data-th="描述"><span>复制某个文件或整个文件夹到生成目录中</span></td></tr><tr><td data-th="插件"><span><a href="/plugins/define-plugin"><code>DefinePlugin</code></a></span></td><td data-th="描述"><span>允许创建一个在编译时可配置的全局常量</span></td></tr><tr><td data-th="插件"><span><a href="/plugins/dll-plugin"><code>DllPlugin</code></a></span></td><td data-th="描述"><span>拆分 bundles，从而大幅减少构建时间</span></td></tr><tr><td data-th="插件"><span><a href="/plugins/environment-plugin"><code>EnvironmentPlugin</code></a></span></td><td data-th="描述"><span>在 <code>process.env</code> 键上使用 <a href="/plugins/define-plugin"><code>DefinePlugin</code></a> 的简写方式</span></td></tr><tr><td data-th="插件"><span><a href="/plugins/eslint-webpack-plugin"><code>EslintWebpackPlugin</code></a></span></td><td data-th="描述"><span>webpack 的 ESLint 插件</span></td></tr><tr><td data-th="插件"><span><a href="/plugins/hot-module-replacement-plugin"><code>HotModuleReplacementPlugin</code></a></span></td><td data-th="描述"><span>启用热更新 (HMR)</span></td></tr><tr><td data-th="插件"><span><a href="/plugins/html-webpack-plugin"><code>HtmlWebpackPlugin</code></a></span></td><td data-th="描述"><span>快速创建 HTML 文件来服务 bundles</span></td></tr><tr><td data-th="插件"><span><a href="/plugins/ignore-plugin"><code>IgnorePlugin</code></a></span></td><td data-th="描述"><span>从 bundles 包中移除某些模块</span></td></tr><tr><td data-th="插件"><span><a href="/plugins/limit-chunk-count-plugin"><code>LimitChunkCountPlugin</code></a></span></td><td data-th="描述"><span>设置 chunk 的最小/最大限制，以便更好的控制 chunk</span></td></tr><tr><td data-th="插件"><span><a href="/plugins/min-chunk-size-plugin"><code>MinChunkSizePlugin</code></a></span></td><td data-th="描述"><span>确保 chunk 大小在指定限制之上</span></td></tr><tr><td data-th="插件"><span><a href="/plugins/mini-css-extract-plugin"><code>MiniCssExtractPlugin</code></a></span></td><td data-th="描述"><span>为每一个包含了 CSS 的 JS 文件创建一个 CSS 文件</span></td></tr><tr><td data-th="插件"><span><a href="/configuration/optimization/#optimizationemitonerrors"><code>NoEmitOnErrorsPlugin</code></a></span></td><td data-th="描述"><span>出现编译错误时，跳过输出阶段</span></td></tr><tr><td data-th="插件"><span><a href="/plugins/normal-module-replacement-plugin"><code>NormalModuleReplacementPlugin</code></a></span></td><td data-th="描述"><span>替换与正则表达式匹配的资源</span></td></tr><tr><td data-th="插件"><span><a href="/plugins/install-webpack-plugin"><code>NpmInstallWebpackPlugin</code></a></span></td><td data-th="描述"><span>开发时自动安装缺少的依赖</span></td></tr><tr><td data-th="插件"><span><a href="/plugins/progress-plugin"><code>ProgressPlugin</code></a></span></td><td data-th="描述"><span>报告编译进度</span></td></tr><tr><td data-th="插件"><span><a href="/plugins/provide-plugin"><code>ProvidePlugin</code></a></span></td><td data-th="描述"><span>使用模块但无需使用 import/require</span></td></tr><tr><td data-th="插件"><span><a href="/plugins/source-map-dev-tool-plugin"><code>SourceMapDevToolPlugin</code></a></span></td><td data-th="描述"><span>对 source map 进行更细颗粒度的控制</span></td></tr><tr><td data-th="插件"><span><a href="/plugins/eval-source-map-dev-tool-plugin"><code>EvalSourceMapDevToolPlugin</code></a></span></td><td data-th="描述"><span>对 eval source map 进行更细颗粒度的控制</span></td></tr><tr><td data-th="插件"><span><a href="/plugins/terser-webpack-plugin/"><code>TerserPlugin</code></a></span></td><td data-th="描述"><span>在你的项目中使用 Terser 插件来压缩 JS</span></td></tr></tbody></table><p>查找更多第三方插件，请参阅 <a href="/awesome-webpack/#Webpack-Plugins">awesome-webpack</a>。</p><h1><span id="Internal-webpack-plugins"></span>Internal webpack plugins<a href="#Internal-webpack-plugins" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>This is a list of plugins which are used by webpack internally.</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p>You should only care about them if you are building your own compiler based on webpack, or introspect the internals.</p></aside><p>Categories of internal plugins:</p><ul><li><a href="#environment">environment</a></li><li><a href="#compiler">compiler</a></li><li><a href="#entry">entry</a></li><li><a href="#output">output</a></li><li><a href="#source">source</a></li><li><a href="#optimize">optimize</a></li></ul><h2><span id="environment"></span>environment<a href="#environment" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>Plugins affecting the environment of the compiler.</p><h3><span id="nodeenvironmentplugin"></span>NodeEnvironmentPlugin<a href="#nodeenvironmentplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>webpack.node.NodeEnvironmentPlugin()</code></p><p>Applies Node.js style filesystem to the compiler.</p><h2><span id="compiler"></span>compiler<a href="#compiler" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>Plugins affecting the compiler</p><h3><span id="memorycacheplugin"></span>MemoryCachePlugin<a href="#memorycacheplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>MemoryCachePlugin()</code></p><p>Adds a cache to the compiler, where modules are cached in memory.</p><h3><span id="progressplugin"></span>ProgressPlugin<a href="#progressplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>ProgressPlugin(handler)</code></p><p>Hook into the compiler to extract progress information. The <code>handler</code> must have the signature <code>function(percentage, message)</code>. Percentage is called with a value between 0 and 1, where 0 indicates the start and 1 the end.</p><h3><span id="recordidsplugin"></span>RecordIdsPlugin<a href="#recordidsplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>RecordIdsPlugin()</code></p><p>Saves and restores module and chunk ids from records.</p><h2><span id="entry"></span>entry<a href="#entry" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>Plugins, which add entry chunks to the compilation.</p><h3><span id="entryplugin"></span>EntryPlugin<a href="#entryplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>EntryPlugin(context, entry, options)</code></p><p>Adds an entry chunk on compilation. The chunk is named <code>options.name</code> and contains only one module (plus dependencies). The module is resolved from <code>entry</code> in <code>context</code> (absolute path).</p><h3><span id="prefetchplugin"></span>PrefetchPlugin<a href="#prefetchplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>PrefetchPlugin(context, request)</code></p><p>Prefetches <code>request</code> and dependencies to enable a more parallel compilation. It doesn&#x27;t create any chunk. The module is resolved from <code>request</code> in <code>context</code> (absolute path).</p><h2><span id="output"></span>output<a href="#output" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><h3><span id="jsonptemplateplugin"></span>JsonpTemplatePlugin<a href="#jsonptemplateplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>JsonpTemplatePlugin(options)</code></p><p>Chunks are wrapped into JSONP-calls. A loading algorithm is included in entry chunks. It loads chunks by adding a <code>&lt;script&gt;</code> tag.</p><p><code>options</code> are the output options.</p><p><code>options.jsonpFunction</code> is the JSONP function.</p><p><code>options.publicPath</code> is used as path for loading the chunks.</p><p><code>options.chunkFilename</code> is the filename under that chunks are expected.</p><h3><span id="nodetemplateplugin"></span>NodeTemplatePlugin<a href="#nodetemplateplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>node/NodeTemplatePlugin(options)</code></p><p>Chunks are wrapped into Node.js modules exporting the bundled modules. The entry chunks loads chunks by requiring them.</p><p><code>options</code> are the output options.</p><p><code>options.chunkFilename</code> is the filename under that chunks are expected.</p><h3><span id="librarytemplateplugin"></span>LibraryTemplatePlugin<a href="#librarytemplateplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>LibraryTemplatePlugin(name, target)</code></p><p>The entries chunks are decorated to form a library <code>name</code> of type <code>type</code>.</p><h3><span id="webworkertemplateplugin"></span>WebWorkerTemplatePlugin<a href="#webworkertemplateplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>webworker/WebWorkerTemplatePlugin(options)</code></p><p>Chunks are loaded by <code>importScripts</code>. Else it&#x27;s similar to <a href="#jsonptemplateplugin"><code>JsonpTemplatePlugin</code></a>.</p><p><code>options</code> are the output options.</p><h3><span id="evaldevtoolmoduleplugin"></span>EvalDevToolModulePlugin<a href="#evaldevtoolmoduleplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Decorates the module template by wrapping each module in a <code>eval</code> annotated with <code>// @sourceURL</code>.</p><h3><span id="sourcemapdevtoolplugin"></span>SourceMapDevToolPlugin<a href="#sourcemapdevtoolplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>SourceMapDevToolPlugin(sourceMapFilename, sourceMappingURLComment, moduleFilenameTemplate, fallbackModuleFilenameTemplate)</code></p><p>Decorates the templates by generating a SourceMap for each chunk.</p><p><code>sourceMapFilename</code> the filename template of the SourceMap. <code>[hash]</code>, <code>[name]</code>, <code>[id]</code>, <code>[file]</code> and <code>[filebase]</code> are replaced. If this argument is missing, the SourceMap will be inlined as DataUrl.</p><h3><span id="hotmodulereplacementplugin"></span>HotModuleReplacementPlugin<a href="#hotmodulereplacementplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>HotModuleReplacementPlugin(options)</code></p><p>Add support for hot module replacement. Decorates the templates to add runtime code. Adds <code>module.hot</code> API.</p><p><code>options.hotUpdateChunkFilename</code> the filename for hot update chunks.</p><p><code>options.hotUpdateMainFilename</code> the filename for the hot update manifest.</p><p><code>options.hotUpdateFunction</code> JSON function name for the hot update.</p><h2><span id="source"></span>source<a href="#source" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>Plugins affecting the source code of modules.</p><h3><span id="apiplugin"></span>APIPlugin<a href="#apiplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Make webpack_public_path, webpack_require, webpack_modules and webpack_chunk_load accessible. Ensures that <code>require.valueOf</code> and <code>require.onError</code> are not processed by other plugins.</p><h3><span id="compatibilityplugin"></span>CompatibilityPlugin<a href="#compatibilityplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Currently useless. Ensures compatibility with other module loaders.</p><h3><span id="constplugin"></span>ConstPlugin<a href="#constplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Tries to evaluate expressions in <code>if (...)</code> statements and ternaries to replace them with <code>true</code>/<code>false</code> for further possible dead branch elimination using hooks fired by the parser.</p><p>There are multiple optimizations in production mode regarding dead branches:</p><ul><li>The ones performed by <a href="https://github.com/fabiosantoscode/terser">Terser</a></li><li>The ones performed by webpack</li></ul><p>Webpack will try to evaluate conditional statements. If it succeeds then the dead branch is removed. Webpack can&#x27;t do constant folding unless the compiler knows it. For example:</p><pre><code class="hljs language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> calculateTax <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;./tax&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">FOO</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">FOO</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// dead branch</span>
  <span class="token function">calculateTax</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>In the above example, webpack is unable to prune the branch, but Terser does. However, if <code>FOO</code> is defined using <a href="/plugins/define-plugin/">DefinePlugin</a>, webpack will succeed.</p><p>It is important to mention that <code>import { calculateTax } from &#x27;./tax&#x27;;</code> will also get pruned because <code>calculateTax()</code> call was in the dead branch and got eliminated.</p><h3><span id="provideplugin"></span>ProvidePlugin<a href="#provideplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>ProvidePlugin(name, request)</code></p><p>If <code>name</code> is used in a module it is filled by a module loaded by <code>require(&lt;request&gt;)</code>.</p><h3><span id="nodestuffplugin"></span>NodeStuffPlugin<a href="#nodestuffplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>NodeStuffPlugin(options, context)</code></p><p>Provide stuff that is normally available in Node.js modules.</p><p>It also ensures that <code>module</code> is filled with some Node.js stuff if you use it.</p><h3><span id="requirejsstuffplugin"></span>RequireJsStuffPlugin<a href="#requirejsstuffplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Provide stuff that is normally available in require.js.</p><p><code>require[js].config</code> is removed. <code>require.version</code> is <code>0.0.0</code>. <code>requirejs.onError</code> is mapped to <code>require.onError</code>.</p><h3><span id="nodesourceplugin"></span>NodeSourcePlugin<a href="#nodesourceplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>node/NodeSourcePlugin(options)</code></p><p>This module adds stuff from Node.js that is not available in non Node.js environments.</p><p>It adds polyfills for <code>process</code>, <code>console</code>, <code>Buffer</code> and <code>global</code> if used. It also binds the built in Node.js replacement modules.</p><h3><span id="nodetargetplugin"></span>NodeTargetPlugin<a href="#nodetargetplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>node/NodeTargetPlugin()</code></p><p>The plugins should be used if you run the bundle in a Node.js environment.</p><p>If ensures that native modules are loaded correctly even if bundled.</p><h3><span id="amdplugin"></span>AMDPlugin<a href="#amdplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>dependencies/AMDPlugin(options)</code></p><p>Provides AMD-style <code>define</code> and <code>require</code> to modules. Also bind <code>require.amd</code>, <code>define.amd</code> and webpack_amd_options## to the <code>options</code> passed as parameter.</p><h3><span id="commonjsplugin"></span>CommonJsPlugin<a href="#commonjsplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>dependencies/CommonJsPlugin</code></p><p>Provides CommonJs-style <code>require</code> to modules.</p><h3><span id="requirecontextplugin"></span>RequireContextPlugin<a href="#requirecontextplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>dependencies/RequireContextPlugin(modulesDirectories, extensions)</code></p><p>Provides <code>require.context</code>. The parameter <code>modulesDirectories</code> and <code>extensions</code> are used to find alternative requests for files. It&#x27;s useful to provide the same arrays as you provide to the resolver.</p><h3><span id="requireensureplugin"></span>RequireEnsurePlugin<a href="#requireensureplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>dependencies/RequireEnsurePlugin()</code></p><p>Provides <code>require.ensure</code>.</p><h3><span id="requireincludeplugin"></span>RequireIncludePlugin<a href="#requireincludeplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>dependencies/RequireIncludePlugin()</code></p><p>Provides <code>require.include</code>.</p><h3><span id="defineplugin"></span>DefinePlugin<a href="#defineplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>DefinePlugin(definitions)</code></p><p>Define constants for identifier.</p><p><code>definitions</code> is an object.</p><h2><span id="optimize"></span>optimize<a href="#optimize" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>请注意在 <code>webpack.optimize</code> 命名空间下的所有插件应该只在 <a href="/configuration/mode/#mode-none"><code>mode</code></a> 设置为 <code>&#x27;none&#x27;</code> 时使用。否则你将会在插件被两次使用时遇到麻烦。</p><h3><span id="limitchunkcountplugin"></span>LimitChunkCountPlugin<a href="#limitchunkcountplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>optimize/LimitChunkCountPlugin(options)</code></p><p>Merge chunks limit chunk count is lower than <code>options.maxChunks</code>.</p><p>The overhead for each chunks is provided by <code>options.chunkOverhead</code> or defaults to 10000. Entry chunks sizes are multiplied by <code>options.entryChunkMultiplicator</code> (or 10).</p><p>Chunks that reduce the total size the most are merged first. If multiple combinations are equal the minimal merged size wins.</p><h3><span id="mergeduplicatechunksplugin"></span>MergeDuplicateChunksPlugin<a href="#mergeduplicatechunksplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>optimize/MergeDuplicateChunksPlugin()</code></p><p>Chunks with the same modules are merged.</p><h3><span id="removeemptychunksplugin"></span>RemoveEmptyChunksPlugin<a href="#removeemptychunksplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>optimize/RemoveEmptyChunksPlugin()</code></p><p>Modules that are included in every parent chunk are removed from the chunk.</p><h3><span id="minchunksizeplugin"></span>MinChunkSizePlugin<a href="#minchunksizeplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>optimize/MinChunkSizePlugin(minChunkSize)</code></p><p>Merges chunks until each chunk has the minimum size of <code>minChunkSize</code>.</p><h3><span id="moduleconcatenationplugin"></span>ModuleConcatenationPlugin<a href="#moduleconcatenationplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>请查看 <a href="/plugins/module-concatenation-plugin/">ModuleConcatenationPlugin 页面</a> 获取更多内容。</p><h3><span id="flagincludedchunksplugin"></span>FlagIncludedChunksPlugin<a href="#flagincludedchunksplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>optimize/FlagIncludedChunksPlugin()</code></p><p>Adds chunk ids of chunks which are included in the chunk. This eliminates unnecessary chunk loads.</p><h3><span id="RealContentHashPlugin"></span>RealContentHashPlugin<a href="#RealContentHashPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>optimize/RealContentHashPlugin()</code></p><p>When <a href="/configuration/optimization/#optimizationrealcontenthash"><code>optimization.realContentHash</code></a> option is enabled, webpack will apply <code>RealContentHashPlugin</code> to compiler internally.</p><h4><span id="Hook"></span>Hook<a href="#Hook" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><code>RealContentHashPlugin</code> provides a <code>updateHash</code> <span class="badge">5.8.0+</span> hook for customizing hash updating:</p><pre><code class="hljs language-js"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> RealContentHashPlugin <span class="token operator">=</span> webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>RealContentHashPlugin<span class="token punctuation">;</span>
<span class="token comment">// ...</span>
compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>compilation<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">&#x27;MyPlugin&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">compilation</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> hooks <span class="token operator">=</span> RealContentHashPlugin<span class="token punctuation">.</span><span class="token function">getCompilationHooks</span><span class="token punctuation">(</span>compilation<span class="token punctuation">)</span><span class="token punctuation">;</span>
  hooks<span class="token punctuation">.</span>updateHash<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">&#x27;MyPlugin&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> oldHash</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// you can calculate the hash here as you wish</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h1><span id="JsonMinimizerWebpackPlugin"></span>JsonMinimizerWebpackPlugin<a href="#JsonMinimizerWebpackPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<div align="center"></div><p><a href="https://npmjs.com/package/json-minimizer-webpack-plugin"><img src="https://img.shields.io/npm/v/json-minimizer-webpack-plugin.svg" alt="npm"/></a>
<a href="https://nodejs.org"><img src="https://img.shields.io/node/v/json-minimizer-webpack-plugin.svg" alt="node"/></a>
<a href="https://david-dm.org/webpack-contrib/json-minimizer-webpack-plugin"><img src="https://david-dm.org/webpack-contrib/json-minimizer-webpack-plugin.svg" alt="deps"/></a>
<a href="https://github.com/webpack-contrib/json-minimizer-webpack-plugin/actions"><img src="https://github.com/webpack-contrib/json-minimizer-webpack-plugin/workflows/json-minimizer-webpack-plugin/badge.svg" alt="tests"/></a>
<a href="https://codecov.io/gh/webpack-contrib/json-minimizer-webpack-plugin"><img src="https://codecov.io/gh/webpack-contrib/json-minimizer-webpack-plugin/branch/master/graph/badge.svg" alt="cover"/></a>
<a href="https://gitter.im/webpack/webpack"><img src="https://img.shields.io/badge/gitter-webpack%2Fwebpack-brightgreen.svg" alt="chat"/></a>
<a href="https://packagephobia.now.sh/result?p=json-minimizer-webpack-plugin"><img src="https://packagephobia.now.sh/badge?p=json-minimizer-webpack-plugin" alt="size"/></a></p><p>This plugin uses <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify">JSON.stringify()</a> to minify your JSON.</p><h2><span id="Getting-Started"></span>Getting Started<a href="#Getting-Started" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>To begin, you&#x27;ll need to install <code>json-minimizer-webpack-plugin</code>:</p><pre><code class="hljs language-console">npm install json-minimizer-webpack-plugin --save-dev
</code></pre><p>Then add the plugin to your <code>webpack</code> configuration. For example:</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> JsonMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;json-minimizer-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> CopyPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;copy-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.json$/i</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;asset/resource&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          context<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;dist&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&#x27;./src/*.json&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// For webpack@5 you can use the `...` syntax to extend existing minimizers (i.e. `terser-webpack-plugin`), uncomment the next line</span>
      <span class="token comment">// `...`</span>
      <span class="token keyword">new</span> <span class="token class-name">JsonMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>And run <code>webpack</code> via your preferred method.</p><h2><span id="Options"></span>Options<a href="#Options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><table><thead><tr><th align="center">Name</th><th align="center">Type</th><th align="center">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center" data-th="Name"><span><strong><a href="#test"><code>test</code></a></strong></span></td><td align="center" data-th="Type"><span><code>String|RegExp|Array&lt;String|RegExp&gt;</code></span></td><td align="center" data-th="Default"><span><code>/\.json(\?.*)?$/i</code></span></td><td align="left" data-th="Description"><span>Test to match files against.</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#include"><code>include</code></a></strong></span></td><td align="center" data-th="Type"><span><code>String|RegExp|Array&lt;String|RegExp&gt;</code></span></td><td align="center" data-th="Default"><span><code>undefined</code></span></td><td align="left" data-th="Description"><span>Files to include.</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#exclude"><code>exclude</code></a></strong></span></td><td align="center" data-th="Type"><span><code>String|RegExp|Array&lt;String|RegExp&gt;</code></span></td><td align="center" data-th="Default"><span><code>undefined</code></span></td><td align="left" data-th="Description"><span>Files to exclude.</span></td></tr><tr><td align="center" data-th="Name"><span><strong><a href="#minimizerOptions"><code>minimizerOptions</code></a></strong></span></td><td align="center" data-th="Type"><span><code>Object</code></span></td><td align="center" data-th="Default"><span><code>{ replacer: null, space: null }</code></span></td><td align="left" data-th="Description"><span><code>JSON.stringify()</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify">options</a>.</span></td></tr></tbody></table><h3><span id="test"></span><code>test</code><a href="#test" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Type: <code>String|RegExp|Array&lt;String|RegExp&gt;</code> - default: <code>/\.json(\?.*)?$/i</code></p><p>Test to match files against.</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">JsonMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.foo\.json/i</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="include"></span><code>include</code><a href="#include" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Type: <code>String|RegExp|Array&lt;String|RegExp&gt;</code>
Default: <code>undefined</code></p><p>Files to include.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">JsonMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        include<span class="token operator">:</span> <span class="token regex">/\/includes/</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="exclude"></span><code>exclude</code><a href="#exclude" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Type: <code>String|RegExp|Array&lt;String|RegExp&gt;</code>
Default: <code>undefined</code></p><p>Files to exclude.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">JsonMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        exclude<span class="token operator">:</span> <span class="token regex">/\/excludes/</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="minimizerOptions"></span><code>minimizerOptions</code><a href="#minimizerOptions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Type: <code>Object</code>
Default: <code>{ replacer: null, space: null }</code></p><p><code>JSON.stringify()</code> <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify">options</a>.</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">JsonMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
          space<span class="token operator">:</span> <span class="token string">&#x27;\t&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="Contributing"></span>Contributing<a href="#Contributing" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>Please take a moment to read our contributing guidelines if you haven&#x27;t yet done so.</p><p><a href="https://github.com/webpack-contrib/json-minimizer-webpack-plugin/blob/master/.github/CONTRIBUTING.md">CONTRIBUTING</a></p><h2><span id="License"></span>License<a href="#License" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><a href="https://github.com/webpack-contrib/json-minimizer-webpack-plugin/blob/master/LICENSE">MIT</a></p><h1><span id="LimitChunkCountPlugin"></span>LimitChunkCountPlugin<a href="#LimitChunkCountPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>While writing your code, you may have already added many code split points to load stuff on demand. After compiling you might notice that some chunks are too small - creating larger HTTP overhead. <code>LimitChunkCountPlugin</code> can post-process your chunks by merging them.</p><pre><code class="hljs language-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>LimitChunkCountPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// Options...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="options"></span>Options<a href="#options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>The following options are supported:</p><h3><span id="maxchunks"></span>maxChunks<a href="#maxchunks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>number</code></p><p>Limit the maximum number of chunks using a value greater than or equal to <code>1</code>. Using <code>1</code> will prevent any additional chunks from being added as the entry/main chunk is also included in the count.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>LimitChunkCountPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      maxChunks<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="minchunksize"></span>minChunkSize<a href="#minchunksize" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Keeping chunk size above the specified limit is no longer a feature of this plugin. Use <a href="/plugins/min-chunk-size-plugin">MinChunkSizePlugin</a> instead.</p><h2><span id="usage-via-cli"></span>Usage via CLI<a href="#usage-via-cli" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>This plugin and it&#x27;s options can also be invoked via the <a href="/api/cli/">CLI</a>:</p><pre><code class="hljs language-bash">webpack --optimize-max-chunks <span class="token number">15</span></code></pre><h1><span id="MinChunkSizePlugin"></span>MinChunkSizePlugin<a href="#MinChunkSizePlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>Keep chunk size above the specified limit by merging chunks that are smaller than the <code>minChunkSize</code>.</p><pre><code class="hljs language-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>MinChunkSizePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  minChunkSize<span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span> <span class="token comment">// Minimum number of characters</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="usage-via-cli"></span>Usage via CLI<a href="#usage-via-cli" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>This plugin and it&#x27;s options can also be invoked via the <a href="/api/cli/">CLI</a>:</p><pre><code class="hljs language-bash">webpack --optimize-min-chunk-size <span class="token number">10000</span></code></pre><h1><span id="MiniCssExtractPlugin"></span>MiniCssExtractPlugin<a href="#MiniCssExtractPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<div align="center"></div><p><a href="https://npmjs.com/package/mini-css-extract-plugin"><img src="https://img.shields.io/npm/v/mini-css-extract-plugin.svg" alt="npm"/></a>
<a href="https://nodejs.org"><img src="https://img.shields.io/node/v/mini-css-extract-plugin.svg" alt="node"/></a>
<a href="https://david-dm.org/webpack-contrib/mini-css-extract-plugin"><img src="https://david-dm.org/webpack-contrib/mini-css-extract-plugin.svg" alt="deps"/></a>
<a href="https://github.com/webpack-contrib/mini-css-extract-plugin/actions"><img src="https://github.com/webpack-contrib/mini-css-extract-plugin/workflows/mini-css-extract-plugin/badge.svg" alt="tests"/></a>
<a href="https://codecov.io/gh/webpack-contrib/mini-css-extract-plugin"><img src="https://codecov.io/gh/webpack-contrib/mini-css-extract-plugin/branch/master/graph/badge.svg" alt="coverage"/></a>
<a href="https://gitter.im/webpack/webpack"><img src="https://badges.gitter.im/webpack/webpack.svg" alt="chat"/></a>
<a href="https://packagephobia.now.sh/result?p=mini-css-extract-plugin"><img src="https://packagephobia.now.sh/badge?p=mini-css-extract-plugin" alt="size"/></a></p><p>本插件会将 CSS 提取到单独的文件中，为每个包含 CSS 的 JS 文件创建一个 CSS 文件，并且支持 CSS 和 SourceMaps 的按需加载。</p><p>本插件基于 webpack v5 的新特性构建，并且需要 webpack 5 才能正常工作。</p><p>与 extract-text-webpack-plugin 相比：</p><ul><li>异步加载</li><li>没有重复的编译（性能）</li><li>更容易使用</li><li>特别针对 CSS 开发</li></ul><h2><span id="getting-started"></span>快速开始<a href="#getting-started" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>首先，你需要安装 <code>mini-css-extract-plugin</code>：</p><pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev mini-css-extract-plugin</code></pre><p>建议 <code>mini-css-extract-plugin</code> 与 <a href="/loaders/css-loader/"><code>css-loader</code></a> 一起使用。</p><p>之后将 loader 与 plugin 添加到你的 <code>webpack</code> 配置文件中。 例如：</p><p><strong>style.css</strong></p><pre><code class="hljs language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p><strong>component.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">import</span> <span class="token string">&quot;./style.css&quot;</span><span class="token punctuation">;</span></code></pre><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/i</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><blockquote><p>⚠️ 注意，如果你从 webpack 入口处导入 CSS 或者在 <a href="/concepts/under-the-hood/#chunks">初始</a> chunk 中引入 style， <code>mini-css-extract-plugin</code> 则不会将这些 CSS 加载到页面中。请使用 <a href="https://github.com/jantimon/html-webpack-plugin"><code>html-webpack-plugin</code></a> 自动生成 <code>link</code> 标签或者在创建 <code>index.html</code> 文件时使用 <code>link</code> 标签。</p></blockquote><blockquote><p>⚠️ source map 只在 <code>source-map</code>/<code>nosources-source-map</code>/<code>hidden-nosources-source-map</code>/<code>hidden-source-map</code> 值情况下起作用，因为 CSS 仅支持带有 <code>sourceMappingURL</code> 注释的 source map (例如 <code>//# sourceMappingURL=style.css.map</code>)。如果你需要将 <code>devtool</code> 设置为其他值，你可以使用 <code>css-loader</code> 中的 <a href="https://github.com/webpack-contrib/css-loader#sourcemap"><code>sourceMap: true</code></a> 来启用提取并生成 CSS 的 source map。</p></blockquote><h2><span id="options"></span>选项<a href="#options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><h3><span id="plugin-options"></span>Plugin Options<a href="#plugin-options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><table><thead><tr><th align="center">选项名</th><th align="center">类型</th><th align="center">默认值</th><th align="left">描述</th></tr></thead><tbody><tr><td align="center" data-th="选项名"><span><strong><a href="#filename"><code>filename</code></a></strong></span></td><td align="center" data-th="类型"><span><code>{String|Function}</code></span></td><td align="center" data-th="默认值"><span><code>[name].css</code></span></td><td align="left" data-th="描述"><span>此选项决定了输出的每个 CSS 文件的名称</span></td></tr><tr><td align="center" data-th="选项名"><span><strong><a href="#chunkfilename"><code>chunkFilename</code></a></strong></span></td><td align="center" data-th="类型"><span><code>{String|Function}</code></span></td><td align="center" data-th="默认值"><span><code>based on filename</code></span></td><td align="left" data-th="描述"><span>此选项决定了非入口的 chunk 文件名称</span></td></tr><tr><td align="center" data-th="选项名"><span><strong><a href="#ignoreorder"><code>ignoreOrder</code></a></strong></span></td><td align="center" data-th="类型"><span><code>{Boolean}</code></span></td><td align="center" data-th="默认值"><span><code>false</code></span></td><td align="left" data-th="描述"><span>移除 Order 警告</span></td></tr><tr><td align="center" data-th="选项名"><span><strong><a href="#insert"><code>insert</code></a></strong></span></td><td align="center" data-th="类型"><span><code>{String|Function}</code></span></td><td align="center" data-th="默认值"><span><code>var head = document.getElementsByTagName(&quot;head&quot;)[0];head.appendChild(linkTag);</code></span></td><td align="left" data-th="描述"><span>在指定位置将 <a href="/concepts/under-the-hood/#chunks">非初始（由 async 修饰）</a> 的 CSS chunk 插入 <code>link</code> 标签</span></td></tr><tr><td align="center" data-th="选项名"><span><strong><a href="#attributes"><code>attributes</code></a></strong></span></td><td align="center" data-th="类型"><span><code>{Object}</code></span></td><td align="center" data-th="默认值"><span><code>{}</code></span></td><td align="left" data-th="描述"><span>为 <a href="/concepts/under-the-hood/#chunks">非初始（由 async 修饰）</a> 的 CSS chunk 所处的 <code>link</code> 标签添加自定义属性</span></td></tr><tr><td align="center" data-th="选项名"><span><strong><a href="#linktype"><code>linkType</code></a></strong></span></td><td align="center" data-th="类型"><span><code>{String|Boolean}</code></span></td><td align="center" data-th="默认值"><span><code>text/css</code></span></td><td align="left" data-th="描述"><span>允许使用自定义 link 类型加载异步 chunk</span></td></tr><tr><td align="center" data-th="选项名"><span><strong><a href="#runtime"><code>runtime</code></a></strong></span></td><td align="center" data-th="类型"><span><code>{Boolean}</code></span></td><td align="center" data-th="默认值"><span><code>true</code></span></td><td align="left" data-th="描述"><span>允许启动/禁用 runtime 生成</span></td></tr><tr><td align="center" data-th="选项名"><span><strong><a href="#experimentaluseimportmodule"><code>experimentalUseImportModule</code></a></strong></span></td><td align="center" data-th="类型"><span><code>{Boolean}</code></span></td><td align="center" data-th="默认值"><span><code>undefined</code></span></td><td align="left" data-th="描述"><span>使用实验性的 webpack API 来执行模块，而非子代编译器</span></td></tr></tbody></table><h4><span id="filename"></span><code>filename</code><a href="#filename" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>类型：<code>String|Function</code>
默认值：<code>[name].css</code></p><p>此选项决定了输出的每个 CSS 文件的名称。</p><p>机制类似于 <a href="/configuration/output/#outputfilename"><code>output.filename</code></a>。</p><h4><span id="chunkfilename"></span><code>chunkFilename</code><a href="#chunkfilename" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>类型：<code>String|Function</code>
默认值：<code>based on filename</code></p><blockquote><p>将 <code>chunkFilename</code> 设置为 <code>function</code>，仅在 webpack@5 下可用。</p></blockquote><p>此选项决定了非入口的 chunk 文件名称</p><p>机制类似于 <a href="/configuration/output/#outputchunkfilename"><code>output.chunkFilename</code></a></p><h4><span id="ignoreorder"></span><code>ignoreOrder</code><a href="#ignoreorder" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>类型：<code>Boolean</code>
默认值：<code>false</code></p><p>移除 Order 警告
具体细节请参阅<a href="#remove-order-warnings">示例</a>。</p><h4><span id="insert"></span><code>insert</code><a href="#insert" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>类型：<code>String|Function</code>
默认值：<code>document.head.appendChild(linkTag);</code></p><blockquote><p>⚠️ 仅对 <a href="/concepts/under-the-hood/#chunks">非初始（由 async 修饰）</a> chunk 有效。</p></blockquote><p>默认情况下，<code>mini-css-extract-plugin</code> 会将 styles（<code>&lt;link&gt;</code> 元素）附加到当前 <code>window</code> 的 <code>document.head</code> 中。</p><p>但在某些情况下，可能需要对附加的目标进行精细化管理，甚至延迟 <code>link</code> 元素的插入。
例如，当你在 iframe 中运行应用程序异步加载样式时，就属于此情况。
对于此类情况，<code>insert</code> 可被配置为函数或自定义的选择器。</p><p>如果附加目标为 <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLIFrameElement">iframe</a>，请确保父文档有足够的访问权限进入 frame document，并将元素附加到它上面。</p><h5><span id="string"></span><code>String</code><a href="#string" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p>允许设置自定义的 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector">query selector</a>。
新的 <code>&lt;link&gt;</code> 元素将被插入到找到的 item 之后。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  insert<span class="token operator">:</span> <span class="token string">&quot;#some-element&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>找到 id 为 <code>some-element</code> 的元素，在它之后插入新的 <code>&lt;link&gt;</code> 元素。</p><h5><span id="function"></span><code>Function</code><a href="#function" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p>允许覆盖默认行为，并在任意位置插入样式。</p><blockquote><p>⚠ 注意，这段代码将与你的应用程序一起在浏览器中运行。由于并非所有浏览器都支持 ESMA 特性，如 <code>let</code>，<code>const</code>，<code>arrow function expression</code> 等，我们建议只使用 ECMA 5 的特性和语法。</p></blockquote><blockquote><blockquote><p>⚠ <code>insert</code> 函数被序列化为字符串并传递给插件。这意味着它将无法访问 webpack 配置模块的作用域。</p></blockquote></blockquote><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">insert</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">linkTag</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> reference <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#some-element&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>reference<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      reference<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>linkTag<span class="token punctuation">,</span> reference<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>找到 id 为 <code>some-element</code> 的元素，在它之后插入新的 <code>&lt;link&gt;</code> 元素。</p><h4><span id="attributes"></span><code>attributes</code><a href="#attributes" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>类型：<code>Object</code>
默认值：<code>{}</code></p><blockquote><p>⚠️ 仅对 <a href="/concepts/under-the-hood/#chunks">非初始（由 async 修饰）</a> chunk 有效。</p></blockquote><p>如果定义了此选项，<code>mini-css-extract-plugin</code> 将把指定的属性和值附加到 <code>&lt;link&gt;</code> 元素上。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      attributes<span class="token operator">:</span> <span class="token punctuation">{</span>
        id<span class="token operator">:</span> <span class="token string">&quot;target&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;data-target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;example&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/i</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>注意：它只适用于动态加载的 css chunk，如果你想修改 html 文件内的链接属性，请使用 <a href="https://github.com/jantimon/html-webpack-plugin">html-webpack-plugin</a>。</p><h4><span id="linktype"></span><code>linkType</code><a href="#linktype" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>类型：<code>String|Boolean</code>
默认值：<code>text/css</code></p><p>此选项运行使用自定义链接类型加载异步 chunk，例如 <code>&lt;link type=&quot;text/css&quot; ...&gt;</code>。</p><h5><span id="string"></span><code>String</code><a href="#string" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p>可选值：<code>text/css</code></p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      linkType<span class="token operator">:</span> <span class="token string">&quot;text/css&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/i</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h5><span id="boolean"></span><code>Boolean</code><a href="#boolean" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p><code>false</code> 禁用 link 的 <code>type</code> 属性</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      linkType<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/i</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="runtime"></span><code>runtime</code><a href="#runtime" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Type: <code>Boolean</code>
Default: <code>true</code></p><p>允许开启/禁用 runtime 生成。
CSS 仍将被提取，并可用于自定义加载方法。
例如，你可以使用 <a href="https://github.com/ztoben/assets-webpack-plugin">assets-webpack-plugin</a> 来检索它们，然后当需要时使用你自己的 runtime 代码下载静态资源。</p><p>设置为 <code>true</code> 以跳过。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      runtime<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/i</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="experimentaluseimportmodule"></span><code>experimentalUseImportModule</code><a href="#experimentaluseimportmodule" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>类型：<code>Boolean</code>
默认值：<code>undefined</code></p><p>如果没有显式启用，则默认启用（即可以通过 <code>true</code> 与 <code>false</code> 显式控制该配置），并且新 API 处于可用状态（webpack 版本至少为 <code>5.52.0</code>）。
布尔值在 <code>5.33.2</code> 版本后可用，但是你需要启用 <code>experiments.executeModule</code>（webpack <code>5.52.0</code> 版本不需要）。</p><p>使用新的 webpack API 来执行模块而不是子编译器。
这大大提高了性能和内存使用。</p><p>当与 <code>experiments.layers</code> 相结合时，添加了一个 <code>layer</code> 选项到 loader 配置项中，以指定 CSS 执行的 layer。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// `&gt;= 5.52.0` 版本的 webpack 不需要该配置，因为该配置项默认启用</span>
      <span class="token comment">// 仅 `&gt;= 5.33.2 &amp; &lt;= 5.52.0` 版本的 webpack 需要该配置</span>
      <span class="token comment">// 对于 `&lt;= 5.33.2` 版本的 webpack 不可用/不安全</span>
      experimentalUseImportModule<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/i</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="loader-options"></span>Loader 选项<a href="#loader-options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><table><thead><tr><th align="center">名称</th><th align="center">类型</th><th align="center">默认值</th><th align="left">描述</th></tr></thead><tbody><tr><td align="center" data-th="名称"><span><strong><a href="#publicpath"><code>publicPath</code></a></strong></span></td><td align="center" data-th="类型"><span><code>{String|Function}</code></span></td><td align="center" data-th="默认值"><span><code>webpackOptions.output.publicPath</code></span></td><td align="left" data-th="描述"><span>为图片、文件等外部资源指定一个自定义的公共路径。</span></td></tr><tr><td align="center" data-th="名称"><span><strong><a href="#emit"><code>emit</code></a></strong></span></td><td align="center" data-th="类型"><span><code>{Boolean}</code></span></td><td align="center" data-th="默认值"><span><code>true</code></span></td><td align="left" data-th="描述"><span>如果设为 false，插件将会提取 CSS <strong>但不会</strong> 生成文件</span></td></tr><tr><td align="center" data-th="名称"><span><strong><a href="#esmodule"><code>esModule</code></a></strong></span></td><td align="center" data-th="类型"><span><code>{Boolean}</code></span></td><td align="center" data-th="默认值"><span><code>true</code></span></td><td align="left" data-th="描述"><span>使用 ES modules 语法</span></td></tr></tbody></table><h4><span id="publicpath"></span><code>publicPath</code><a href="#publicpath" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>类型：<code>String|Function</code>
默认值：<code>webpackOptions.output</code> 选项中的 <code>publicPath</code></p><p>为 CSS 内的图片、文件等外部资源指定一个自定义的公共路径。
机制类似于 <a href="/configuration/output/#outputpublicpath"><code>output.publicPath</code></a>。</p><h5><span id="string"></span><code>String</code><a href="#string" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 类似于 webpackOptions.output 中的选项</span>
      <span class="token comment">// 所有选项都是可选的</span>
      filename<span class="token operator">:</span> <span class="token string">&#x27;[name].css&#x27;</span><span class="token punctuation">,</span>
      chunkFilename<span class="token operator">:</span> <span class="token string">&#x27;[id].css&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              publicPath<span class="token operator">:</span> <span class="token string">&quot;/public/path/to/&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h5><span id="function"></span><code>Function</code><a href="#function" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 类似于 webpackOptions.output 中的选项</span>
      <span class="token comment">// 所有选项都是可选的</span>
      filename<span class="token operator">:</span> <span class="token string">&#x27;[name].css&#x27;</span><span class="token punctuation">,</span>
      chunkFilename<span class="token operator">:</span> <span class="token string">&#x27;[id].css&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token function-variable function">publicPath</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">resourcePath<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> path<span class="token punctuation">.</span><span class="token function">relative</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>resourcePath<span class="token punctuation">)</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="emit"></span><code>emit</code><a href="#emit" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>类型：<code>Boolean</code>
默认值：<code>true</code></p><p>如果设置为 true，会发送一个文件（向文件系统中写入一个文件）。如果设置为 false，该插件将会提取 CSS 但是 <strong>不会</strong> 发送文件。
禁用该配置对服务侧的包比较有用。</p><h4><span id="esmodule"></span><code>esModule</code><a href="#esmodule" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>类型：<code>Boolean</code>
默认值：<code>true</code></p><p>默认情况下 <code>mini-css-extract-plugin</code> 将会生成使用 ES 模块语法的 JS 模块。
在某些情况下，使用 ES 模块是有益的，比如：<a href="/plugins/module-concatenation-plugin/">module concatenation</a> 和 <a href="/guides/tree-shaking/">tree shaking</a>。</p><p>你可以使用以下方式启用 CommonJS 语法：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/i</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              esModule<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="examples"></span>示例<a href="#examples" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><h3><span id="recommend"></span>推荐<a href="#recommend" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>推荐 <code>production</code> 环境的构建将 CSS 从你的 bundle 中分离出来，这样可以使用 CSS/JS 文件的并行加载。
这可以通过使用 <code>mini-css-extract-plugin</code> 来实现，因为它可以创建单独的 CSS 文件。
对于 <code>development</code> 模式（包括 <code>webpack-dev-server</code>），你可以使用 <a href="/loaders/style-loader/">style-loader</a>，因为它可以使用多个 <style></style> 标签将 CSS 插入到 DOM 中，并且反应会更快。</p><blockquote><p>i 不要同时使用 <code>style-loader</code> 与 <code>mini-css-extract-plugin</code>。</p></blockquote><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> devMode <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(sa|sc|c)ss$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          devMode <span class="token operator">?</span> <span class="token string">&quot;style-loader&quot;</span> <span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;postcss-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;sass-loader&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>devMode <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="minimal-example"></span>最简单的例子<a href="#minimal-example" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// Options similar to the same options in webpackOptions.output</span>
      <span class="token comment">// all options are optional</span>
      filename<span class="token operator">:</span> <span class="token string">&quot;[name].css&quot;</span><span class="token punctuation">,</span>
      chunkFilename<span class="token operator">:</span> <span class="token string">&quot;[id].css&quot;</span><span class="token punctuation">,</span>
      ignoreOrder<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// Enable to remove warnings about conflicting order</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token comment">// you can specify a publicPath here</span>
              <span class="token comment">// by default it uses publicPath in webpackOptions.output</span>
              publicPath<span class="token operator">:</span> <span class="token string">&quot;../&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="name-export-for-css-modules"></span>Named export for CSS Modules<a href="#name-export-for-css-modules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><blockquote><p>⚠ 命名会被修改为 <code>camelCase</code> 的形式。</p></blockquote><blockquote><p>⚠ 不允许在 css 的 class name 中使用 JavaScript 关键字。</p></blockquote><blockquote><p>⚠ 应启用 <code>css-loader</code> 中的 <code>esModule</code> 以及 <code>modules.namedExport</code> 选项。</p></blockquote><p><strong>styles.css</strong></p><pre><code class="hljs language-css"><span class="token selector">.foo-baz</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.bar</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p><strong>index.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> fooBaz<span class="token punctuation">,</span> bar <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fooBaz<span class="token punctuation">,</span> bar<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>你可以按照如下配置启用 ES 模块命名导出：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              esModule<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              modules<span class="token operator">:</span> <span class="token punctuation">{</span>
                namedExport<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                localIdentName<span class="token operator">:</span> <span class="token string">&quot;foo__[name]__[local]&quot;</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="the-publicpath-option-as-function"></span><code>publicPath</code> 选项为函数<a href="#the-publicpath-option-as-function" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 类似于 webpackOptions.output 中的选项</span>
      <span class="token comment">// 所有选项都是可选的</span>
      filename<span class="token operator">:</span> <span class="token string">&#x27;[name].css&#x27;</span><span class="token punctuation">,</span>
      chunkFilename<span class="token operator">:</span> <span class="token string">&#x27;[id].css&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token function-variable function">publicPath</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">resourcePath<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token comment">// publicPath 是资源相对于上下文的相对路径</span>
                <span class="token comment">// 例如：对于 ./css/admin/main.css publicPath 将会是 ../../</span>
                <span class="token comment">// 而对于 ./css/main.css publicPath 将会是 ../</span>
                <span class="token keyword">return</span> path<span class="token punctuation">.</span><span class="token function">relative</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>resourcePath<span class="token punctuation">)</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#x27;/&#x27;</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="advanced-configuration-example"></span>高级配置示例<a href="#advanced-configuration-example" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>此插件不能与 loader 链中的 <code>style-loader</code> 一同使用。</p><p>这是一个在 <code>development</code> 构建中使用 HMR 并且在 <code>production</code> 构建中将样式文件提取到独立文件中的示例。</p><p>（为了更加清楚的表达，省略了 Loader 的选项，以适应需要。）</p><p>如果你使用的是 <code>webpack-dev-server</code>，那么就无需使用 <code>HotModuleReplacementPlugin</code> plugin。
<code>webpack-dev-server</code> 使用 <code>hot</code> 选项决定是否启用/禁用 HMR。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> devMode <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> plugins <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// Options similar to the same options in webpackOptions.output</span>
    <span class="token comment">// both options are optional</span>
    filename<span class="token operator">:</span> devMode <span class="token operator">?</span> <span class="token string">&quot;[name].css&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;[name].[contenthash].css&quot;</span><span class="token punctuation">,</span>
    chunkFilename<span class="token operator">:</span> devMode <span class="token operator">?</span> <span class="token string">&quot;[id].css&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;[id].[contenthash].css&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>devMode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// only enable hot in development</span>
  plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(sa|sc|c)ss$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;postcss-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;sass-loader&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="hot-module-reloading-hmr"></span>模块热更新 (HMR)<a href="#hot-module-reloading-hmr" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>注意：在 webpack 5 中 HMR 已自动支持。无需配置。你可以跳过以下内容：</p><p><code>mini-css-extract-plugin</code> 支持在开发中热重载实际的 CSS 文件。
我们提供了一些选项来启动标准 stylesheets 和本地范围内 CSS 和 CSS modules 的 HMR 支持。
以下是 mini-css 用于启动 HMR CSS modules 的示例配置。</p><p>如果你使用的是 <code>webpack-dev-server</code>，那么你无需使用 <code>HotModuleReplacementPlugin</code> 插件。
<code>webpack-dev-server</code> 使用 <code>hot</code> 选项来控制启用/禁用 HMR。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> plugins <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// Options similar to the same options in webpackOptions.output</span>
    <span class="token comment">// both options are optional</span>
    filename<span class="token operator">:</span> devMode <span class="token operator">?</span> <span class="token string">&quot;[name].css&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;[name].[contenthash].css&quot;</span><span class="token punctuation">,</span>
    chunkFilename<span class="token operator">:</span> devMode <span class="token operator">?</span> <span class="token string">&quot;[id].css&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;[id].[contenthash].css&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>devMode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// only enable hot in development</span>
  plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="minimizing-for-production"></span>生产模式压缩<a href="#minimizing-for-production" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>为了压缩输出文件，请使用类似于 <a href="/plugins/css-minimizer-webpack-plugin/">css-minimizer-webpack-plugin</a> 这样的插件。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> CssMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;css-minimizer-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&quot;[name].css&quot;</span><span class="token punctuation">,</span>
      chunkFilename<span class="token operator">:</span> <span class="token string">&quot;[id].css&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// For webpack@5 you can use the `...` syntax to extend existing minimizers (i.e. `terser-webpack-plugin`), uncomment the next line</span>
      <span class="token comment">// `...`,</span>
      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>这将只在生产模式下启用 CSS 压缩优化。如果你需要在开发模式下使用，请设置 <code>optimization.minimize</code> 选项为 true。</p><h3><span id="using-preloaded-or-inlined-css"></span>使用预加载或内联 CSS<a href="#using-preloaded-or-inlined-css" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>运行时代码通过 <code>&lt;link&gt;</code> 或者<code>&lt;style&gt;</code> 标签检测已经添加的 CSS。
当在服务端注入 CSS 代码 以及做 SSR 时将会很有用。
<code>&lt;link&gt;</code> 标签的 <code>href</code> 属性必须与将要被加载的 CSS chunk 的 URL 相匹配。
<code>data-href</code> 属性也可以被用在 <code>&lt;link&gt;</code> 和 <code>&lt;style&gt;</code> 标签中
使用内联 CSS 时，必须使用 <code>data-href</code> 属性。</p><h3><span id="extracting-all-css-in-a-single-file"></span>提取所有的 CSS 到一个文件中<a href="#extracting-all-css-in-a-single-file" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>用过使用 <code>optimization.splitChunks.cacheGroups</code> 选项，所有的 CSS 可以被提取到一个 CSS 文件中。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        styles<span class="token operator">:</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">&quot;styles&quot;</span><span class="token punctuation">,</span>
          type<span class="token operator">:</span> <span class="token string">&quot;css/mini-extract&quot;</span><span class="token punctuation">,</span>
          chunks<span class="token operator">:</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span>
          enforce<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&quot;[name].css&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>请注意在 webpack 5 中应该使用 <code>type</code> 而不是 <code>test</code>，否则将会生成 <code>.js</code> 文件而不是 <code>.css</code>。这是因为 <code>test</code> 不知道应该去掉哪个模块（在这种情况下，它不会检测到 <code>.js</code> 应该被删除）。</p><h3><span id="extracting-css-based-on-entry"></span>基于入口提取 CSS<a href="#extracting-css-based-on-entry" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>你可以基于 webpack 的入口名称提取 CSS。
当你使用路由动态加载但是想要通过入口加载对应的 CSS 文件时这将会非常有用。
这样也避免了 ExtractTextPlugin 造成的 CSS 重复复制问题。</p><pre><code class="hljs language-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    foo<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src/foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    bar<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src/bar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        fooStyles<span class="token operator">:</span> <span class="token punctuation">{</span>
          type<span class="token operator">:</span> <span class="token string">&quot;css/mini-extract&quot;</span><span class="token punctuation">,</span>
          name<span class="token operator">:</span> <span class="token string">&quot;styles_foo&quot;</span><span class="token punctuation">,</span>
          <span class="token function-variable function">chunks</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> chunk<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          enforce<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        barStyles<span class="token operator">:</span> <span class="token punctuation">{</span>
          type<span class="token operator">:</span> <span class="token string">&quot;css/mini-extract&quot;</span><span class="token punctuation">,</span>
          name<span class="token operator">:</span> <span class="token string">&quot;styles_bar&quot;</span><span class="token punctuation">,</span>
          <span class="token function-variable function">chunks</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> chunk<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          enforce<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&quot;[name].css&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="filename-option-as-function"></span>文件名选项设置为函数<a href="#filename-option-as-function" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>使用 <code>filename</code> 选项，你可以使用 chunk 数据来定制文件名。
这点在处理多个入口，并且希望对给定的 入口/chunk 文件进行更多处理时，非常有用。
下面示例中，我们使用 <code>filename</code> 将生成的 css 输出到不同的目录中。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token function-variable function">filename</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> chunk <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>chunk<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;/js/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/css/&quot;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.css</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="long-term-caching"></span>长期缓存<a href="#long-term-caching" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>使用 <code>filename: &quot;[contenthash].css&quot;</code> 启动长期缓存。根据需要添加 <code>[name]</code>。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&quot;[name].[contenthash].css&quot;</span><span class="token punctuation">,</span>
      chunkFilename<span class="token operator">:</span> <span class="token string">&quot;[id].[contenthash].css&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="remove-order-warnings"></span>移除 Order 警告<a href="#remove-order-warnings" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>对于通过使用 scoping 或命名约定来解决 css order 的项目，可以通过将插件的 ignoreOrder 选项设置为 true 来禁用 css order 警告。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      ignoreOrder<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/i</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="multiple-themes"></span>多主题配置<a href="#multiple-themes" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.s[ac]ss$/i</span><span class="token punctuation">,</span>
        oneOf<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            resourceQuery<span class="token operator">:</span> <span class="token string">&quot;?dark&quot;</span><span class="token punctuation">,</span>
            use<span class="token operator">:</span> <span class="token punctuation">[</span>
              Self<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
              <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
              <span class="token punctuation">{</span>
                loader<span class="token operator">:</span> <span class="token string">&quot;sass-loader&quot;</span><span class="token punctuation">,</span>
                options<span class="token operator">:</span> <span class="token punctuation">{</span>
                  additionalData<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">@use &#x27;dark-theme/vars&#x27; as vars;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            use<span class="token operator">:</span> <span class="token punctuation">[</span>
              Self<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
              <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
              <span class="token punctuation">{</span>
                loader<span class="token operator">:</span> <span class="token string">&quot;sass-loader&quot;</span><span class="token punctuation">,</span>
                options<span class="token operator">:</span> <span class="token punctuation">{</span>
                  additionalData<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">@use &#x27;light-theme/vars&#x27; as vars;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">Self</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&quot;[name].css&quot;</span><span class="token punctuation">,</span>
      attributes<span class="token operator">:</span> <span class="token punctuation">{</span>
        id<span class="token operator">:</span> <span class="token string">&quot;theme&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><strong>src/index.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">import</span> <span class="token string">&quot;./style.scss&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> theme <span class="token operator">=</span> <span class="token string">&quot;light&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> themes <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

themes<span class="token punctuation">[</span>theme<span class="token punctuation">]</span> <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#theme&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">loadTheme</span><span class="token punctuation">(</span><span class="token parameter">newTheme</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// eslint-disable-next-line no-console</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">CHANGE THEME - </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newTheme<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> themeElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#theme&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>themeElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    themeElement<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>themes<span class="token punctuation">[</span>newTheme<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// eslint-disable-next-line no-console</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">THEME ALREADY LOADED - </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newTheme<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>themes<span class="token punctuation">[</span>newTheme<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>newTheme <span class="token operator">===</span> <span class="token string">&quot;dark&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// eslint-disable-next-line no-console</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">LOADING THEME - </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newTheme<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;dark&quot; */</span> <span class="token string">&quot;./style.scss?dark&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      themes<span class="token punctuation">[</span>newTheme<span class="token punctuation">]</span> <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#theme&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// eslint-disable-next-line no-console</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">LOADED - </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newTheme<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>theme <span class="token operator">===</span> <span class="token string">&quot;light&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    theme <span class="token operator">=</span> <span class="token string">&quot;dark&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    theme <span class="token operator">=</span> <span class="token string">&quot;light&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">loadTheme</span><span class="token punctuation">(</span>theme<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><strong>src/dark-theme/_vars.scss</strong></p><pre><code class="hljs language-scss"><span class="token property"><span class="token variable">$background</span></span><span class="token punctuation">:</span> black<span class="token punctuation">;</span></code></pre><p><strong>src/light-theme/_vars.scss</strong></p><pre><code class="hljs language-scss"><span class="token property"><span class="token variable">$background</span></span><span class="token punctuation">:</span> white<span class="token punctuation">;</span></code></pre><p><strong>src/styles.scss</strong></p><pre><code class="hljs language-scss"><span class="token selector">body </span><span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> vars.<span class="token variable">$background</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p><strong>public/index.html</strong></p><pre><code class="hljs language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>theme<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./main.css<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./main.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre><h3><span id="media-query-plugin"></span>媒体查询插件<a href="#media-query-plugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>如果您想从 CSS 文件中提取媒体查询（因为移动用户不需要加载电脑或平板专用的 CSS ），应使用以下插件之一：</p><ul><li><a href="https://github.com/SassNinja/media-query-plugin">Media Query Plugin</a></li><li><a href="https://github.com/mike-diamond/media-query-splitting-plugin">Media Query Splitting Plugin</a></li></ul><h2><span id="contributing"></span>贡献<a href="#contributing" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>如果你还没有阅读过我们的贡献指南，请花一点时间阅读它。</p><p><a href="https://github.com/webpack-contrib/mini-css-extract-plugin/blob/master/.github/CONTRIBUTING.md">CONTRIBUTING</a></p><h2><span id="license"></span>License<a href="#license" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><a href="https://github.com/webpack-contrib/mini-css-extract-plugin/blob/master/LICENSE">MIT</a></p><h1><span id="ModuleConcatenationPlugin"></span>ModuleConcatenationPlugin<a href="#ModuleConcatenationPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>在过去，webpack 打包时的一个权衡是，打包中的每个模块都会被包裹在单独的函数闭包中。这些包裹的函数使得 JavaScript 在浏览器中执行速度变慢。相比之下，像 Closure Compiler 和 RollupJS 这样的工具会将所有模块的作用域“提升”或合并到一个闭包中，从而使得代码在浏览器中执行速度更快。</p><p>此插件将在 webpack 中启用相同的合并行为。默认情况下，此插件在 <a href="/configuration/mode/#mode-production">生产模式</a> 下已启用，在其他情况下则禁用。将 <a href="/configuration/optimization/#optimizationconcatenatemodules"><code>optimization.concatenateModules</code> 选项</a> 设置为 <code>false</code> 即可覆盖在生产模式下的默认优化。手动添加 <code>ModuleConcatenationPlugin</code> 或使用 <code>optimization.concatenateModules</code> 选项可以在其他模式下启用合并行为：</p><pre><code class="hljs language-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>ModuleConcatenationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><blockquote><p>这种合并行为被称为“作用域提升”。</p><p>作用域提升是 ECMAScript 模块语法特别支持的一个功能。因此，webpack 可能会根据使用的模块类型和 <a href="https://medium.com/webpack/webpack-freelancing-log-book-week-5-7-4764be3266f5">其他条件</a> 回退到普通的打包方式。</p></blockquote><aside class="warning"><h6 class="warning__prefix">警告</h6><p>请牢记，此插件仅适用于 webpack 直接处理的 <a href="/api/module-methods/#es6-recommended">ES6 模块</a>。当使用转译器时需要禁用模块处理（例如在 babel 中使用 <a href="https://babeljs.io/docs/en/babel-preset-env#modules"><code>modules</code></a> 选项）。</p></aside><h2><span id="optimization-bailouts"></span>优化 bailout<a href="#optimization-bailouts" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>正如文章所解释的，webpack 尝试实现部分作用域提升。它会将模块合并到一个单一的作用域中，但并非在所有情况下都能做到。如果 webpack 无法合并一个模块，则有两种替代方案：阻止与创建新组。阻止意味着该模块必须在自己的作用域中；创建新组意味着会创建一个新的模块组。以下条件决定了不同的输出：</p><table><thead><tr><th>条件</th><th>输出</th></tr></thead><tbody><tr><td data-th="条件"><span>没有 ES6 模块</span></td><td data-th="输出"><span>阻止</span></td></tr><tr><td data-th="条件"><span>从非导入导入</span></td><td data-th="输出"><span>创建新组</span></td></tr><tr><td data-th="条件"><span>从其他 chunk 导入</span></td><td data-th="输出"><span>创建新组</span></td></tr><tr><td data-th="条件"><span>被其他多个模块分组导入</span></td><td data-th="输出"><span>创建新组</span></td></tr><tr><td data-th="条件"><span>从 <code>import()</code> 语法导入</span></td><td data-th="输出"><span>创建新组</span></td></tr><tr><td data-th="条件"><span>受 <code>ProvidePlugin</code> 影响或使用 <code>module</code></span></td><td data-th="输出"><span>阻止</span></td></tr><tr><td data-th="条件"><span>接受 HMR</span></td><td data-th="输出"><span>创建新组</span></td></tr><tr><td data-th="条件"><span>使用 <code>eval()</code></span></td><td data-th="输出"><span>阻止</span></td></tr><tr><td data-th="条件"><span>在多个 chunk 中</span></td><td data-th="输出"><span>阻止</span></td></tr><tr><td data-th="条件"><span><code>export * from &quot;cjs-module&quot;</code></span></td><td data-th="输出"><span>阻止</span></td></tr></tbody></table><h3><span id="module-grouping-algorithm"></span>模块分组算法<a href="#module-grouping-algorithm" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>下面的伪 JavaScript 代码解释了该算法：</p><pre><code class="hljs language-js">modules<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> group <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModuleGroup</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    root<span class="token operator">:</span> module<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  module<span class="token punctuation">.</span>dependencies<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">dependency</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">tryToAdd</span><span class="token punctuation">(</span>group<span class="token punctuation">,</span> dependency<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>group<span class="token punctuation">.</span>modules<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    orderedModules <span class="token operator">=</span> <span class="token function">topologicalSort</span><span class="token punctuation">(</span>group<span class="token punctuation">.</span>modules<span class="token punctuation">)</span><span class="token punctuation">;</span>
    concatenatedModule <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcatenatedModule</span><span class="token punctuation">(</span>orderedModules<span class="token punctuation">)</span><span class="token punctuation">;</span>
    chunk<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>concatenatedModule<span class="token punctuation">)</span><span class="token punctuation">;</span>
    orderedModules<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">groupModule</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      chunk<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>groupModule<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">tryToAdd</span><span class="token punctuation">(</span><span class="token parameter">group<span class="token punctuation">,</span> module</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>group<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">hasPreconditions</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> nextGroup <span class="token operator">=</span> group<span class="token punctuation">;</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> module<span class="token punctuation">.</span>dependents<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">check<span class="token punctuation">,</span> dependent</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> check <span class="token operator">&amp;&amp;</span> <span class="token function">tryToAdd</span><span class="token punctuation">(</span>nextGroup<span class="token punctuation">,</span> dependent<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  module<span class="token punctuation">.</span>dependencies<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">dependency</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">tryToAdd</span><span class="token punctuation">(</span>group<span class="token punctuation">,</span> dependency<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  group<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>nextGroup<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><h3><span id="debugging-optimization-bailouts"></span>调试优化 bailout<a href="#debugging-optimization-bailouts" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>如果使用的是 webpack CLI，使用 <code>--stats-optimization-bailout</code> 标志将显示出现 bailout 的原因；如果使用的是 webpack 配置，则需要向 <code>stats</code> 对象添加以下内容：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//……</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 此配置将显示出现 bailout 的原因</span>
    optimizationBailout<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h1><span id="ModuleFederationPlugin"></span>ModuleFederationPlugin<a href="#ModuleFederationPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>The <code>ModuleFederationPlugin</code> allows a build to provide or consume modules with other independent builds at runtime.</p><pre><code class="hljs language-ts"><span class="token keyword">const</span> <span class="token punctuation">{</span> ModuleFederationPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>container<span class="token punctuation">;</span>
<span class="token keyword">module</span><span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// options&#x27; typings in typescript</span>
      runtime<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="preview"><h6 class="preview__prefix">live preview</h6><p>Check out this live module federation example on StackBlitz.</p><a href="https://stackblitz.com/github/webpack/webpack.js.org/tree/master/examples/module-federation?terminal=start&amp;terminal=" target="_blank" rel="noopener noreferrer"><img src="/open-in-stackblitz-button.5857815e117b5952651d.svg" alt="Open in StackBlitz"/></a></aside><h2><span id="Options"></span>Options<a href="#Options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><h3><span id="runtime"></span>runtime<a href="#runtime" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Create a new runtime chunk with the specified name.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> ModuleFederationPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>container<span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      runtime<span class="token operator">:</span> <span class="token string">&#x27;my-runtime-name&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="Specify-package-versions"></span>Specify package versions<a href="#Specify-package-versions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>There are three ways to specify the versions of shared libraries.</p><h4><span id="Array-syntax"></span>Array syntax<a href="#Array-syntax" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>This syntax allows you to share libraries with package name only. This approach is good for prototyping, but it will not allow you to scale to large production environment given that libraries like <code>react</code> and <code>react-dom</code> will require additional requirements.</p><pre><code class="hljs language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> ModuleFederationPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>container<span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// adds lodash as shared module</span>
      <span class="token comment">// version is inferred from package.json</span>
      <span class="token comment">// there is no version check for the required version</span>
      <span class="token comment">// so it will always use the higher version found</span>
      shared<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;lodash&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="Object-syntax"></span>Object syntax<a href="#Object-syntax" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>This syntax provides you more control over each shared library in which you can define package name as the key and version (<a href="https://semver.org/">semver</a>) as the value.</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      shared<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// adds lodash as shared module</span>
        <span class="token comment">// version is inferred from package.json</span>
        <span class="token comment">// it will use the highest lodash version that is &gt;= 4.17 and &lt; 5</span>
        lodash<span class="token operator">:</span> <span class="token string">&#x27;^4.17.0&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="Object-syntax-with-sharing-hints"></span>Object syntax with sharing hints<a href="#Object-syntax-with-sharing-hints" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>This syntax allows you to provide additional <a href="#Sharing-hints">hints</a> to each shared package where you define the package name as the key, and the value as an object containing hints to modify sharing behavior.</p><pre><code class="hljs language-js"><span class="token keyword">const</span> deps <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./package.json&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>dependencies<span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      shared<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// adds react as shared module</span>
        react<span class="token operator">:</span> <span class="token punctuation">{</span>
          requiredVersion<span class="token operator">:</span> deps<span class="token punctuation">.</span>react<span class="token punctuation">,</span>
          singleton<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="Sharing-hints"></span>Sharing hints<a href="#Sharing-hints" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><h4><span id="eager"></span><strong><code>eager</code></strong><a href="#eager" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><code>boolean</code></p><p>This hint will allow webpack to include the provided and fallback module directly instead of fetching the library via an asynchronous request. In other words, this allows to use this shared module in the initial chunk. Also, be careful that all provided and fallback modules will always be downloaded when this hint is enabled.</p><h4><span id="import"></span><strong><code>import</code></strong><a href="#import" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><code>false | string</code></p><p>The provided module that should be placed in the shared scope. This provided module also acts as fallback module if no shared module is found in the shared scope or version isn&#x27;t valid. (The value for this hint defaults to the property name.)</p><h4><span id="packageName"></span><strong><code>packageName</code></strong><a href="#packageName" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><code>string</code></p><p>The package name that is used to determine required version from description file. This is only needed when the package name can&#x27;t be automatically determined from request.</p><h4><span id="requiredVersion"></span><strong><code>requiredVersion</code></strong><a href="#requiredVersion" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><code>false | string</code></p><p>The required version of the package.</p><h4><span id="shareKey"></span><strong><code>shareKey</code></strong><a href="#shareKey" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><code>string</code></p><p>The requested shared module is looked up under this key from the shared scope.</p><h4><span id="shareScope"></span><strong><code>shareScope</code></strong><a href="#shareScope" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><code>string</code></p><p>The name of the shared scope.</p><h4><span id="singleton"></span><strong><code>singleton</code></strong><a href="#singleton" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><code>boolean</code></p><p>This hint only allows a single version of the shared module in the shared scope (disabled by default). Some libraries use a global internal state (e.g. react, react-dom). Thus, it is critical to have only one instance of the library running at a time.</p><h4><span id="strictVersion"></span><strong><code>strictVersion</code></strong><a href="#strictVersion" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><code>boolean</code></p><p>This hint allows webpack to reject the shared module if version is not valid (defaults to <code>true</code> when local fallback module is available and shared module is not a singleton, otherwise <code>false</code>, it has no effect if there is no required version specified).</p><h4><span id="version"></span><strong><code>version</code></strong><a href="#version" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><code>false | string</code></p><p>The version of the provided module. It allows webpack to replace lower matching versions, but not higher.</p><h4><span id="Additional-examples"></span><strong>Additional examples</strong><a href="#Additional-examples" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// adds vue as shared module</span>
      <span class="token comment">// version is inferred from package.json</span>
      <span class="token comment">// it will always use the shared version, but print a warning when the shared vue is &lt; 2.6.5 or &gt;= 3</span>
      shared<span class="token operator">:</span> <span class="token punctuation">{</span>
        vue<span class="token operator">:</span> <span class="token punctuation">{</span>
          requiredVersion<span class="token operator">:</span> <span class="token string">&#x27;^2.6.5&#x27;</span><span class="token punctuation">,</span>
          singleton<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// adds vue as shared module</span>
      <span class="token comment">// there is no local version provided</span>
      <span class="token comment">// it will emit a warning if the shared vue is &lt; 2.6.5 or &gt;= 3</span>
      shared<span class="token operator">:</span> <span class="token punctuation">{</span>
        vue<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token keyword">import</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          requiredVersion<span class="token operator">:</span> <span class="token string">&#x27;^2.6.5&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// adds vue as shared module</span>
      <span class="token comment">// there is no local version provided</span>
      <span class="token comment">// it will throw an error when the shared vue is &lt; 2.6.5 or &gt;= 3</span>
      shared<span class="token operator">:</span> <span class="token punctuation">{</span>
        vue<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token keyword">import</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          requiredVersion<span class="token operator">:</span> <span class="token string">&#x27;^2.6.5&#x27;</span><span class="token punctuation">,</span>
          strictVersion<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      shared<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&#x27;my-vue&#x27;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// can be referenced by import &quot;my-vue&quot;</span>
          <span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">&#x27;vue&#x27;</span><span class="token punctuation">,</span> <span class="token comment">// the &quot;vue&quot; package will be used as a provided and fallback module</span>
          shareKey<span class="token operator">:</span> <span class="token string">&#x27;shared-vue&#x27;</span><span class="token punctuation">,</span> <span class="token comment">// under this name the shared module will be placed in the share scope</span>
          shareScope<span class="token operator">:</span> <span class="token string">&#x27;default&#x27;</span><span class="token punctuation">,</span> <span class="token comment">// share scope with this name will be used</span>
          singleton<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// only a single version of the shared module is allowed</span>
          strictVersion<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// don&#x27;t use shared version when version isn&#x27;t valid. Singleton or modules without fallback will throw, otherwise fallback is used</span>
          version<span class="token operator">:</span> <span class="token string">&#x27;1.2.3&#x27;</span><span class="token punctuation">,</span> <span class="token comment">// the version of the shared module</span>
          requiredVersion<span class="token operator">:</span> <span class="token string">&#x27;^1.0.0&#x27;</span><span class="token punctuation">,</span> <span class="token comment">// the required version of the shared module</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h1><span id="NoEmitOnErrorsPlugin"></span>NoEmitOnErrorsPlugin<a href="#NoEmitOnErrorsPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>The <code>NoEmitOnErrorsPlugin</code> allows you to avoid emitting assets when there are any errors. Enabled by default, you can disable using <a href="/configuration/optimization/#optimizationemitonerrors"><code>optimization.emitOnErrors</code></a></p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NoEmitOnErrorsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h1><span id="NormalModuleReplacementPlugin"></span>NormalModuleReplacementPlugin<a href="#NormalModuleReplacementPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>The <code>NormalModuleReplacementPlugin</code> allows you to replace resources that match <code>resourceRegExp</code> with <code>newResource</code>. If <code>newResource</code> is relative, it is resolved relative to the previous resource. If <code>newResource</code> is a function, it is expected to overwrite the request attribute of the supplied resource.</p><p>This can be useful for allowing different behaviour between builds.</p><pre><code class="hljs language-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NormalModuleReplacementPlugin</span><span class="token punctuation">(</span>resourceRegExp<span class="token punctuation">,</span> newResource<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>注意，<code>resourceRegExp</code> 是针对你在代码中编写的请求进行测试的，而不是解析的资源。例如，当你写了一段 <code>import sum from &#x27;./sum&#x27;</code> 的代码时，<code>&#x27;./sum&#x27;</code> 将会被用来测试而不是 <code>&#x27;./sum.js&#x27;</code>。</p><h2><span id="basic-example"></span>Basic Example<a href="#basic-example" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>Replace a specific module when building for a <a href="/guides/production">development environment</a>.</p><p>Say you have a configuration file <code>some/path/config.development.module.js</code> and a special version for production in <code>some/path/config.production.module.js</code></p><p>Add the following plugin when building for production:</p><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NormalModuleReplacementPlugin</span><span class="token punctuation">(</span>
  <span class="token regex">/some\/path\/config\.development\.js/</span><span class="token punctuation">,</span>
  <span class="token string">&#x27;./config.production.js&#x27;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="advanced-example"></span>Advanced Example<a href="#advanced-example" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>Conditional build depending on an <a href="/configuration/configuration-types">specified environment</a>.</p><p>Say you want a configuration with specific values for different build targets.</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">env</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> appTarget <span class="token operator">=</span> env<span class="token punctuation">.</span><span class="token constant">APP_TARGET</span> <span class="token operator">||</span> <span class="token string">&#x27;VERSION_A&#x27;</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NormalModuleReplacementPlugin</span><span class="token punctuation">(</span>
        <span class="token regex">/(.*)-APP_TARGET(\.*)/</span><span class="token punctuation">,</span>
        <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resource</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          resource<span class="token punctuation">.</span>request <span class="token operator">=</span> resource<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>
            <span class="token regex">/-APP_TARGET/</span><span class="token punctuation">,</span>
            <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>appTarget<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Create the two configuration files:</p><p><strong>app/config-VERSION_A.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">&#x27;I am version A&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><strong>app/config-VERSION_B.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">&#x27;I am version B&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Then import that configuration using the keyword you&#x27;re looking for in the regexp:</p><pre><code class="hljs language-javascript"><span class="token keyword">import</span> config <span class="token keyword">from</span> <span class="token string">&#x27;app/config-APP_TARGET&#x27;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>And now you get the right configuration imported depending on which target you&#x27;re building for:</p><pre><code class="hljs language-bash">npx webpack --env <span class="token assign-left variable">APP_TARGET</span><span class="token operator">=</span>VERSION_A
<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&#x27;I am version A&#x27;</span>

npx webpack --env <span class="token assign-left variable">APP_TARGET</span><span class="token operator">=</span>VERSION_B
<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&#x27;I am version B&#x27;</span></code></pre><h1><span id="PrefetchPlugin"></span>PrefetchPlugin<a href="#PrefetchPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>Prefetch normal module requests, causing them to be resolved and built before the first <code>import</code> or <code>require</code> of that module occurs. Using this plugin can boost performance. Try to profile the build first to determine clever prefetching points.</p><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>PrefetchPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>context<span class="token punctuation">]</span><span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="options"></span>Options<a href="#options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><ul><li><code>context</code>: An absolute path to a directory</li><li><code>request</code>: A request string for a normal module</li></ul><h1><span id="ProfilingPlugin"></span>ProfilingPlugin<a href="#ProfilingPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>Generate Chrome profile file which includes timings of plugins execution. Outputs <code>events.json</code> file by default. It is possible to provide custom file path using <code>outputPath</code> option.</p><blockquote><p>Note : ProfilingPlugin accepts only absolute paths.</p></blockquote><h2><span id="options"></span>Options<a href="#options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><ul><li><code>outputPath</code>: An absolute path to a custom output file (json)</li></ul><h2><span id="usage-default"></span>Usage: default<a href="#usage-default" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><pre><code class="hljs language-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>debug<span class="token punctuation">.</span>ProfilingPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="usage-custom-outputpath"></span>Usage: custom <code>outputPath</code><a href="#usage-custom-outputpath" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><pre><code class="hljs language-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>debug<span class="token punctuation">.</span>ProfilingPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  outputPath<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;profiling/profileEvents.json&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>In order to view the profile file:</p><ol><li>Run webpack with <code>ProfilingPlugin</code>.</li><li>Go to Chrome, open DevTools, and go to the <code>Performance</code> tab (formerly <code>Timeline</code>).</li><li>Drag and drop generated file (<code>events.json</code> by default) into the profiler.</li></ol><p>It will then display timeline stats and calls per plugin!</p><h1><span id="ProgressPlugin"></span>ProgressPlugin<a href="#ProgressPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>The <code>ProgressPlugin</code> provides a way to customize how progress is reported during a compilation.</p><h2><span id="usage"></span>Usage<a href="#usage" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>Create an instance of <code>ProgressPlugin</code> and provide one of the allowed params.</p><h3><span id="providing-function"></span>Providing <code>function</code><a href="#providing-function" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Provide a handler function which will be called when hooks report progress. <code>handler</code> function arguments:</p><ul><li><code>percentage</code>: a number between 0 and 1 indicating the completion percentage of the compilation</li><li><code>message</code>: a short description of the currently-executing hook</li><li><code>...args</code>: zero or more additional strings describing the current progress</li></ul><pre><code class="hljs language-js"><span class="token keyword">const</span> <span class="token function-variable function">handler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">percentage<span class="token punctuation">,</span> message<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// e.g. Output each progress message directly to the console:</span>
  console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>percentage<span class="token punctuation">,</span> message<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProgressPlugin</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3><span id="providing-object"></span>Providing <code>object</code><a href="#providing-object" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>When providing an <code>object</code> to the <code>ProgressPlugin</code>, following properties are supported:</p><ul><li><code>activeModules</code> (<code>boolean = false</code>): Shows active modules count and one active module in progress message.</li><li><code>entries</code> (<code>boolean = true</code>): Shows entries count in progress message.</li><li><code>handler</code> (See <a href="#providing-function">Providing function</a>)</li><li><code>modules</code> (<code>boolean = true</code>): Shows modules count in progress message.</li><li><code>modulesCount</code> (<code>number = 5000</code>): A minimum modules count to start with. Takes effect when <code>modules</code> property is enabled.</li><li><code>profile</code> (<code>boolean = false</code>): Tells <code>ProgressPlugin</code> to collect profile data for progress steps.</li><li><code>dependencies</code> (<code>boolean = true</code>): Shows the count of dependencies in progress message.</li><li><code>dependenciesCount</code> (<code>number = 10000</code>): A minimum dependencies count to start with. Takes effect when <code>dependencies</code> property is enabled.</li><li><code>percentBy</code> (<code>string = null: &#x27;entries&#x27; | &#x27;dependencies&#x27; | &#x27;modules&#x27; | null</code>): Tells <code>ProgressPlugin</code> how to calculate progress percentage.</li></ul><pre><code class="hljs language-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProgressPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  activeModules<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  entries<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">percentage<span class="token punctuation">,</span> message<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// custom logic</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  modules<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  modulesCount<span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span>
  profile<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  dependencies<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  dependenciesCount<span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  percentBy<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="percentage-calculation"></span>Percentage calculation<a href="#percentage-calculation" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>By default, progress percentage is calculated based on built modules count and total modules count: <code>built / total</code></p><p>The total modules count is unknown in advance and changes during the build. This may cause inaccurate progress percentage.</p><p>To solve this problem <code>ProgressPlugin</code> caches the last known total modules count and reuses this value on the next build. The first build will warm the cache but the following builds will use and update this value.</p><blockquote><p>We recommend using <code>percentBy: &#x27;entries&#x27;</code> setting for projects with <a href="/configuration/entry-context/#entry">multiple configured entry points</a>. Percentage calculation will become more accurate because the amount of entry points is known in advance.</p></blockquote><h2><span id="supported-hooks"></span>Supported Hooks<a href="#supported-hooks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>The following hooks report progress information to <code>ProgressPlugin</code>.</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p><em>Hooks marked with * allow plugins to report progress information using <code>reportProgress</code>. For more, see <a href="/api/plugins/#reporting-progress">Plugin API: Reporting Progress</a></em></p></aside><p><strong>Compiler</strong></p><ul><li>compilation</li><li>emit*</li><li>afterEmit*</li><li>done</li></ul><p><strong>Compilation</strong></p><ul><li>buildModule</li><li>failedModule</li><li>succeedModule</li><li>finishModules*</li><li>seal*</li><li>optimizeDependenciesBasic*</li><li>optimizeDependencies*</li><li>optimizeDependenciesAdvanced*</li><li>afterOptimizeDependencies*</li><li>optimize*</li><li>optimizeModulesBasic*</li><li>optimizeModules*</li><li>optimizeModulesAdvanced*</li><li>afterOptimizeModules*</li><li>optimizeChunksBasic*</li><li>optimizeChunks*</li><li>optimizeChunksAdvanced*</li><li>afterOptimizeChunks*</li><li>optimizeTree*</li><li>afterOptimizeTree*</li><li>optimizeChunkModulesBasic*</li><li>optimizeChunkModules*</li><li>optimizeChunkModulesAdvanced*</li><li>afterOptimizeChunkModules*</li><li>reviveModules*</li><li>optimizeModuleOrder*</li><li>advancedOptimizeModuleOrder*</li><li>beforeModuleIds*</li><li>moduleIds*</li><li>optimizeModuleIds*</li><li>afterOptimizeModuleIds*</li><li>reviveChunks*</li><li>optimizeChunkOrder*</li><li>beforeChunkIds*</li><li>optimizeChunkIds*</li><li>afterOptimizeChunkIds*</li><li>recordModules*</li><li>recordChunks*</li><li>beforeHash*</li><li>afterHash*</li><li>recordHash*</li><li>beforeModuleAssets*</li><li>beforeChunkAssets*</li><li>additionalChunkAssets*</li><li>record*</li><li>additionalAssets*</li><li>optimizeChunkAssets*</li><li>afterOptimizeChunkAssets*</li><li>optimizeAssets*</li><li>afterOptimizeAssets*</li><li>afterSeal*</li></ul><h2><span id="source"></span>Source<a href="#source" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><ul><li><a href="https://github.com/webpack/webpack/blob/master/lib/ProgressPlugin.js"><code>ProgressPlugin</code> source</a></li></ul><h1><span id="ProvidePlugin"></span>ProvidePlugin<a href="#ProvidePlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>Automatically load modules instead of having to <code>import</code> or <code>require</code> them everywhere.</p><pre><code class="hljs language-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  identifier<span class="token operator">:</span> <span class="token string">&#x27;module1&#x27;</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>or</p><pre><code class="hljs language-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  identifier<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;module1&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;property1&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>By default, module resolution path is current folder (<code>./**)</code> and <code>node_modules</code>.</p><p>It is also possible to specify full path:</p><pre><code class="hljs language-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  identifier<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;src/module1&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Whenever the <code>identifier</code> is encountered as free variable in a module, the <code>module</code> is loaded automatically and the <code>identifier</code> is filled with the exports of the loaded <code>module</code> (or <code>property</code> in order to support named exports).</p><p>For importing the default export of an ES2015 module, you have to specify the default property of module.</p><h2><span id="usage-jquery"></span>Usage: jQuery<a href="#usage-jquery" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>To automatically load <code>jquery</code> we can point both variables it exposes to the corresponding node module:</p><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  $<span class="token operator">:</span> <span class="token string">&#x27;jquery&#x27;</span><span class="token punctuation">,</span>
  jQuery<span class="token operator">:</span> <span class="token string">&#x27;jquery&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Then in any of our source code:</p><pre><code class="hljs language-javascript"><span class="token comment">// in a module</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#x27;#item&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;= works</span>
<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token string">&#x27;#item&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;= also works</span>
<span class="token comment">// $ is automatically set to the exports of module &quot;jquery&quot;</span></code></pre><h2><span id="usage-jquery-with-angular-1"></span>Usage: jQuery with Angular 1<a href="#usage-jquery-with-angular-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>Angular looks for <code>window.jQuery</code> in order to determine whether jQuery is present, see the <a href="https://github.com/angular/angular.js/blob/v1.5.9/src/Angular.js#L1821-L1823">source code</a>.</p><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string">&#x27;window.jQuery&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;jquery&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="usage-lodash-map"></span>Usage: Lodash Map<a href="#usage-lodash-map" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  _map<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;lodash&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;map&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3><span id="usage-vuejs"></span>Usage: Vue.js<a href="#usage-vuejs" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  Vue<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;vue/dist/vue.esm.js&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;default&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h1><span id="SourceMapDevToolPlugin"></span>SourceMapDevToolPlugin<a href="#SourceMapDevToolPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>本插件实现了对 source map 生成内容进行更细粒度的控制。它也可以根据 <a href="/configuration/devtool/"><code>devtool</code></a> 配置选项的某些设置来自动启用。</p><pre><code class="hljs language-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>SourceMapDevToolPlugin</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="options"></span>配置项<a href="#options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>支持以下配置项：</p><ul><li><code>test</code>（<code>string</code> <code>RegExp</code> <code>[string, RegExp]</code>）：包含基于扩展名的模块的 source map（默认是 <code>.js</code>, <code>.mjs</code> 和 <code>.css</code>）。</li><li><code>include</code>（<code>string</code> <code>RegExp</code> <code>[string, RegExp]</code>）：使路径与该值匹配的模块生成 source map。</li><li><code>exclude</code>（<code>string</code> <code>RegExp</code> <code>[string, RegExp]</code>）：使匹配该值的模块不生成 source map。</li><li><code>filename</code>（<code>string</code>）：定义生成的 SourceMap 的名称（不设置将默认置为 inlined）。</li><li><code>append</code>（<code>string</code>）：在原始资源后追加给定值。通常是 <code>#sourceMappingURL</code> 注释。<code>[url]</code> 被替换成 source map 文件的 URL。webpack v4.36.0 之后支持 path 参数：<code>[chunk]</code>、<code>[filename]</code> 和 <code>[contenthash]</code>。设置 <code>append</code> 为 <code>false</code> 会禁止追加。</li><li><code>moduleFilenameTemplate</code>（<code>string</code>）：查看 <a href="/configuration/output/#outputdevtoolmodulefilenametemplate"><code>output.devtoolModuleFilenameTemplate</code></a>。</li><li><code>fallbackModuleFilenameTemplate</code>（<code>string</code>）：查看上面的链接。</li><li><code>namespace</code>（<code>string</code>）：查看 <a href="/configuration/output/#outputdevtoolnamespace"><code>output.devtoolNamespace</code></a>。</li><li><code>module = true</code>（<code>boolean</code>）：表示 loader 是否生成 source map。</li><li><code>columns = true</code>（<code>boolean</code>）：表示是否应该使用 column mapping。</li><li><code>noSources = false</code>（<code>boolean</code>）：防止源文件的内容被包含在 source map 中。</li><li><code>publicPath</code> (<code>string</code>)：生成带 public path 前缀的绝对 URL，例如：<code>https://example.com/project/</code>。</li><li><code>fileContext</code> (<code>string</code>)：使得 <code>[file]</code> 参数作为本目录的相对路径。</li><li><code>sourceRoot</code>（<code>string</code>）：给 SourceMap 中的 <code>sourceRoot</code> 属性提供一个自定义值。</li></ul><p><code>fileContext</code> 配置在你想要将 source map 存储到上层目录，以避免 <code>../../</code> 出现在绝对路径 <code>[url]</code> 里面时是有用的。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>设置 <code>module</code> 和/或 <code>columns</code> 为 <code>false</code> 将会生成不太精确的 source map，但同时会显著地提升编译性能。</p></aside><aside class="tip"><h6 class="tip__prefix">提示</h6><p>如果你想在<a href="/configuration/mode/#mode-development">开发模式</a>中使用该插件的自定义配置，请确保禁用默认配置。即设置 <code>devtool: false</code>。</p></aside><aside class="warning"><h6 class="warning__prefix">警告</h6><p>如果默认的 webpack <code>minimizer</code> 已经被覆盖（比如自定义 <code>TerserPlugin</code> 配置），请确保将其替换为 <code>sourceMap: true</code> 以启动 SourceMap 支持。</p></aside><h2><span id="examples"></span>示例<a href="#examples" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>下面的示例展示了本插件的一些常见用例。</p><h3><span id="basic-use-case"></span>基本使用<a href="#basic-use-case" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>你可以使用以下代码将配置项 <code>devtool: inline-source-map</code> 替换为等效的自定义插件配置：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  devtool<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>SourceMapDevToolPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="exclude-vendor-maps"></span>排除 Vendor Maps<a href="#exclude-vendor-maps" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>以下代码会排除 <code>vendor.js</code> bundle 内模块的 source map。</p><pre><code class="hljs language-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>SourceMapDevToolPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  filename<span class="token operator">:</span> <span class="token string">&#x27;[name].js.map&#x27;</span><span class="token punctuation">,</span>
  exclude<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;vendor.js&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3><span id="host-source-maps-externally"></span>在宿主环境外部化 source map<a href="#host-source-maps-externally" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>设置 source map 的 URL。在宿主环境需要授权的情况下很有用。</p><pre><code class="hljs language-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>SourceMapDevToolPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  append<span class="token operator">:</span> <span class="token string">&#x27;\n//# sourceMappingURL=https://example.com/sourcemap/[url]&#x27;</span><span class="token punctuation">,</span>
  filename<span class="token operator">:</span> <span class="token string">&#x27;[name].map&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>还有一种场景，source map 存储在上层目录中时：</p><pre><code class="hljs language-code">project
|- dist
  |- public
    |- bundle-[hash].js
  |- sourcemaps
    |- bundle-[hash].js.map
</code></pre><p>如下设置：</p><pre><code class="hljs language-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>SourceMapDevToolPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  filename<span class="token operator">:</span> <span class="token string">&#x27;sourcemaps/[file].map&#x27;</span><span class="token punctuation">,</span>
  publicPath<span class="token operator">:</span> <span class="token string">&#x27;https://example.com/project/&#x27;</span><span class="token punctuation">,</span>
  fileContext<span class="token operator">:</span> <span class="token string">&#x27;public&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>将会生成以下 URL：</p><pre><code class="hljs language-code">https://example.com/project/sourcemaps/bundle-[hash].js.map
</code></pre><h1><span id="SplitChunksPlugin"></span>SplitChunksPlugin<a href="#SplitChunksPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>最初，chunks（以及内部导入的模块）是通过内部 webpack 图谱中的父子关系关联的。<code>CommonsChunkPlugin</code> 曾被用来避免他们之间的重复依赖，但是不可能再做进一步的优化。</p><p>从 webpack v4 开始，移除了 <code>CommonsChunkPlugin</code>，取而代之的是 <code>optimization.splitChunks</code>。</p><h2><span id="defaults"></span>默认值<a href="#defaults" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>开箱即用的 <code>SplitChunksPlugin</code> 对于大部分用户来说非常友好。</p><p>默认情况下，它只会影响到按需加载的 chunks，因为修改 initial chunks 会影响到项目的 HTML 文件中的脚本标签。</p><p>webpack 将根据以下条件自动拆分 chunks：</p><ul><li>新的 chunk 可以被共享，或者模块来自于 <code>node_modules</code> 文件夹</li><li>新的 chunk 体积大于 20kb（在进行 min+gz 之前的体积）</li><li>当按需加载 chunks 时，并行请求的最大数量小于或等于 30</li><li>当加载初始化页面时，并发请求的最大数量小于或等于 30</li></ul><p>当尝试满足最后两个条件时，最好使用较大的 chunks。</p><h2><span id="configuration"></span>配置<a href="#configuration" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>webpack 为希望对该功能进行更多控制的开发者提供了一组选项。</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p>选择了默认配置为了符合 Web 性能最佳实践，但是项目的最佳策略可能有所不同。如果要更改配置，则应评估所做更改的影响，以确保有真正的收益。</p></aside><h2><span id="optimizationsplitchunks"></span>optimization.splitChunks<a href="#optimizationsplitchunks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>下面这个配置对象代表 <code>SplitChunksPlugin</code> 的默认行为。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      chunks<span class="token operator">:</span> <span class="token string">&#x27;async&#x27;</span><span class="token punctuation">,</span>
      minSize<span class="token operator">:</span> <span class="token number">20000</span><span class="token punctuation">,</span>
      minRemainingSize<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      minChunks<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      maxAsyncRequests<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
      maxInitialRequests<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
      enforceSizeThreshold<span class="token operator">:</span> <span class="token number">50000</span><span class="token punctuation">,</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        defaultVendors<span class="token operator">:</span> <span class="token punctuation">{</span>
          test<span class="token operator">:</span> <span class="token regex">/[\\/]node_modules[\\/]/</span><span class="token punctuation">,</span>
          priority<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span>
          reuseExistingChunk<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          minChunks<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
          priority<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span>
          reuseExistingChunk<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p>当 webpack 处理文件路径时，它们始终包含 Unix 系统中的 <code>/</code> 和 Windows 系统中的 <code>\</code>。这就是为什么在 <code>{cacheGroup}.test</code> 字段中使用 <code>[\\/]</code> 来表示路径分隔符的原因。<code>{cacheGroup}.test</code> 中的 <code>/</code> 或 <code>\</code> 会在跨平台使用时产生问题。</p></aside><aside class="warning"><h6 class="warning__prefix">警告</h6><p>从 webpack 5 开始，不再允许将 entry 名称传递给 <code>{cacheGroup}.test</code> 或者为 <code>{cacheGroup}.name</code> 使用现有的 chunk 的名称。</p></aside><h3><span id="splitchunksautomaticnamedelimiter"></span>splitChunks.automaticNameDelimiter<a href="#splitchunksautomaticnamedelimiter" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>string = &#x27;~&#x27;</code></p><p>默认情况下，webpack 将使用 chunk 的来源和名称生成名称（例如 <code>vendors~main.js</code>）。此选项使你可以指定用于生成名称的分隔符。</p><h3><span id="splitchunkschunks"></span>splitChunks.chunks<a href="#splitchunkschunks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>string = &#x27;async&#x27;</code> <code>function (chunk)</code></p><p>这表明将选择哪些 chunk 进行优化。当提供一个字符串，有效值为 <code>all</code>，<code>async</code> 和 <code>initial</code>。设置为 <code>all</code> 可能特别强大，因为这意味着 chunk 可以在异步和非异步 chunk 之间共享。</p><p>Note that it is applied to the fallback cache group as well (<code>splitChunks.fallbackCacheGroup.chunks</code>).</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// include all types of chunks</span>
      chunks<span class="token operator">:</span> <span class="token string">&#x27;all&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>或者，你也可以提供一个函数去做更多的控制。这个函数的返回值将决定是否包含每一个 chunk。</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">chunks</span><span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// exclude `my-excluded-chunk`</span>
        <span class="token keyword">return</span> chunk<span class="token punctuation">.</span>name <span class="token operator">!==</span> <span class="token string">&#x27;my-excluded-chunk&#x27;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>你可以将此配置与 <a href="/plugins/html-webpack-plugin/">HtmlWebpackPlugin</a> 结合使用。它将为你注入所有生成的 vendor chunks。</p></aside><h3><span id="splitchunksmaxasyncrequests"></span>splitChunks.maxAsyncRequests<a href="#splitchunksmaxasyncrequests" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>number = 30</code></p><p>按需加载时的最大并行请求数。</p><h3><span id="splitchunksmaxinitialrequests"></span>splitChunks.maxInitialRequests<a href="#splitchunksmaxinitialrequests" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>number = 30</code></p><p>入口点的最大并行请求数。</p><h3><span id="splitchunksdefaultsizetypes"></span>splitChunks.defaultSizeTypes<a href="#splitchunksdefaultsizetypes" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>[string] = [&#x27;javascript&#x27;, &#x27;unknown&#x27;]</code></p><p>Sets the size types which are used when a number is used for sizes.</p><h3><span id="splitchunksminchunks"></span>splitChunks.minChunks<a href="#splitchunksminchunks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>number = 1</code></p><p>拆分前必须共享模块的最小 chunks 数。</p><h3><span id="splitChunkshidePathInfo"></span>splitChunks.hidePathInfo<a href="#splitChunkshidePathInfo" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code></p><p>为由 maxSize 分割的部分创建名称时，阻止公开路径信息。</p><h3><span id="splitchunksminsize"></span>splitChunks.minSize<a href="#splitchunksminsize" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>number = 20000</code> <code>{ [index: string]: number }</code></p><p>生成 chunk 的最小体积（以 bytes 为单位）。</p><h3><span id="splitchunksminsizereduction"></span>splitChunks.minSizeReduction<a href="#splitchunksminsizereduction" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>number</code> <code>{ [index: string]: number }</code></p><p>生成 chunk 所需的主 chunk（bundle）的最小体积（以字节为单位）缩减。这意味着如果分割成一个 chunk 并没有减少主 chunk（bundle）的给定字节数，它将不会被分割，即使它满足 <code>splitChunks.minSize</code>。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>为了生成 chunk，<code>splitChunks.minSizeReduction</code> 与 <code>splitChunks.minSize</code> 都需要被满足。</p></aside><h3><span id="splitchunksenforcesizethreshold"></span>splitChunks.enforceSizeThreshold<a href="#splitchunksenforcesizethreshold" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><h4><span id="splitchunkscachegroupscachegroupenforcesizethreshold"></span><code>splitChunks.cacheGroups.{cacheGroup}.enforceSizeThreshold</code><a href="#splitchunkscachegroupscachegroupenforcesizethreshold" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><code>number = 50000</code></p><p>强制执行拆分的体积阈值和其他限制（minRemainingSize，maxAsyncRequests，maxInitialRequests）将被忽略。</p><h3><span id="splitchunksminremainingsize"></span>splitChunks.minRemainingSize<a href="#splitchunksminremainingsize" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><h4><span id="splitchunkscachegroupscachegroupminremainingsize"></span><code>splitChunks.cacheGroups.{cacheGroup}.minRemainingSize</code><a href="#splitchunkscachegroupscachegroupminremainingsize" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><code>number = 0</code></p><p>在 webpack 5 中引入了 <code>splitChunks.minRemainingSize</code> 选项，通过确保拆分后剩余的最小 chunk 体积超过限制来避免大小为零的模块。 <a href="/configuration/mode/#mode-development">&#x27;development&#x27; 模式</a> 中默认为 <code>0</code>。对于其他情况，<code>splitChunks.minRemainingSize</code> 默认为 <code>splitChunks.minSize</code> 的值，因此除需要深度控制的极少数情况外，不需要手动指定它。</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p><code>splitChunks.minRemainingSize</code> 仅在剩余单个 chunk 时生效。</p></aside><h3><span id="splitchunkslayer"></span>splitChunks.layer<a href="#splitchunkslayer" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><h4><span id="splitchunkscachegroupscachegrouplayer"></span><code>splitChunks.cacheGroups.{cacheGroup}.layer</code><a href="#splitchunkscachegroupscachegrouplayer" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><code>RegExp</code> <code>string</code> <code>function</code></p><p>按模块层将模块分配给缓存组。</p><h3><span id="splitchunksmaxsize"></span>splitChunks.maxSize<a href="#splitchunksmaxsize" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>number = 0</code></p><p>使用 <code>maxSize</code>（每个缓存组 <code>optimization.splitChunks.cacheGroups[x].maxSize</code> 全局使用 <code>optimization.splitChunks.maxSize</code> 或对后备缓存组 <code>optimization.splitChunks.fallbackCacheGroup.maxSize</code> 使用）告诉 webpack 尝试将大于 <code>maxSize</code> 个字节的 chunk 分割成较小的部分。 这些较小的部分在体积上至少为 <code>minSize</code>（仅次于 <code>maxSize</code>）。
该算法是确定性的，对模块的更改只会产生局部影响。这样，在使用长期缓存时就可以使用它并且不需要记录。<code>maxSize</code> 只是一个提示，当模块大于 <code>maxSize</code> 或者拆分不符合 <code>minSize</code> 时可能会被违反。</p><p>当 chunk 已经有一个名称时，每个部分将获得一个从该名称派生的新名称。 根据 <code>optimization.splitChunks.hidePathInfo</code> 的值，它将添加一个从第一个模块名称或其哈希值派生的密钥。</p><p><code>maxSize</code> 选项旨在与 HTTP/2 和长期缓存一起使用。它增加了请求数量以实现更好的缓存。它还可以用于减小文件大小，以加快二次构建速度。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p><code>maxSize</code> 比 <code>maxInitialRequest/maxAsyncRequests</code> 具有更高的优先级。实际优先级是 <code>maxInitialRequest/maxAsyncRequests &lt; maxSize &lt; minSize</code>。</p></aside><aside class="tip"><h6 class="tip__prefix">提示</h6><p>设置 <code>maxSize</code> 的值会同时设置 <code>maxAsyncSize</code> 和 <code>maxInitialSize</code> 的值。</p></aside><h3><span id="splitchunksmaxasyncsize"></span>splitChunks.maxAsyncSize<a href="#splitchunksmaxasyncsize" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>number</code></p><p>像 <code>maxSize</code> 一样，<code>maxAsyncSize</code> 可以为 cacheGroups（<code>splitChunks.cacheGroups.{cacheGroup}.maxAsyncSize</code>）或 fallback 缓存组（<code>splitChunks.fallbackCacheGroup.maxAsyncSize</code> ）全局应用（<code>splitChunks.maxAsyncSize</code>）</p><p><code>maxAsyncSize</code> 和 <code>maxSize</code> 的区别在于 <code>maxAsyncSize</code> 仅会影响按需加载 chunk。</p><h3><span id="splitchunksmaxinitialsize"></span>splitChunks.maxInitialSize<a href="#splitchunksmaxinitialsize" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>number</code></p><p>像 <code>maxSize</code> 一样，<code>maxInitialSize</code> 可以对 cacheGroups（<code>splitChunks.cacheGroups.{cacheGroup}.maxInitialSize</code>）或 fallback 缓存组（<code>splitChunks.fallbackCacheGroup.maxInitialSize</code>）全局应用（splitChunks.maxInitialSize）。</p><p><code>maxInitialSize</code> 和 <code>maxSize</code> 的区别在于 <code>maxInitialSize</code> 仅会影响初始加载 chunks。</p><h3><span id="splitchunksname"></span>splitChunks.name<a href="#splitchunksname" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = false</code> <code>function (module, chunks, cacheGroupKey) =&gt; string</code> <code>string</code></p><p>每个 cacheGroup 也可以使用：<code>splitChunks.cacheGroups.{cacheGroup}.name</code>。</p><p>拆分 chunk 的名称。设为 <code>false</code> 将保持 chunk 的相同名称，因此不会不必要地更改名称。这是生产环境下构建的建议值。</p><p>提供字符串或函数使你可以使用自定义名称。指定字符串或始终返回相同字符串的函数会将所有常见模块和 vendor 合并为一个 chunk。这可能会导致更大的初始下载量并减慢页面加载速度。</p><p>如果你选择指定一个函数，则可能会发现 <code>chunk.name</code> 和 <code>chunk.hash</code> 属性（其中 <code>chunk</code> 是 <code>chunks</code> 数组的一个元素）在选择 chunk 名时特别有用。</p><p>如果 <code>splitChunks.name</code> 与 <a href="/configuration/entry-context/#entry">entry point</a> 名称匹配，entry point 将被删除。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p><code>splitChunks.cacheGroups.{cacheGroup}.name</code> can be used to move modules into a chunk that is a parent of the source chunk. For example, use <code>name: &quot;entry-name&quot;</code> to move modules into the <code>entry-name</code> chunk. You can also use on demand named chunks, but you must be careful that the selected modules are only used under this chunk.</p></aside><p><strong>main.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">&#x27;lodash&#x27;</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;Hello&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27; &#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        commons<span class="token operator">:</span> <span class="token punctuation">{</span>
          test<span class="token operator">:</span> <span class="token regex">/[\\/]node_modules[\\/]/</span><span class="token punctuation">,</span>
          <span class="token comment">// cacheGroupKey here is `commons` as the key of the cacheGroup</span>
          <span class="token function">name</span><span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> chunks<span class="token punctuation">,</span> cacheGroupKey</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> moduleFileName <span class="token operator">=</span> module
              <span class="token punctuation">.</span><span class="token function">identifier</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#x27;/&#x27;</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">reduceRight</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> allChunksNames <span class="token operator">=</span> chunks<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#x27;~&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cacheGroupKey<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>allChunksNames<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>moduleFileName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          chunks<span class="token operator">:</span> <span class="token string">&#x27;all&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>使用以下 <code>splitChunks</code> 配置来运行 webpack 也会输出一组公用组，其下一个名称为：<code>commons-main-lodash.js.e7519d2bb8777058fa27.js</code>（以哈希方式作为真实世界输出示例）。</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p>在为不同的拆分 chunk 分配相同的名称时，所有 vendor 模块都放在一个共享的 chunk 中，尽管不建议这样做，因为这可能会导致下载更多代码。</p></aside><h3><span id="splitchunksusedexports"></span>splitChunks.usedExports<a href="#splitchunksusedexports" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><h4><span id="splitchunkscachegroupscachegroupusedexports"></span><code>splitChunks.cacheGroups{cacheGroup}.usedExports</code><a href="#splitchunkscachegroupscachegroupusedexports" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><code>boolean = true</code></p><p>弄清哪些 export 被模块使用，以混淆 export 名称，省略未使用的 export，并生成有效的代码。
当它为 <code>true</code> 时：分析每个运行时使用的出口，当它为 <code>&quot;global&quot;</code> 时：分析所有运行时的全局 export 组合）。</p><h3><span id="splitchunkscachegroups"></span>splitChunks.cacheGroups<a href="#splitchunkscachegroups" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>缓存组可以继承和/或覆盖来自 <code>splitChunks.*</code> 的任何选项。但是 <code>test</code>、<code>priority</code> 和 <code>reuseExistingChunk</code> 只能在缓存组级别上进行配置。将它们设置为 <code>false</code>以禁用任何默认缓存组。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="splitchunkscachegroupscachegrouppriority"></span><code>splitChunks.cacheGroups.{cacheGroup}.priority</code><a href="#splitchunkscachegroupscachegrouppriority" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><code>number = -20</code></p><p>一个模块可以属于多个缓存组。优化将优先考虑具有更高 <code>priority</code>（优先级）的缓存组。默认组的优先级为负，以允许自定义组获得更高的优先级（自定义组的默认值为 <code>0</code>）。</p><h4><span id="splitchunkscachegroupscachegroupreuseexistingchunk"></span><code>splitChunks.cacheGroups.{cacheGroup}.reuseExistingChunk</code><a href="#splitchunkscachegroupscachegroupreuseexistingchunk" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><code>boolean = true</code></p><p>如果当前 chunk 包含已从主 bundle 中拆分出的模块，则它将被重用，而不是生成新的模块。这可能会影响 chunk 的结果文件名。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        defaultVendors<span class="token operator">:</span> <span class="token punctuation">{</span>
          reuseExistingChunk<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="splitchunkscachegroupscachegrouptype"></span><code>splitChunks.cacheGroups.{cacheGroup}.type</code><a href="#splitchunkscachegroupscachegrouptype" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><code>function</code> <code>RegExp</code> <code>string</code></p><p>允许按模块类型将模块分配给缓存组。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        json<span class="token operator">:</span> <span class="token punctuation">{</span>
          type<span class="token operator">:</span> <span class="token string">&#x27;json&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="splitchunkscachegroupstest"></span>splitChunks.cacheGroups.test<a href="#splitchunkscachegroupstest" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><h4><span id="splitchunkscachegroupscachegrouptest"></span><code>splitChunks.cacheGroups.{cacheGroup}.test</code><a href="#splitchunkscachegroupscachegrouptest" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><code>function (module, { chunkGraph, moduleGraph }) =&gt; boolean</code> <code>RegExp</code> <code>string</code></p><p>控制此缓存组选择的模块。省略它会选择所有模块。它可以匹配绝对模块资源路径或 chunk 名称。匹配 chunk 名称时，将选择 chunk 中的所有模块。</p><p>为 <code>{cacheGroup}.test</code> 提供一个函数：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        svgGroup<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// `module.resource` contains the absolute path of the file on disk.</span>
            <span class="token comment">// Note the usage of `path.sep` instead of / or \, for cross-platform compatibility.</span>
            <span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>
              module<span class="token punctuation">.</span>resource <span class="token operator">&amp;&amp;</span>
              module<span class="token punctuation">.</span>resource<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">&#x27;.svg&#x27;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
              module<span class="token punctuation">.</span>resource<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>path<span class="token punctuation">.</span>sep<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">cacheable_svgs</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>path<span class="token punctuation">.</span>sep<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        byModuleTypeGroup<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> module<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&#x27;javascript/auto&#x27;</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>为了查看 <code>module</code> and <code>chunks</code> 对象中可用的信息，你可以在回调函数中放入 <code>debugger;</code> 语句。然后 <a href="/contribute/debugging/#devtools">以调试模式运行 webpack 构建</a> 检查 Chromium DevTools 中的参数。</p><p>向 <code>{cacheGroup}.test</code> 提供 <code>RegExp</code>：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        defaultVendors<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// Note the usage of `[\\/]` as a path separator for cross-platform compatibility.</span>
          test<span class="token operator">:</span> <span class="token regex">/[\\/]node_modules[\\/]|vendor[\\/]analytics_provider|vendor[\\/]other_lib/</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="splitchunkscachegroupscachegroupfilename"></span><code>splitChunks.cacheGroups.{cacheGroup}.filename</code><a href="#splitchunkscachegroupscachegroupfilename" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><code>string</code> <code>function (pathData, assetInfo) =&gt; string</code></p><p>仅在初始 chunk 时才允许覆盖文件名。
也可以在 <a href="/configuration/output/#outputfilename"><code>output.filename</code></a> 中使用所有占位符。</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p>也可以在 <code>splitChunks.filename</code> 中全局设置此选项，但是不建议这样做，如果 <a href="#splitchunkschunks"><code>splitChunks.chunks</code></a> 未设置为 <code>&#x27;initial&#x27;</code>，则可能会导致错误。避免全局设置。</p></aside><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        defaultVendors<span class="token operator">:</span> <span class="token punctuation">{</span>
          filename<span class="token operator">:</span> <span class="token string">&#x27;[name].bundle.js&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>若为函数，则：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        defaultVendors<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token function-variable function">filename</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">pathData</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// Use pathData object for generating filename string based on your requirements</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pathData<span class="token punctuation">.</span>chunk<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-bundle.js</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过提供以文件名开头的路径 <code>&#x27;js/vendor/bundle.js&#x27;</code>，可以创建文件夹结构。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        defaultVendors<span class="token operator">:</span> <span class="token punctuation">{</span>
          filename<span class="token operator">:</span> <span class="token string">&#x27;js/[name]/bundle.js&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="splitchunkscachegroupscachegroupenforce"></span><code>splitChunks.cacheGroups.{cacheGroup}.enforce</code><a href="#splitchunkscachegroupscachegroupenforce" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><code>boolean = false</code></p><p>告诉 webpack 忽略 <a href="#splitchunksminsize"><code>splitChunks.minSize</code></a>、<a href="#splitchunksminchunks"><code>splitChunks.minChunks</code></a>、<a href="#splitchunksmaxasyncrequests"><code>splitChunks.maxAsyncRequests</code></a> 和 <a href="#splitchunksmaxinitialrequests"><code>splitChunks.maxInitialRequests</code></a> 选项，并始终为此缓存组创建 chunk。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        defaultVendors<span class="token operator">:</span> <span class="token punctuation">{</span>
          enforce<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="splitchunkscachegroupscachegroupidhint"></span><code>splitChunks.cacheGroups.{cacheGroup}.idHint</code><a href="#splitchunkscachegroupscachegroupidhint" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p><code>string</code></p><p>设置 chunk id 的提示。 它将被添加到 chunk 的文件名中。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        defaultVendors<span class="token operator">:</span> <span class="token punctuation">{</span>
          idHint<span class="token operator">:</span> <span class="token string">&#x27;vendors&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="examples"></span>Examples<a href="#examples" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><h3><span id="defaults-example-1"></span>Defaults: Example 1<a href="#defaults-example-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><pre><code class="hljs language-js"><span class="token comment">// index.js</span>

<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#x27;./a&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// dynamic import</span></code></pre><pre><code class="hljs language-js"><span class="token comment">// a.js</span>
<span class="token keyword">import</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>

<span class="token comment">//...</span></code></pre><p><strong>结果：</strong> 将创建一个单独的包含 <code>react</code> 的 chunk。在导入调用中，此 chunk 并行加载到包含 <code>./a</code> 的原始 chunk 中。</p><p>为什么：</p><ul><li>条件1：chunk 包含来自 <code>node_modules</code> 的模块</li><li>条件2：<code>react</code> 大于 30kb</li><li>条件3：导入调用中的并行请求数为 2</li><li>条件4：在初始页面加载时不影响请求</li></ul><p>这背后的原因是什么？<code>react</code> 可能不会像你的应用程序代码那样频繁地更改。通过将其移动到单独的 chunk 中，可以将该 chunk 与应用程序代码分开进行缓存（假设你使用的是 chunkhash，records，Cache-Control 或其他长期缓存方法）。</p><h3><span id="defaults-example-2"></span>Defaults: Example 2<a href="#defaults-example-2" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><pre><code class="hljs language-js"><span class="token comment">// entry.js</span>

<span class="token comment">// dynamic imports</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#x27;./a&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#x27;./b&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre><code class="hljs language-js"><span class="token comment">// a.js</span>
<span class="token keyword">import</span> <span class="token string">&#x27;./helpers&#x27;</span><span class="token punctuation">;</span> <span class="token comment">// helpers is 40kb in size</span>

<span class="token comment">//...</span></code></pre><pre><code class="hljs language-js"><span class="token comment">// b.js</span>
<span class="token keyword">import</span> <span class="token string">&#x27;./helpers&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#x27;./more-helpers&#x27;</span><span class="token punctuation">;</span> <span class="token comment">// more-helpers is also 40kb in size</span>

<span class="token comment">//...</span></code></pre><p><strong>结果：</strong> 将创建一个单独的 chunk，其中包含 <code>./helpers</code> 及其所有依赖项。在导入调用时，此 chunk 与原始 chunks 并行加载。</p><p>为什么：</p><ul><li>条件1：chunk 在两个导入调用之间共享</li><li>条件2：<code>helpers</code> 大于 30kb</li><li>条件3：导入调用中的并行请求数为 2</li><li>条件4：在初始页面加载时不影响请求</li></ul><p>将 <code>helpers</code> 的内容放入每个 chunk 中将导致其代码被下载两次。通过使用单独的块，这只会发生一次。我们会进行额外的请求，这可以视为一种折衷。这就是为什么最小体积为 30kb 的原因。</p><h3><span id="split-chunks-example-1"></span>Split Chunks: Example 1<a href="#split-chunks-example-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>创建一个 <code>commons</code> chunk，其中包括入口（entry points）之间所有共享的代码。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        commons<span class="token operator">:</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">&#x27;commons&#x27;</span><span class="token punctuation">,</span>
          chunks<span class="token operator">:</span> <span class="token string">&#x27;initial&#x27;</span><span class="token punctuation">,</span>
          minChunks<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p>此配置可以扩大你的初始 bundles，建议在不需要立即使用模块时使用动态导入。</p></aside><h3><span id="split-chunks-example-2"></span>Split Chunks: Example 2<a href="#split-chunks-example-2" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>创建一个 <code>vendors</code> chunk，其中包括整个应用程序中 <code>node_modules</code> 的所有代码。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        commons<span class="token operator">:</span> <span class="token punctuation">{</span>
          test<span class="token operator">:</span> <span class="token regex">/[\\/]node_modules[\\/]/</span><span class="token punctuation">,</span>
          name<span class="token operator">:</span> <span class="token string">&#x27;vendors&#x27;</span><span class="token punctuation">,</span>
          chunks<span class="token operator">:</span> <span class="token string">&#x27;all&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p>这可能会导致包含所有外部程序包的较大 chunk。建议仅包括你的核心框架和实用程序，并动态加载其余依赖项。</p></aside><h3><span id="split-chunks-example-3"></span>Split Chunks: Example 3<a href="#split-chunks-example-3" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>创建一个 <code>custom vendor</code> chunk，其中包含与 <code>RegExp</code> 匹配的某些 <code>node_modules</code> 包。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        vendor<span class="token operator">:</span> <span class="token punctuation">{</span>
          test<span class="token operator">:</span> <span class="token regex">/[\\/]node_modules[\\/](react|react-dom)[\\/]/</span><span class="token punctuation">,</span>
          name<span class="token operator">:</span> <span class="token string">&#x27;vendor&#x27;</span><span class="token punctuation">,</span>
          chunks<span class="token operator">:</span> <span class="token string">&#x27;all&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>这将导致将 <code>react</code> 和 <code>react-dom</code> 分成一个单独的 chunk。 如果你不确定 chunk 中包含哪些包，请参考 <a href="/guides/code-splitting/#bundle-analysis">Bundle Analysis</a> 部分以获取详细信息。</p></aside><h1><span id="StylelintWebpackPlugin"></span>StylelintWebpackPlugin<a href="#StylelintWebpackPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<div align="center"></div><p><a href="https://npmjs.com/package/stylelint-webpack-plugin"><img src="https://img.shields.io/npm/v/stylelint-webpack-plugin.svg" alt="npm"/></a>
<a href="https://nodejs.org"><img src="https://img.shields.io/node/v/stylelint-webpack-plugin.svg" alt="node"/></a>
<a href="https://david-dm.org/webpack-contrib/stylelint-webpack-plugin"><img src="https://david-dm.org/webpack-contrib/stylelint-webpack-plugin.svg" alt="deps"/></a>
<a href="https://github.com/webpack-contrib/stylelint-webpack-plugin/actions"><img src="https://github.com/webpack-contrib/stylelint-webpack-plugin/workflows/stylelint-webpack-plugin/badge.svg" alt="tests"/></a>
<a href="https://codecov.io/gh/webpack-contrib/stylelint-webpack-plugin"><img src="https://codecov.io/gh/webpack-contrib/stylelint-webpack-plugin/branch/master/graph/badge.svg" alt="coverage"/></a>
<a href="https://gitter.im/webpack/webpack"><img src="https://badges.gitter.im/webpack/webpack.svg" alt="chat"/></a>
<a href="https://packagephobia.now.sh/result?p=stylelint-webpack-plugin"><img src="https://packagephobia.now.sh/badge?p=stylelint-webpack-plugin" alt="size"/></a></p><blockquote><p>stylelint-webpack-plugin 3.0 仅支持 webpack 5。对于 webpack 4，请查看 <a href="https://github.com/webpack-contrib/stylelint-webpack-plugin/tree/2.x">2.x 分支</a>。</p></blockquote><p>该插件使用 <a href="https://stylelint.io/"><code>stylelint</code></a> 帮助你在样式代码中避免错误并强制规范。</p><h2><span id="getting-started"></span>Getting Started<a href="#getting-started" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>首先，你需要安装 <code>stylelint-webpack-plugin</code>：</p><pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> stylelint-webpack-plugin --save-dev</code></pre><p><strong>注意</strong>：如果你还没有安装 <code>stylelint &gt;= 13</code>，请先用 npm 进行安装：</p><pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> stylelint --save-dev</code></pre><p>然后添加该插件到你的 webpack 配置中。例如：</p><pre><code class="hljs language-js"><span class="token keyword">const</span> StylelintPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;stylelint-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">StylelintPlugin</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="options"></span>选项<a href="#options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>有关可用选项的完整列表请参阅 <a href="https://stylelint.io/user-guide/usage/node-api#options">styleint 的配置项</a>，这些选项直接传递给 <code>stylelint</code>。</p><h3><span id="configfile"></span><code>configFile</code><a href="#configfile" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><ul><li>类型：<code>String</code></li><li>默认值：<code>undefined</code></li></ul><p>指定 <code>stylelint</code> 配置文件的位置。</p><p><strong>注意：</strong> 默认情况下由 <a href="https://stylelint.io/user-guide/configure"><code>stylelint</code> 处理</a>。</p><h3><span id="context"></span><code>context</code><a href="#context" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><ul><li>类型：<code>String</code></li><li>默认值：<code>compiler.context</code></li></ul><p>指定文件根目录的字符串。</p><h3><span id="exclude"></span><code>exclude</code><a href="#exclude" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><ul><li>类型：<code>String|Array[String]</code></li><li>默认值：<code>[&#x27;node_modules&#x27;, compiler.options.output.path]</code></li></ul><p>指定要忽略的文件或目录。必须相对于 <code>options.context</code>。</p><h3><span id="extensions"></span><code>extensions</code><a href="#extensions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><ul><li>类型：<code>String|Array[String]</code></li><li>默认值：<code>[&#x27;css&#x27;, &#x27;scss&#x27;, &#x27;sass&#x27;]</code></li></ul><p>指定要检查的扩展名。</p><h3><span id="files"></span><code>files</code><a href="#files" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><ul><li>类型：<code>String|Array[String]</code></li><li>默认值：<code>&#x27;**/*.(s(c|a)ss|css)&#x27;</code></li></ul><p>可指定为目录，文件名或 globs。目录会递归地寻找与 <code>options.extensions</code> 相匹配的文件。文件名和 glob 模式将忽略 <code>options.extensions</code>。</p><h3><span id="fix"></span><code>fix</code><a href="#fix" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><ul><li>类型：<code>Boolean</code></li><li>默认值：<code>false</code></li></ul><p>如果值为 <code>true</code>，<code>stylelint</code> 将修复尽可能多的 error。修复真实的源文件。报告所有未修复的 errors。请参阅 <a href="https://stylelint.io/user-guide/usage/options#fix">自动修复错误</a> 文档。</p><h3><span id="formatter"></span><code>formatter</code><a href="#formatter" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><ul><li>类型：<code>String|Function</code></li><li>默认值：<code>&#x27;string&#x27;</code></li></ul><p>指定要用于格式化结果的 formatter。请参阅 <a href="https://stylelint.io/user-guide/usage/options#formatter">formatter 选项</a>。</p><h3><span id="lintdirtymodulesonly"></span><code>lintDirtyModulesOnly</code><a href="#lintdirtymodulesonly" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><ul><li>类型：<code>Boolean</code></li><li>默认值：<code>false</code></li></ul><p>仅检查有变化的文件，启动时跳过检查。</p><h3><span id="stylelintpath"></span><code>stylelintPath</code><a href="#stylelintpath" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><ul><li>类型：<code>String</code></li><li>默认值：<code>stylelint</code></li></ul><p>将要用来做检查的 <code>stylelint</code> 实例的路径。</p><h3><span id="threads"></span><code>threads</code><a href="#threads" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><ul><li>类型：<code>Boolean | Number</code></li><li>默认值：<code>false</code></li></ul><p>设置为 <code>true</code> 时，会根据 cpu 的数量自动决定池子的大小。设置为大于 1 的数字时，可以确定池子的大小。设置为 <code>false</code>、1 或更小时，会禁用池子，并只在主线程运行。</p><h3><span id="errors-and-warning"></span>Errors 和 Warning<a href="#errors-and-warning" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><strong>默认情况下，插件将根据 stylelint 错误/警告数量自动调整错误报告。</strong>
你仍然可以使用 <code>emitError</code> <strong>或</strong> <code>emitWarning</code> 选项来强制改变这种默认行为。</p><h4><span id="emiterror"></span><code>emitError</code><a href="#emiterror" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><ul><li>类型：<code>Boolean</code></li><li>默认值：<code>true</code></li></ul><p>如遇到错误将会被直接输出，如需禁用，请设置为 <code>false</code>。</p><h4><span id="emitwarning"></span><code>emitWarning</code><a href="#emitwarning" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><ul><li>类型：<code>Boolean</code></li><li>默认值：<code>true</code></li></ul><p>如遇到警告将会被直接输出，如需禁用，请设置为 <code>false</code>。</p><h4><span id="failonerror"></span><code>failOnError</code><a href="#failonerror" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><ul><li>类型：<code>Boolean</code></li><li>默认值：<code>true</code></li></ul><p>如果有任何错误，都将导致模块构建失败，如需禁用，请设置为 <code>false</code>。</p><h4><span id="failonwarning"></span><code>failOnWarning</code><a href="#failonwarning" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><ul><li>类型：<code>Boolean</code></li><li>默认值：<code>false</code></li></ul><p>如果设置为 <code>true</code>，出现任何 warnings 都将会导致模块构建失败。</p><h4><span id="quiet"></span><code>quiet</code><a href="#quiet" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><ul><li>类型：<code>Boolean</code></li><li>默认值：<code>false</code></li></ul><p>如果设置为 <code>true</code>，则仅处理和报告 errors，并忽略 warnings。</p><h4><span id="outputreport"></span><code>outputReport</code><a href="#outputreport" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><ul><li>类型：<code>Boolean|Object</code></li><li>默认值：<code>false</code></li></ul><p>将输出的错误写入文件，例如，用于上报的 <code>json</code> 文件。
其 <code>filePath</code> 会相对于 webpack 配置中的：<code>output.path</code>.
你可以为输出文件设置不同的 <code>formatter</code>，如果未设置，则将使用默认 <code>formatter</code>。</p><pre><code class="hljs language-js"><span class="token punctuation">{</span>
  <span class="token string">&#x27;path/to/file&#x27;</span><span class="token punctuation">;</span>
  <span class="token string">&#x27;json&#x27;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><h2><span id="changelog"></span>Changelog<a href="#changelog" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><a href="https://github.com/webpack-contrib/stylelint-webpack-plugin/blob/master/CHANGELOG.md">Changelog</a></p><h2><span id="license"></span>License<a href="#license" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><a href="https://github.com/webpack-contrib/stylelint-webpack-plugin/blob/master/LICENSE">MIT</a></p><h1><span id="TerserWebpackPlugin"></span>TerserWebpackPlugin<a href="#TerserWebpackPlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>免责声明：TerserWebpackPlugin 是由社区成员维护的第三方包，它可能没有与 webpack 相同的支持、安全策略或许可证，并且它不是由 webpack 维护的。</p><p><a href="https://npmjs.com/package/terser-webpack-plugin"><img src="https://img.shields.io/npm/v/terser-webpack-plugin.svg" alt="npm"/></a>
<a href="https://nodejs.org"><img src="https://img.shields.io/node/v/terser-webpack-plugin.svg" alt="node"/></a>
<a href="https://github.com/webpack-contrib/terser-webpack-plugin/actions"><img src="https://github.com/webpack-contrib/terser-webpack-plugin/workflows/terser-webpack-plugin/badge.svg" alt="tests"/></a>
<a href="https://codecov.io/gh/webpack-contrib/terser-webpack-plugin"><img src="https://codecov.io/gh/webpack-contrib/terser-webpack-plugin/branch/master/graph/badge.svg" alt="cover"/></a>
<a href="https://gitter.im/webpack/webpack"><img src="https://img.shields.io/badge/gitter-webpack%2Fwebpack-brightgreen.svg" alt="chat"/></a>
<a href="https://packagephobia.now.sh/result?p=terser-webpack-plugin"><img src="https://packagephobia.now.sh/badge?p=terser-webpack-plugin" alt="size"/></a></p><p>该插件使用 <a href="https://github.com/terser/terser">terser</a> 来压缩 JavaScript。</p><h2><span id="getting-started"></span>入门<a href="#getting-started" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>webpack v5 开箱即带有最新版本的 <code>terser-webpack-plugin</code>。如果你使用的是 webpack v5 或更高版本，同时希望自定义配置，那么仍需要安装 <code>terser-webpack-plugin</code>。如果使用 webpack v4，则必须安装 <code>terser-webpack-plugin</code> v4 的版本。</p><p>首先需要安装 <code>terser-webpack-plugin</code>：</p><pre><code class="hljs language-console">npm install terser-webpack-plugin --save-dev
</code></pre><p>然后将插件添加到 <code>webpack</code> 配置文件中，例如：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> TerserPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;terser-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>接下来，按照你习惯的方式运行 <code>webpack</code>。</p><h2><span id="note-about-source-maps"></span>关于 source map 的说明<a href="#note-about-source-maps" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><strong>只对 <a href="/configuration/devtool/"><code>devtool</code></a> 选项的 <code>source-map</code>，<code>inline-source-map</code>，<code>hidden-source-map</code> 和 <code>nosources-source-map</code> 有效</strong>。</p><p>为何如此？</p><ul><li><code>eval</code> 通过 <code>eval(&quot;string&quot;)</code> 包裹模块而压缩工具不会处理字符串。</li><li><code>cheap</code> 不存在列信息而压缩工具输出的文件为单行文件，只会留下一个映射。</li></ul><p>使用支持的 <code>devtool</code> 值可以生成 source map。</p><h2><span id="options"></span>选项<a href="#options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><ul><li><strong><a href="#test"><code>test</code></a></strong></li><li><strong><a href="#include"><code>include</code></a></strong></li><li><strong><a href="#exclude"><code>exclude</code></a></strong></li><li><strong><a href="#parallel"><code>parallel</code></a></strong></li><li><strong><a href="#minify"><code>minify</code></a></strong></li><li><strong><a href="#terseroptions"><code>terserOptions</code></a></strong></li><li><strong><a href="#extractcomments"><code>extractComments</code></a></strong></li></ul><h3><span id="test"></span><code>test</code><a href="#test" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>类型： <code>String|RegExp|Array&lt;String|RegExp&gt;</code>
默认值：<code>/\.m?js(\?.*)?$/i</code></p><p>用来匹配需要压缩的文件。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.js(\?.*)?$/i</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="include"></span><code>include</code><a href="#include" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>类型： <code>String|RegExp|Array&lt;String|RegExp&gt;</code>
默认值： <code>undefined</code></p><p>匹配参与压缩的文件。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        include<span class="token operator">:</span> <span class="token regex">/\/includes/</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="exclude"></span><code>exclude</code><a href="#exclude" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>类型： <code>String|RegExp|Array&lt;String|RegExp&gt;</code>
默认值： <code>undefined</code></p><p>匹配不需要压缩的文件。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        exclude<span class="token operator">:</span> <span class="token regex">/\/excludes/</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="parallel"></span><code>parallel</code><a href="#parallel" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>类型： <code>Boolean|Number</code>
默认值： <code>true</code></p><p>使用多进程并发运行以提高构建速度。
并发运行的默认数量： <code>os.cpus().length - 1</code> 。</p><blockquote><p>并发运行可以显著提高构建速度，因此<strong>强烈建议添加此配置</strong> 。</p></blockquote><blockquote><p>如果你使用 <strong>Circle CI</strong> 或任何其他不提供 CPU 实际可用数量的环境，则需要显式设置 CPU 数量，以避免 <code>Error: Call retries were exceeded</code>（请参阅 <a href="https://github.com/webpack-contrib/terser-webpack-plugin/issues/143">#143</a>，<a href="https://github.com/webpack-contrib/terser-webpack-plugin/issues/202">#202</a> ）。</p></blockquote><h4><span id="boolean"></span><code>Boolean</code><a href="#boolean" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>启用/禁用多进程并发运行功能。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        parallel<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="number"></span><code>Number</code><a href="#number" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>启用多进程并发运行并设置并发运行次数。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        parallel<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="minify"></span><code>minify</code><a href="#minify" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>类型： <code>Function</code>
默认值： <code>TerserPlugin.terserMinify</code></p><p>允许你自定义压缩函数。
默认情况下，插件使用 <a href="https://github.com/terser/terser">terser</a> 库。
对于使用和测试未发布的版本或 fork 的代码很帮助。</p><blockquote><p>⚠️ <strong>启用 <code>parallel</code> 选项时，在 <code>minify</code> 函数内部只能使用 <code>require</code></strong> 。</p></blockquote><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token comment">// Can be async</span>
<span class="token keyword">const</span> <span class="token function-variable function">minify</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">input<span class="token punctuation">,</span> sourceMap<span class="token punctuation">,</span> minimizerOptions<span class="token punctuation">,</span> extractsComments</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// The `minimizerOptions` option contains option from the `terserOptions` option</span>
  <span class="token comment">// You can use `minimizerOptions.myCustomOption`</span>

  <span class="token comment">// Custom logic for extract comments</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> map<span class="token punctuation">,</span> code <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;uglify-module&#x27;</span><span class="token punctuation">)</span> <span class="token comment">// Or require(&#x27;./path/to/uglify-module&#x27;)</span>
    <span class="token punctuation">.</span><span class="token function">minify</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token comment">/* Your options for minification */</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span> map<span class="token punctuation">,</span> code<span class="token punctuation">,</span> warnings<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> errors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> extractedComments<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Used to regenerate `fullhash`/`chunkhash` between different implementation</span>
<span class="token comment">// Example: you fix a bug in custom minimizer/custom function, but unfortunately webpack doesn&#x27;t know about it, so you will get the same fullhash/chunkhash</span>
<span class="token comment">// to avoid this you can provide version of your custom minimizer</span>
<span class="token comment">// You don&#x27;t need if you use only `contenthash`</span>
minify<span class="token punctuation">.</span><span class="token function-variable function">getMinimizerVersion</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> packageJson<span class="token punctuation">;</span>

  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// eslint-disable-next-line global-require, import/no-extraneous-dependencies</span>
    packageJson <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;uglify-module/package.json&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Ignore</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> packageJson <span class="token operator">&amp;&amp;</span> packageJson<span class="token punctuation">.</span>version<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        terserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
          myCustomOption<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        minify<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="terseroptions"></span><code>terserOptions</code><a href="#terseroptions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>类型： <code>Object</code>
默认值： <a href="https://github.com/terser/terser#minify-options">默认</a></p><p>Terser <a href="https://github.com/terser/terser#minify-options">配置项</a> 。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        terserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
          ecma<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
          parse<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          compress<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          mangle<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Note `mangle.properties` is `false` by default.</span>
          module<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token comment">// Deprecated</span>
          output<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
          format<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
          toplevel<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          nameCache<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
          ie8<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          keep_classnames<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
          keep_fnames<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          safari10<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="extractcomments"></span><code>extractComments</code><a href="#extractcomments" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>类型： <code>Boolean|String|RegExp|Function&lt;(node, comment) -&gt; Boolean|Object&gt;|Object</code>
默认值： <code>true</code></p><p>是否将注释剥离到单独的文件中（请参阅<a href="https://github.com/webpack/webpack/commit/71933e979e51c533b432658d5e37917f9e71595a">详细信息</a>）。
默认情况下，仅剥离 <code>/^\**!|@preserve|@license|@cc_on/i</code> 正则表达式匹配的注释，其余注释会删除。
如果原始文件名为 <code>foo.js</code> ，则注释将存储到 <code>foo.js.LICENSE.txt</code> 。
<code>terserOptions.format.comments</code> 选项指定是否保留注释，即可以在剥离其他注释时保留一些注释，甚至保留已剥离的注释。</p><h4><span id="boolean"></span><code>Boolean</code><a href="#boolean" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>启用/禁用剥离注释功能。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        extractComments<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="string"></span><code>String</code><a href="#string" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>剥离 <code>all</code> 或 <code>some</code> （使用 <code>/^\**!|@preserve|@license|@cc_on/i</code> 正则表达式进行匹配）注释。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        extractComments<span class="token operator">:</span> <span class="token string">&#x27;all&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="regexp"></span><code>RegExp</code><a href="#regexp" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>与指定表达式匹配的所有注释将会被剥离到单独的文件中。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        extractComments<span class="token operator">:</span> <span class="token regex">/@extract/i</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="functionnode-comment-----boolean"></span><code>Function&lt;(node, comment) -&gt; Boolean&gt;</code><a href="#functionnode-comment-----boolean" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>与指定表达式匹配的所有注释将会被剥离到单独的文件中。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token function-variable function">extractComments</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">astNode<span class="token punctuation">,</span> comment</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/@extract/i</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>comment<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="object"></span><code>Object</code><a href="#object" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>允许自定义剥离注释的条件，指定剥离的文件名和标题。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        extractComments<span class="token operator">:</span> <span class="token punctuation">{</span>
          condition<span class="token operator">:</span> <span class="token regex">/^\**!|@preserve|@license|@cc_on/i</span><span class="token punctuation">,</span>
          <span class="token function-variable function">filename</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">fileData</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// The &quot;fileData&quot; argument contains object with &quot;filename&quot;, &quot;basename&quot;, &quot;query&quot; and &quot;hash&quot;</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fileData<span class="token punctuation">.</span>filename<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.LICENSE.txt</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fileData<span class="token punctuation">.</span>query<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function-variable function">banner</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">licenseFile</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">License information can be found in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>licenseFile<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h5><span id="condition"></span><code>condition</code><a href="#condition" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p>类型： <code>Boolean|String|RegExp|Function&lt;(node, comment) -&gt; Boolean|Object&gt;</code></p><p>自定义需要剥离的注释。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        extractComments<span class="token operator">:</span> <span class="token punctuation">{</span>
          condition<span class="token operator">:</span> <span class="token string">&#x27;some&#x27;</span><span class="token punctuation">,</span>
          <span class="token function-variable function">filename</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">fileData</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// The &quot;fileData&quot; argument contains object with &quot;filename&quot;, &quot;basename&quot;, &quot;query&quot; and &quot;hash&quot;</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fileData<span class="token punctuation">.</span>filename<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.LICENSE.txt</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fileData<span class="token punctuation">.</span>query<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function-variable function">banner</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">licenseFile</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">License information can be found in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>licenseFile<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h5><span id="filename"></span><code>filename</code><a href="#filename" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p>类型： <code>String|Function&lt;(string) -&gt; String&gt;</code>
默认值： <code>[file].LICENSE.txt [query]</code></p><p>可用的占位符： <code>[file]</code> ， <code>[query]</code> 和 <code>[filebase]</code> （webpack 5 使用 <code>[base]</code> ）。</p><p>剥离出来的注释将被存储到的文件的文件名。
默认是将后缀 <code>.LICENSE.txt</code> 附加到原始文件名。</p><blockquote><p>⚠️ 我们强烈建议使用 <code>txt</code> 扩展名。
使用 <code>js</code> / <code>cjs</code> / <code>mjs</code> 扩展名可能会与现有资源文件冲突，从而导致代码运行出错。</p></blockquote><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        extractComments<span class="token operator">:</span> <span class="token punctuation">{</span>
          condition<span class="token operator">:</span> <span class="token regex">/^\**!|@preserve|@license|@cc_on/i</span><span class="token punctuation">,</span>
          filename<span class="token operator">:</span> <span class="token string">&#x27;extracted-comments.js&#x27;</span><span class="token punctuation">,</span>
          <span class="token function-variable function">banner</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">licenseFile</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">License information can be found in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>licenseFile<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h5><span id="banner"></span><code>banner</code><a href="#banner" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p>类型： <code>Boolean|String|Function&lt;(string) -&gt; String&gt;</code>
默认值： <code>/*! For license information please see ${commentsFile} */</code></p><p>指向剥离文件的标语文本将被添加到原始文件的顶部。
可以为 <code>false</code> （无标题）， <code>String</code> 或一个函数：<code>Function&lt;(string) -&gt; String&gt;</code> ，该函数将被使用存储剥离的注释的文件名来调用。
标语内容将被合并到注释中。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        extractComments<span class="token operator">:</span> <span class="token punctuation">{</span>
          condition<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token function-variable function">filename</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">fileData</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// The &quot;fileData&quot; argument contains object with &quot;filename&quot;, &quot;basename&quot;, &quot;query&quot; and &quot;hash&quot;</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fileData<span class="token punctuation">.</span>filename<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.LICENSE.txt</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fileData<span class="token punctuation">.</span>query<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function-variable function">banner</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">commentsFile</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">My custom banner about license information </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>commentsFile<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="examples"></span>示例<a href="#examples" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><h3><span id="preserve-comments"></span>保留注释<a href="#preserve-comments" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>剥离所有有效的注释（即 <code>/^\**!|@preserve|@license|@cc_on/i</code> ）并保留 <code>/@license/i</code> 注释。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        terserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
          format<span class="token operator">:</span> <span class="token punctuation">{</span>
            comments<span class="token operator">:</span> <span class="token regex">/@license/i</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        extractComments<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="remove-comments"></span>删除注释<a href="#remove-comments" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>如果要在构建时去除注释，请使用以下配置：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        terserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
          format<span class="token operator">:</span> <span class="token punctuation">{</span>
            comments<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        extractComments<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="uglify-js"></span><a href="https://github.com/mishoo/UglifyJS"><code>uglify-js</code></a><a href="#uglify-js" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><a href="https://github.com/mishoo/UglifyJS"><code>UglifyJS</code></a> 是一款集 JavaScript 解析器，压缩器，美化器于一身的工具集。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        minify<span class="token operator">:</span> TerserPlugin<span class="token punctuation">.</span>uglifyJsMinify<span class="token punctuation">,</span>
        <span class="token comment">// `terserOptions` options will be passed to `uglify-js`</span>
        <span class="token comment">// Link to options - https://github.com/mishoo/UglifyJS#minify-options</span>
        terserOptions<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="swc"></span><a href="https://github.com/swc-project/swc"><code>swc</code></a><a href="#swc" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><a href="https://github.com/swc-project/swc"><code>swc</code></a> 是一款采用 rust 编写的超快编译器；可以将最新标准和 TypeScript 的语法生成被广泛使用的 JavaScript。</p><blockquote><p>⚠ <code>extractComments</code> 选项暂不支持，所有注释将默认被删除，会在将来得到修复。</p></blockquote><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        minify<span class="token operator">:</span> TerserPlugin<span class="token punctuation">.</span>swcMinify<span class="token punctuation">,</span>
        <span class="token comment">// `terserOptions` options will be passed to `swc` (`@swc/core`)</span>
        <span class="token comment">// Link to options - https://swc.rs/docs/config-js-minify</span>
        terserOptions<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="esbuild"></span><a href="https://github.com/evanw/esbuild"><code>esbuild</code></a><a href="#esbuild" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><a href="https://github.com/evanw/esbuild"><code>esbuild</code></a> 是一款非常快速的 JavaScript 打包工具和压缩工具。</p><blockquote><p>⚠ 不支持 <code>extractComments</code> 选项，所有法律相关的注释（如版权，许可证等)将被保留。</p></blockquote><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        minify<span class="token operator">:</span> TerserPlugin<span class="token punctuation">.</span>esbuildMinify<span class="token punctuation">,</span>
        <span class="token comment">// `terserOptions` options will be passed to `esbuild`</span>
        <span class="token comment">// Link to options - https://esbuild.github.io/api/#minify</span>
        <span class="token comment">// Note: the `minify` options is true by default (and override other `minify*` options), so if you want to disable the `minifyIdentifiers` option (or other `minify*` options) please use:</span>
        <span class="token comment">// terserOptions: {</span>
        <span class="token comment">//   minify: false,</span>
        <span class="token comment">//   minifyWhitespace: true,</span>
        <span class="token comment">//   minifyIdentifiers: false,</span>
        <span class="token comment">//   minifySyntax: true,</span>
        <span class="token comment">// },</span>
        terserOptions<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="custom-minify-function"></span>自定义压缩函数<a href="#custom-minify-function" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>覆盖默认的 minify 函数 - 使用 <code>uglify-js</code> 进行压缩。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token function-variable function">minify</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> sourceMap</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// https://github.com/mishoo/UglifyJS2#minify-options</span>
          <span class="token keyword">const</span> uglifyJsOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token comment">/* your `uglify-js` package options */</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>

          <span class="token keyword">if</span> <span class="token punctuation">(</span>sourceMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            uglifyJsOptions<span class="token punctuation">.</span>sourceMap <span class="token operator">=</span> <span class="token punctuation">{</span>
              content<span class="token operator">:</span> sourceMap<span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">return</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;uglify-js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">minify</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> uglifyJsOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="typescript"></span>Typescript<a href="#typescript" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>使用默认 terser 压缩函数：</p><pre><code class="hljs language-ts"><span class="token keyword">module</span><span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        terserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
          compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>使用内置压缩函数：</p><pre><code class="hljs language-ts"><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> JsMinifyOptions <span class="token keyword">as</span> SwcOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;@swc/core&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> MinifyOptions <span class="token keyword">as</span> UglifyJSOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;uglify-js&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> TransformOptions <span class="token keyword">as</span> EsbuildOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;esbuild&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> MinifyOptions <span class="token keyword">as</span> TerserOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;terser&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">module</span><span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin<span class="token operator">&lt;</span>SwcOptions<span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        minify<span class="token operator">:</span> TerserPlugin<span class="token punctuation">.</span>swcMinify<span class="token punctuation">,</span>
        terserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// `swc` options</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin<span class="token operator">&lt;</span>UglifyJSOptions<span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        minify<span class="token operator">:</span> TerserPlugin<span class="token punctuation">.</span>uglifyJsMinify<span class="token punctuation">,</span>
        terserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// `uglif-js` options</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin<span class="token operator">&lt;</span>EsbuildOptions<span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        minify<span class="token operator">:</span> TerserPlugin<span class="token punctuation">.</span>esbuildMinify<span class="token punctuation">,</span>
        terserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// `esbuild` options</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

      <span class="token comment">// Alternative usage:</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin<span class="token operator">&lt;</span>TerserOptions<span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        minify<span class="token operator">:</span> TerserPlugin<span class="token punctuation">.</span>terserMinify<span class="token punctuation">,</span>
        terserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// `terser` options</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="contributing"></span>Contributing<a href="#contributing" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>请花一点时间阅读我们的贡献指南。</p><p><a href="https://github.com/webpack-contrib/terser-webpack-plugin/blob/master/.github/CONTRIBUTING.md">CONTRIBUTING</a></p><h2><span id="license"></span>许可证<a href="#license" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><a href="https://github.com/webpack-contrib/terser-webpack-plugin/blob/master/LICENSE">MIT</a></p><h1><span id="WatchIgnorePlugin"></span>WatchIgnorePlugin<a href="#WatchIgnorePlugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>Ignore the specified files, i.e. those matching the provided paths or regular expressions, while in <a href="/configuration/watch">watch mode</a>.</p><pre><code class="hljs language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>WatchIgnorePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> paths <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="options"></span>Options<a href="#options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><ul><li><code>paths</code> (<code>Array&lt;string | RegExp&gt;</code>): A list of RegExps or absolute paths to directories or files that should be ignored.</li></ul></div><div class="print:hidden mt-20"><a class="text-gray-500 dark:text-gray-500 text-sm cursor-pointer font-sans hover:underline" href="https://github.com/docschina/webpack.js.org/edit/cn/src/content/plugins/printable.mdx">编辑此页</a><span class="mx-5 text-black font-bold dark:text-white">·</span><a class="text-gray-500 dark:text-gray-500 text-sm cursor-pointer font-sans hover:underline">打印文档</a></div><div data-testid="contributors" class="print:hidden"><h2 class="!font-sans !font-normal">1<!-- --> <!-- -->位贡献者</h2><div><div class="grid gap-[10px] lg:gap-[15px] grid-cols-contributors"><a href="https://github.com/webpack"><img width="45" height="45" alt="webpack" title="webpack" class="w-full rounded-full shadow" src="/icon-square-small-slack.9281492bb267314634b4.png"/></a></div></div></div></div></section></div><footer class="footer"><div class="container footer__inner"><section class="footer__left"><a class="footer__link" href="/guides/getting-started/">快速开始</a><a class="footer__link" href="/comparison/">对比</a><a href="https://privacy-policy.openjsf.org/" target="_blank" rel="noopener noreferrer" class="footer__link">Privacy Policy</a></section><section class="footer__middle"><a class="footer__icon" href="/"><img src="/icon-square-small.85ba630cf0c5f29ae3e3.svg" alt="webpack icon" width="35" height="35"/></a></section><section class="footer__right"><a href="https://webpack.threadless.com/" target="_blank" rel="noopener noreferrer" class="footer__link">周边</a><a class="footer__link" href="/awesome-webpack/">Awesome webpack</a><a class="footer__link" href="/glossary/">术语</a><a class="footer__link" href="/branding/">品牌</a><a href="https://gitter.im/webpack/webpack" target="_blank" rel="noopener noreferrer" class="footer__link">Gitter</a><a href="https://github.com/webpack/webpack/releases" target="_blank" rel="noopener noreferrer" class="footer__link">更新日志</a><a class="footer__link footer__license" href="/license"><img alt="Creative Commons License" src="/cc.ab77d813bf219c6e34ff.svg" width="25" height="25"/><img alt="Creative Commons License" src="/by.1360bb2e6d1fc28cdd9e.svg" width="25" height="25"/></a></section></div></footer></div></div><script>
window.matchMedia('print').addListener(function(mql) {
  if (!mql.matches) {
      window.close();
  }
});
window.print();
</script><script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?f92e0e48311f635665d2de225751a349";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script></body>