"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1567],{1567:function(a,e,t){t.r(e),t(7378);var n=t(2682),p=["components"];function o(){return o=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},o.apply(this,arguments)}function s(a){var e=a.components,t=function(a,e){if(null==a)return{};var t,n,p=function(a,e){if(null==a)return{};var t,n,p={},o=Object.keys(a);for(n=0;n<o.length;n++)t=o[n],e.indexOf(t)>=0||(p[t]=a[t]);return p}(a,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);for(n=0;n<o.length;n++)t=o[n],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(a,t)&&(p[t]=a[t])}return p}(a,p);return(0,n.kt)("wrapper",o({components:e},t),(0,n.kt)("p",null,"如果已经通过 ",(0,n.kt)("a",{href:"/plugins/hot-module-replacement-plugin",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"HotModuleReplacementPlugin"))," 启用了 ",(0,n.kt)("a",{href:"/concepts/hot-module-replacement",parentName:"p"},"Hot Module Replacement"),", 则它的接口将被暴露在 ",(0,n.kt)("a",{href:"/api/module-variables/#modulehot-webpack-specific",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"module.hot"))," 以及 ",(0,n.kt)("a",{href:"/api/module-variables/#importmetawebpackHot",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"import.meta.webpackHot"))," 属性下。请注意，只有 ",(0,n.kt)("inlineCode",{parentName:"p"},"import.meta.webpackHot")," 可以在 ",(0,n.kt)("a",{href:"/guides/ecma-script-modules/#flagging-modules-as-esm",parentName:"p"},"strict ESM")," 中使用。"),(0,n.kt)("p",null,"通常，用户先要检查这个接口是否可访问, 再使用它。你可以这样使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"accept")," 操作一个更新的模块："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"hot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"hot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"accept"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'./library.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 对更新过的 library 模块做些事情..."),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// or"),"\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"meta",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"webpackHot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"meta",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"webpackHot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"accept"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'./library.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// Do something with the updated library module…"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"))),(0,n.kt)("p",null,"支持以下方法……"),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"module-api",parentName:"h2"}),"模块 API",(0,n.kt)("a",{href:"#module-api","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"accept",parentName:"h3"}),"accept",(0,n.kt)("a",{href:"#accept","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"接受(accept)给定 ",(0,n.kt)("inlineCode",{parentName:"p"},"依赖模块(dependencies)")," 的更新，并触发一个 ",(0,n.kt)("inlineCode",{parentName:"p"},"回调函数")," 来响应更新，除此之外，你可以附加一个可选的 error 处理程序："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"hot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"accept"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"\n  dependencies",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 可以是一个字符串或字符串数组"),"\n  callback ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 用于在模块更新后触发的函数"),"\n  errorHandler ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// (err, {moduleId, dependencyId}) => {}"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// or"),"\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"meta",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"webpackHot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"accept"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"\n  dependencies",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 可以是一个字符串或字符串数组"),"\n  callback",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 用于在模块更新后触发的函数"),"\n  errorHandler ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// (err, {moduleId, dependencyId}) => {}"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"当使用 ESM ",(0,n.kt)("inlineCode",{parentName:"p"},"import")," 时，所有从 ",(0,n.kt)("inlineCode",{parentName:"p"},"dependencies")," 中导入的符号都会自动更新。注意：依赖项字符串必须与 ",(0,n.kt)("inlineCode",{parentName:"p"},"import")," 中的 ",(0,n.kt)("inlineCode",{parentName:"p"},"from")," 字符串完全匹配。在某些情况下， 甚至可以省略 ",(0,n.kt)("inlineCode",{parentName:"p"},"callback"),"。在 ",(0,n.kt)("inlineCode",{parentName:"p"},"callback")," 中使用的 ",(0,n.kt)("inlineCode",{parentName:"p"},"require()")," 在这里没有任何意义。"),(0,n.kt)("p",null,"在使用 CommonJS 时，你应该通过 ",(0,n.kt)("inlineCode",{parentName:"p"},"callback")," 中的 ",(0,n.kt)("inlineCode",{parentName:"p"},"require()")," 手动更新依赖模块。省略 ",(0,n.kt)("inlineCode",{parentName:"p"},"callback")," 在这里没有任何意义。"),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"errorhandlerforaccept",parentName:"h4"}),"errorHandler for accept",(0,n.kt)("a",{href:"#errorhandlerforaccept","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"(err, {moduleId, dependencyId}) => {}")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"err"),": 当使用 ESM 依赖项时，回调函数在第二个参数中或在依赖项执行期间抛出的错误。"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"moduleId"),": 当前模块 id。"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"dependencyId"),": (第一个)被更改依赖项的模块 id。")),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"accept-self",parentName:"h3"}),"accept (self)",(0,n.kt)("a",{href:"#accept-self","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"接受自身更新。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"hot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"accept"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"\n  errorHandler ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 在计算新版本时处理错误的函数"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// or"),"\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"meta",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"webpackHot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"accept"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"\n  errorHandler ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// Function to handle errors when evaluating the new version"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"在此模块或依赖模块更新时，可以在不通知父依赖的情况下，对此模块处理和重新取值。如果此模块没有导出（或以其他方式更新的导出），这是有意义的。"),(0,n.kt)("p",null,"当执行此模块（或依赖模块）抛出异常时，会触发 ",(0,n.kt)("inlineCode",{parentName:"p"},"errorHandler"),"。"),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"errorhandlerforselfaccept",parentName:"h4"}),"errorHandler for self accept",(0,n.kt)("a",{href:"#errorhandlerforselfaccept","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"(err, {moduleId, module}) => {}")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"err"),": 计算新版本时的错误。"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"moduleId"),": 当前模块 id。"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"module"),": 当前模块实例。",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"module.hot"),": 允许访问出错模块实例的 HMR API。一个常见的场景是再次自我接收（accept）。添加一个 dispose 处理程序来传递数据也是有意义的。注意，错误的模块可能已经部分执行，所以请确保不要进入不一致的状态。你可以使用 ",(0,n.kt)("inlineCode",{parentName:"li"},"module.hot.data")," 存储部分状态。"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"module.exports"),": 可以被重载，但是要小心，因为属性名在生产模式下可能会被破坏。")))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"decline",parentName:"h3"}),"decline",(0,n.kt)("a",{href:"#decline","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"拒绝给定",(0,n.kt)("inlineCode",{parentName:"p"},"依赖模块"),"的更新，使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"'decline'")," 方法强制更新失败。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"hot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"decline"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"\n  dependencies ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 可以是一个字符串或字符串数组"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// or"),"\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"meta",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"webpackHot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"decline"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"\n  dependencies ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// Either a string or an array of strings"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"将依赖模块标记为不可更新(not-update-able)。在处理「依赖的导出正在更新」或「尚未实现处理」时，这是有意义的。取决于你的 HMR 管理代码，\n此依赖模块（或其未接受的依赖模块）更新，通常会导致页面被完全重新加载。"),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"decline-self",parentName:"h3"}),"decline (self)",(0,n.kt)("a",{href:"#decline-self","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"拒绝自身更新。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"hot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"decline"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// or"),"\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"meta",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"webpackHot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"decline"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"将依赖模块标记为不可更新(not-update-able)。当此模块具有无法避免的外部作用(side-effect)，或者尚未对此模块进行 HMR 处理时，这是有意义的。取决于你的 HMR 管理代码，此依赖模块（或其未接受的依赖模块）更新，通常会导致页面被完全重新加载。"),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"dispose-or-adddisposehandler",parentName:"h3"}),"dispose (or addDisposeHandler)",(0,n.kt)("a",{href:"#dispose-or-adddisposehandler","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"添加一个处理函数，在当前模块代码被替换时执行。此函数应该用于移除你声明或创建的任何持久资源。如果要将状态传入到更新过的模块，请添加给定 ",(0,n.kt)("inlineCode",{parentName:"p"},"data")," 参数。更新后，此对象在更新之后可通过 ",(0,n.kt)("inlineCode",{parentName:"p"},"module.hot.data")," 调用。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"hot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"dispose"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"data"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 清理并将 data 传递到更新后的模块..."),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// or"),"\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"meta",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"webpackHot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"dispose"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"data"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// Clean up and pass data to the updated module..."),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"invalidate",parentName:"h3"}),"invalidate",(0,n.kt)("a",{href:"#invalidate","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"调用此方法将使当前模块无效，而当前模块将在应用 HMR 更新时进行部署并重新创建。这个模块的更新像冒泡一样，拒绝自身更新。"),(0,n.kt)("p",null,"在 ",(0,n.kt)("inlineCode",{parentName:"p"},"idle")," 状态下调用时，将创建一个包含此模块的新 HMR 更新。HMR 将进入 ",(0,n.kt)("inlineCode",{parentName:"p"},"ready")," 状态。"),(0,n.kt)("p",null,"在 ",(0,n.kt)("inlineCode",{parentName:"p"},"ready")," 或 ",(0,n.kt)("inlineCode",{parentName:"p"},"prepare")," 状态下调用时，此模块将添加到当前 HMR 的更新中。"),(0,n.kt)("p",null,"在 ",(0,n.kt)("inlineCode",{parentName:"p"},"check")," 状态期间被调用时，如果有可用更新，则此模块将添加到更新中。如果没有可用的更新，它将创建一个新更新。HMR 将进入 ",(0,n.kt)("inlineCode",{parentName:"p"},"ready")," 状态。"),(0,n.kt)("p",null,"在 ",(0,n.kt)("inlineCode",{parentName:"p"},"dispose")," 或 ",(0,n.kt)("inlineCode",{parentName:"p"},"apply")," 状态下调用时，HMR 将在退出这些状态后将其拾取。"),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"use-cases",parentName:"h4"}),"用例",(0,n.kt)("a",{href:"#use-cases","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Conditional Accepting")),(0,n.kt)("p",null,"一个模块可以接受一个依赖，但是当依赖的改变无法处理时，可以调用 ",(0,n.kt)("inlineCode",{parentName:"p"},"invalidate"),"："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{")," x",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," y ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"from")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'./dep'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{")," processX",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," processY ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"from")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'anotherDep'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"const")," oldY ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," y",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"processX"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"x",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"export")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"default")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"processY"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"y",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\nmodule",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"hot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"accept"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'./dep'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"y ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"!==")," oldY",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 无法处理，冒泡给父级"),"\n    module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"hot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"invalidate"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n    ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 可以处理"),"\n  ",(0,n.kt)("span",{className:"token function",parentName:"code"},"processX"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"x",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Conditional self accept")),(0,n.kt)("p",null,"模块可以自我接受，但是当更改无法处理时可以使自身失效："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"const")," ",(0,n.kt)("span",{className:"token constant",parentName:"code"},"VALUE")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'constant'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"export")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"default")," ",(0,n.kt)("span",{className:"token constant",parentName:"code"},"VALUE"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"\n  module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"hot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"data ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"&&"),"\n  module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"hot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"data",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"value ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"&&"),"\n  module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"hot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"data",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"value ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"!==")," ",(0,n.kt)("span",{className:"token constant",parentName:"code"},"VALUE"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"hot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"invalidate"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"else")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"hot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"dispose"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"data"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    data",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"value ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token constant",parentName:"code"},"VALUE"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"hot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"accept"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Triggering custom HMR updates")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"const")," moduleId ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"chooseAModule"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"const")," code ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," __webpack_modules__",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"moduleId",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"toString"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n__webpack_modules__",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"moduleId",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"eval"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token template-string",parentName:"code"},(0,n.kt)("span",{className:"token template-punctuation string",parentName:"span"},"`"),(0,n.kt)("span",{className:"token string",parentName:"span"},"("),(0,n.kt)("span",{className:"token interpolation",parentName:"span"},(0,n.kt)("span",{className:"token interpolation-punctuation punctuation",parentName:"span"},"${"),(0,n.kt)("span",{className:"token function",parentName:"span"},"makeChanges"),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"("),"code",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},")"),(0,n.kt)("span",{className:"token interpolation-punctuation punctuation",parentName:"span"},"}")),(0,n.kt)("span",{className:"token string",parentName:"span"},")"),(0,n.kt)("span",{className:"token template-punctuation string",parentName:"span"},"`")),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"require",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"cache",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"moduleId",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  require",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"cache",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"moduleId",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"hot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"invalidate"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"hot"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"apply"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"))),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"当调用 ",(0,n.kt)("inlineCode",{parentName:"p"},"invalidate")," 时，将最终调用 ",(0,n.kt)("a",{href:"#dispose-or-adddisposehandler",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"dispose"))," 处理函数并填充 ",(0,n.kt)("inlineCode",{parentName:"p"},"module.hot.data"),"。如果未注册 ",(0,n.kt)("a",{href:"#dispose-or-adddisposehandler",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"dispose"))," 处理程序, 则将空对象提供给 ",(0,n.kt)("inlineCode",{parentName:"p"},"module.hot.data"),".")),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"通过一次次的调用 ",(0,n.kt)("inlineCode",{parentName:"p"},"invalidate"),"，不要陷入 ",(0,n.kt)("inlineCode",{parentName:"p"},"invalidate")," 循环。这将导致栈溢出并且 HMR 进入 ",(0,n.kt)("inlineCode",{parentName:"p"},"fail")," 状态。")),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"removedisposehandler",parentName:"h3"}),"removeDisposeHandler",(0,n.kt)("a",{href:"#removedisposehandler","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"删除由 ",(0,n.kt)("inlineCode",{parentName:"p"},"dispose")," 或 ",(0,n.kt)("inlineCode",{parentName:"p"},"addDisposeHandler")," 添加的回调函数。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"hot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"removeDisposeHandler"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"callback",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// or"),"\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"meta",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"webpackHot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"removeDisposeHandler"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"callback",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"management-api",parentName:"h2"}),"API 管理",(0,n.kt)("a",{href:"#management-api","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"status",parentName:"h3"}),"status",(0,n.kt)("a",{href:"#status","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"获取当前模块热替换进程的状态。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"hot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"status"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 返回以下字符串之一..."),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 或者"),"\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"meta",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"webpackHot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"status"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr"},"Status"),(0,n.kt)("th",{parentName:"tr"},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Status",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"idle")),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"该进程正在等待调用 ",(0,n.kt)("inlineCode",{parentName:"span"},"check"),"（见下文）"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Status",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"check")),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"该进程正在检查以更新"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Status",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"prepare    ")),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"该进程正在准备更新（例如，下载已更新的模块）"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Status",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"ready")),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"此更新已准备并可用"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Status",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"dispose")),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"该进程正在调用将被替换模块的 ",(0,n.kt)("inlineCode",{parentName:"span"},"dispose")," 处理函数"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Status",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"apply")),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"该进程正在调用 ",(0,n.kt)("inlineCode",{parentName:"span"},"accept")," 处理函数，并重新执行自我接受(self-accepted)的模块"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Status",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"abort")),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"更新已中止，但系统仍处于之前的状态"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Status",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"fail")),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"更新已抛出异常，系统状态已被破坏"))))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"check",parentName:"h3"}),"check",(0,n.kt)("a",{href:"#check","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"测试所有加载的模块以进行更新，如果有更新，则 ",(0,n.kt)("inlineCode",{parentName:"p"},"apply")," 它们。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"hot\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"check"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"autoApply",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"then"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"outdatedModules"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 超时的模块..."),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"catch"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"error"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 捕获错误"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// or"),"\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"meta",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"webpackHot\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"check"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"autoApply",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"then"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"outdatedModules"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// outdated modules..."),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"catch"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"error"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// catch errors"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"当被调用时，传递给 ",(0,n.kt)("inlineCode",{parentName:"p"},"apply")," 方法的 ",(0,n.kt)("inlineCode",{parentName:"p"},"autoApply")," 参数可以是布尔值，也可以是 ",(0,n.kt)("inlineCode",{parentName:"p"},"options"),"，"),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"apply",parentName:"h3"}),"apply",(0,n.kt)("a",{href:"#apply","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"继续更新进程（当 ",(0,n.kt)("inlineCode",{parentName:"p"},"module.hot.status() === 'ready'")," 时）。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"hot"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"apply"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"options",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"then"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"outdatedModules"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 超时的模块..."),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"catch"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"error"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 捕获错误"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// or"),"\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"meta",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"webpackHot"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"apply"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"options",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"then"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"outdatedModules"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// outdated modules..."),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"catch"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"error"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// catch errors"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"可选的 ",(0,n.kt)("inlineCode",{parentName:"p"},"options")," 对象可以包含以下属性："),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"ignoreUnaccepted")," (boolean): 忽略对不可接受的模块所做的更改。"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"ignoreDeclined")," (boolean): 忽略对已拒绝的模块所做的更改。"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"ignoreErrored")," (boolean): 忽略在接受处理程序、错误处理程序以及重新评估模块时抛出的错误。"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"onDeclined")," (function(info)): 拒绝模块的通知者。"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"onUnaccepted")," (function(info)): 不可接受的模块的通知程序。"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"onAccepted")," (function(info)): 可接受模块的通知者。"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"onDisposed")," (function(info)): 废弃模块的通知者。"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"onErrored")," (function(info)): 错误通知者。")),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"info")," 参数将是一个包含以下某些值的对象："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-ts",parentName:"pre"},(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"type"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'self-declined'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"|")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'declined'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"|"),"\n        ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'unaccepted'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"|")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'accepted'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"|"),"\n        ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'disposed'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"|")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'accept-errored'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"|"),"\n        ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'self-accept-errored'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"|")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'self-accept-error-handler-errored'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  moduleId",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token number",parentName:"code"},"4"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 有问题的模块。"),"\n  dependencyId",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token number",parentName:"code"},"3"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 对于错误：拥有接受处理程序的模块 ID。"),"\n  chain",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token number",parentName:"code"},"1"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token number",parentName:"code"},"2"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token number",parentName:"code"},"3"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token number",parentName:"code"},"4"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 对于拒绝/接受/不接受：传播更新的 `chain`。"),"\n  parentId",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token number",parentName:"code"},"5"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 对于拒绝：下降的父模块 ID。"),"\n  outdatedModules",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token number",parentName:"code"},"1"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token number",parentName:"code"},"2"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token number",parentName:"code"},"3"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token number",parentName:"code"},"4"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 对于接受：已过时且将被处置的模块。"),"\n  outdatedDependencies",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 对于接受：将处理更新的接受处理程序的位置。"),"\n    ",(0,n.kt)("span",{className:"token number",parentName:"code"},"5"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token number",parentName:"code"},"4"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  error",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,n.kt)("span",{className:"token class-name",parentName:"code"},"Error"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token operator",parentName:"code"},"..."),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 对于错误：抛出错误"),"\n  originalError",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,n.kt)("span",{className:"token class-name",parentName:"code"},"Error"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token operator",parentName:"code"},"..."),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 对于自我接受错误处理程序错误："),"\n                                ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 在错误处理程序尝试处理该模块之前，该模块引发的错误。"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"addstatushandler",parentName:"h3"}),"addStatusHandler",(0,n.kt)("a",{href:"#addstatushandler","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"注册一个函数来监听 ",(0,n.kt)("inlineCode",{parentName:"p"},"status")," 的变化。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"hot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"addStatusHandler"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"status"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 响应当前状态..."),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// or"),"\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"meta",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"webpackHot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"addStatusHandler"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"status"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// React to the current status..."),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"请记住，当 status 处理函数返回一个 ",(0,n.kt)("inlineCode",{parentName:"p"},"Promise")," 时，HMR 系统将会在继续之前等待 ",(0,n.kt)("inlineCode",{parentName:"p"},"Promise")," resolve。"),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"removestatushandler",parentName:"h3"}),"removeStatusHandler",(0,n.kt)("a",{href:"#removestatushandler","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"移除一个注册的状态处理函数。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"hot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"removeStatusHandler"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"callback",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// or"),"\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"meta",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"webpackHot",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"removeStatusHandler"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"callback",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))))}s.isMDXComponent=!0,e.default=s}}]);