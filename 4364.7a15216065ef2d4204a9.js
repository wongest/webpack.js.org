"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4364],{4364:function(a,e,n){n.r(e),n(7378);var t=n(2682),s=["components"];function p(){return p=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(a[t]=n[t])}return a},p.apply(this,arguments)}var m=("StackBlitzPreview",function(a){return console.warn("Component `%s` was not imported, exported, or provided by MDXProvider as global scope","StackBlitzPreview"),(0,t.kt)(t.kt.Fragment,null,a.children)});function c(a){var e=a.components,n=function(a,e){if(null==a)return{};var n,t,s=function(a,e){if(null==a)return{};var n,t,s={},p=Object.keys(a);for(t=0;t<p.length;t++)n=p[t],e.indexOf(n)>=0||(s[n]=a[n]);return s}(a,e);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(a);for(t=0;t<p.length;t++)n=p[t],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(a,n)&&(s[n]=a[n])}return s}(a,s);return(0,t.kt)("wrapper",p({components:e},n),(0,t.kt)("p",null,"webpack 用于编译 JavaScript 模块。一旦完成 ",(0,t.kt)("a",{href:"/guides/installation",parentName:"p"},"安装")," 就可以通过 webpack ",(0,t.kt)("a",{href:"/api/cli",parentName:"p"},"CLI")," 或 ",(0,t.kt)("a",{href:"/api/node",parentName:"p"},"API")," 与其配合交互。如果还不熟悉 webpack，请阅读 ",(0,t.kt)("a",{href:"/concepts",parentName:"p"},"核心概念")," 和 ",(0,t.kt)("a",{href:"/comparison",parentName:"p"},"对比")," 了解为什么是使用 webpack 而非社区中的其他工具。"),(0,t.kt)("aside",{className:"warning"},(0,t.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,t.kt)("p",{parentName:"aside"},"运行 webpack 5 的 Node.js 最低版本是 10.13.0（LTS）。")),(0,t.kt)(m,{example:"getting-started?terminal=",mdxType:"StackBlitzPreview"}),(0,t.kt)("h2",null,(0,t.kt)("span",{id:"basic-setup",parentName:"h2"}),"基础设置",(0,t.kt)("a",{href:"#basic-setup","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,"首先创建进入一个目录并初始化 npm，然后 ",(0,t.kt)("a",{href:"/guides/installation#local-installation",parentName:"p"},"在本地安装 webpack"),"，接着安装 ",(0,t.kt)("a",{href:"https://github.com/webpack/webpack-cli",parentName:"p"},(0,t.kt)("inlineCode",{parentName:"a"},"webpack-cli")),"（此工具用于在命令行中运行 webpack）："),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-bash",parentName:"pre"},(0,t.kt)("span",{className:"token function",parentName:"code"},"mkdir")," webpack-demo\n",(0,t.kt)("span",{className:"token builtin class-name",parentName:"code"},"cd")," webpack-demo\n",(0,t.kt)("span",{className:"token function",parentName:"code"},"npm")," init -y\n",(0,t.kt)("span",{className:"token function",parentName:"code"},"npm")," ",(0,t.kt)("span",{className:"token function",parentName:"code"},"install")," webpack webpack-cli --save-dev")),(0,t.kt)("p",null,"整篇指南将使用 ",(0,t.kt)("inlineCode",{parentName:"p"},"diff")," 代码块展示对目录、文件和代码所做的修改。例如："),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,t.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,t.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,t.kt)("span",{className:"token line",parentName:"span"}," 这是需要复制到代码的新的一行\n")),(0,t.kt)("span",{className:"token deleted-sign deleted",parentName:"code"},(0,t.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,t.kt)("span",{className:"token line",parentName:"span"}," 这是需要从代码中移除的一行\n")),(0,t.kt)("span",{className:"token unchanged",parentName:"code"},(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"}," 这是不需要调整的一行")))),(0,t.kt)("p",null,"现在创建以下目录结构、文件和内容："),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"project")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,t.kt)("span",{className:"token unchanged",parentName:"code"},(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"}," webpack-demo\n"),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"}," |- package.json\n"),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"}," |- package-lock.json\n")),(0,t.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,t.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,t.kt)("span",{className:"token line",parentName:"span"}," |- index.html\n"),(0,t.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,t.kt)("span",{className:"token line",parentName:"span"}," |- /src\n"),(0,t.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,t.kt)("span",{className:"token line",parentName:"span"},"   |- index.js")))),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"src/index.js")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,t.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,t.kt)("span",{className:"token function",parentName:"code"},"component"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,t.kt)("span",{className:"token keyword",parentName:"code"},"const")," element ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," document",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.kt)("span",{className:"token function",parentName:"code"},"createElement"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.kt)("span",{className:"token string",parentName:"code"},"'div'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n  ",(0,t.kt)("span",{className:"token comment",parentName:"code"},"// 执行这一行需要引入 lodash（目前通过 script 脚本引入）"),"\n  element",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"innerHTML ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," _",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.kt)("span",{className:"token function",parentName:"code"},"join"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,t.kt)("span",{className:"token string",parentName:"code"},"'Hello'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'webpack'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"' '"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n  ",(0,t.kt)("span",{className:"token keyword",parentName:"code"},"return")," element",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n\ndocument",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"body",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.kt)("span",{className:"token function",parentName:"code"},"appendChild"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.kt)("span",{className:"token function",parentName:"code"},"component"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"index.html")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-html",parentName:"pre"},(0,t.kt)("span",{className:"token doctype",parentName:"code"},(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"<!"),(0,t.kt)("span",{className:"token doctype-tag",parentName:"span"},"DOCTYPE")," ",(0,t.kt)("span",{className:"token name",parentName:"span"},"html"),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},">")),"\n",(0,t.kt)("span",{className:"token tag",parentName:"code"},(0,t.kt)("span",{className:"token tag",parentName:"span"},(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"<"),"html"),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},">")),"\n  ",(0,t.kt)("span",{className:"token tag",parentName:"code"},(0,t.kt)("span",{className:"token tag",parentName:"span"},(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"<"),"head"),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},">")),"\n    ",(0,t.kt)("span",{className:"token tag",parentName:"code"},(0,t.kt)("span",{className:"token tag",parentName:"span"},(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"<"),"meta")," ",(0,t.kt)("span",{className:"token attr-name",parentName:"span"},"charset"),(0,t.kt)("span",{className:"token attr-value",parentName:"span"},(0,t.kt)("span",{className:"token punctuation attr-equals",parentName:"span"},"="),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},'"'),"utf-8",(0,t.kt)("span",{className:"token punctuation",parentName:"span"},'"'))," ",(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"/>")),"\n    ",(0,t.kt)("span",{className:"token tag",parentName:"code"},(0,t.kt)("span",{className:"token tag",parentName:"span"},(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"<"),"title"),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},">")),"起步",(0,t.kt)("span",{className:"token tag",parentName:"code"},(0,t.kt)("span",{className:"token tag",parentName:"span"},(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"</"),"title"),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},">")),"\n    ",(0,t.kt)("span",{className:"token tag",parentName:"code"},(0,t.kt)("span",{className:"token tag",parentName:"span"},(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"<"),"script")," ",(0,t.kt)("span",{className:"token attr-name",parentName:"span"},"src"),(0,t.kt)("span",{className:"token attr-value",parentName:"span"},(0,t.kt)("span",{className:"token punctuation attr-equals",parentName:"span"},"="),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},'"'),"https://unpkg.com/lodash@4.17.20",(0,t.kt)("span",{className:"token punctuation",parentName:"span"},'"')),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},">")),(0,t.kt)("span",{className:"token script",parentName:"code"}),(0,t.kt)("span",{className:"token tag",parentName:"code"},(0,t.kt)("span",{className:"token tag",parentName:"span"},(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"</"),"script"),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},">")),"\n  ",(0,t.kt)("span",{className:"token tag",parentName:"code"},(0,t.kt)("span",{className:"token tag",parentName:"span"},(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"</"),"head"),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},">")),"\n  ",(0,t.kt)("span",{className:"token tag",parentName:"code"},(0,t.kt)("span",{className:"token tag",parentName:"span"},(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"<"),"body"),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},">")),"\n    ",(0,t.kt)("span",{className:"token tag",parentName:"code"},(0,t.kt)("span",{className:"token tag",parentName:"span"},(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"<"),"script")," ",(0,t.kt)("span",{className:"token attr-name",parentName:"span"},"src"),(0,t.kt)("span",{className:"token attr-value",parentName:"span"},(0,t.kt)("span",{className:"token punctuation attr-equals",parentName:"span"},"="),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},'"'),"./src/index.js",(0,t.kt)("span",{className:"token punctuation",parentName:"span"},'"')),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},">")),(0,t.kt)("span",{className:"token script",parentName:"code"}),(0,t.kt)("span",{className:"token tag",parentName:"code"},(0,t.kt)("span",{className:"token tag",parentName:"span"},(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"</"),"script"),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},">")),"\n  ",(0,t.kt)("span",{className:"token tag",parentName:"code"},(0,t.kt)("span",{className:"token tag",parentName:"span"},(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"</"),"body"),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},">")),"\n",(0,t.kt)("span",{className:"token tag",parentName:"code"},(0,t.kt)("span",{className:"token tag",parentName:"span"},(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"</"),"html"),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},">")))),(0,t.kt)("p",null,"还需要调整 ",(0,t.kt)("inlineCode",{parentName:"p"},"package.json")," 文件以确保安装包是私有的，并移除 ",(0,t.kt)("inlineCode",{parentName:"p"},"main")," 入口，这可以防止意外发布代码。"),(0,t.kt)("aside",{className:"tip"},(0,t.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,t.kt)("p",{parentName:"aside"},"推荐阅读 ",(0,t.kt)("a",{href:"https://docs.npmjs.com/files/package.json",parentName:"p"},"npm 文档")," 以了解有关 ",(0,t.kt)("inlineCode",{parentName:"p"},"package.json")," 内在机制的更多信息。")),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"package.json")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,t.kt)("span",{className:"token unchanged",parentName:"code"},(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"{\n"),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},'  "name": "webpack-demo",\n'),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},'  "version": "1.0.0",\n'),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},'  "description": "",\n')),(0,t.kt)("span",{className:"token deleted-sign deleted",parentName:"code"},(0,t.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,t.kt)("span",{className:"token line",parentName:"span"},'  "main": "index.js",\n')),(0,t.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,t.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,t.kt)("span",{className:"token line",parentName:"span"},'  "private": true,\n')),(0,t.kt)("span",{className:"token unchanged",parentName:"code"},(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},'  "scripts": {\n'),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},'    "test": "echo \\"Error: no test specified\\" && exit 1"\n'),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"  },\n"),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},'  "keywords": [],\n'),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},'  "author": "",\n'),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},'  "license": "MIT",\n'),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},'  "devDependencies": {\n'),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},'    "webpack": "^5.38.1",\n'),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},'    "webpack-cli": "^4.7.2"\n'),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"  }\n"),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"}")))),(0,t.kt)("p",null,"在此示例中，",(0,t.kt)("inlineCode",{parentName:"p"},"<script>")," 标签之间存在隐式依赖关系。在 ",(0,t.kt)("inlineCode",{parentName:"p"},"index.js")," 文件执行之前，还需要在页面中先引入 ",(0,t.kt)("inlineCode",{parentName:"p"},"lodash"),"。",(0,t.kt)("inlineCode",{parentName:"p"},"index.js")," 并未显式声明需要 ",(0,t.kt)("inlineCode",{parentName:"p"},"lodash"),"，而是假定推测已经存在一个全局变量 ",(0,t.kt)("inlineCode",{parentName:"p"},"_"),"。"),(0,t.kt)("p",null,"使用这种方式管理 JavaScript 项目存在一些问题："),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"无法直接体现脚本的执行依赖于外部库。"),(0,t.kt)("li",{parentName:"ul"},"如果依赖不存在，或者引入顺序错误，应用程序将无法正常运行。"),(0,t.kt)("li",{parentName:"ul"},"如果依赖被引入但是并没有使用，浏览器将被迫下载无用代码。")),(0,t.kt)("p",null,"试试使用 webpack 管理这些脚本。"),(0,t.kt)("h2",null,(0,t.kt)("span",{id:"creating-a-bundle",parentName:"h2"}),"创建一个 bundle",(0,t.kt)("a",{href:"#creating-a-bundle","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,"首先稍微调整下目录结构，创建 ",(0,t.kt)("inlineCode",{parentName:"p"},"./dist")," 文件夹用于存放分发（distribution）代码，而 ",(0,t.kt)("inlineCode",{parentName:"p"},"./src")," 文件夹仍存放源代码。源代码是指用于书写和编辑的代码；分发代码是指在构建过程中，经过最小化和优化后产生的输出结果，分发代码最终将在浏览器中加载。调整后的目录结构如下："),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"project")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,t.kt)("span",{className:"token unchanged",parentName:"code"},(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"}," webpack-demo\n"),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"}," |- package.json\n"),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"}," |- package-lock.json\n")),(0,t.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,t.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,t.kt)("span",{className:"token line",parentName:"span"}," |- /dist\n"),(0,t.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,t.kt)("span",{className:"token line",parentName:"span"},"   |- index.html\n")),(0,t.kt)("span",{className:"token deleted-sign deleted",parentName:"code"},(0,t.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,t.kt)("span",{className:"token line",parentName:"span"}," |- index.html\n")),(0,t.kt)("span",{className:"token unchanged",parentName:"code"},(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"}," |- /src\n"),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"   |- index.js")))),(0,t.kt)("aside",{className:"tip"},(0,t.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,t.kt)("p",{parentName:"aside"},"尽管 ",(0,t.kt)("inlineCode",{parentName:"p"},"index.html")," 目前处于 ",(0,t.kt)("inlineCode",{parentName:"p"},"dist")," 目录下，但它是手动创建的。指南的 ",(0,t.kt)("a",{href:"/guides/output-management/#setting-up-htmlwebpackplugin",parentName:"p"},"后续章节")," 会介绍如何生成 ",(0,t.kt)("inlineCode",{parentName:"p"},"index.html")," 而非手动编辑它。通过这样的方式便可安全地清空 ",(0,t.kt)("inlineCode",{parentName:"p"},"dist")," 目录并重新生成目录中的所有文件。")),(0,t.kt)("p",null,"在本地安装 ",(0,t.kt)("inlineCode",{parentName:"p"},"lodash")," 以在 ",(0,t.kt)("inlineCode",{parentName:"p"},"index.js")," 中打包它："),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-bash",parentName:"pre"},(0,t.kt)("span",{className:"token function",parentName:"code"},"npm")," ",(0,t.kt)("span",{className:"token function",parentName:"code"},"install")," --save lodash")),(0,t.kt)("aside",{className:"tip"},(0,t.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,t.kt)("p",{parentName:"aside"},"安装一个将被打包到生产环境 bundle 的包时，应该使用 ",(0,t.kt)("inlineCode",{parentName:"p"},"npm install --save"),"；而安装一个用于开发环境的包时（例如代码检查工具、测试库等），应该使用 ",(0,t.kt)("inlineCode",{parentName:"p"},"npm install --save-dev"),"。请查看 ",(0,t.kt)("a",{href:"https://docs.npmjs.com/cli/install",parentName:"p"},"npm 文档")," 以了解更多相关信息。")),(0,t.kt)("p",null,"现在在脚本中导入 ",(0,t.kt)("inlineCode",{parentName:"p"},"lodash"),"："),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"src/index.js")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,t.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,t.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,t.kt)("span",{className:"token line",parentName:"span"},"import _ from 'lodash';\n"),(0,t.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,t.kt)("span",{className:"token line",parentName:"span"},"\n")),(0,t.kt)("span",{className:"token unchanged",parentName:"code"},(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"function component() {\n"),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"  const element = document.createElement('div');\n")),"\n",(0,t.kt)("span",{className:"token deleted-sign deleted",parentName:"code"},(0,t.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,t.kt)("span",{className:"token line",parentName:"span"},"  // 执行这一行需要引入 lodash（目前通过 script 脚本引入）\n")),(0,t.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,t.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,t.kt)("span",{className:"token line",parentName:"span"},"  // lodash 现在使用 import 引入\n")),(0,t.kt)("span",{className:"token unchanged",parentName:"code"},(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"  element.innerHTML = _.join(['Hello', 'webpack'], ' ');\n")),"\n",(0,t.kt)("span",{className:"token unchanged",parentName:"code"},(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"  return element;\n"),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"}\n")),"\n",(0,t.kt)("span",{className:"token unchanged",parentName:"code"},(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"document.body.appendChild(component());")))),(0,t.kt)("p",null,"现在将打包所有脚本，因此需要更新 ",(0,t.kt)("inlineCode",{parentName:"p"},"index.html")," 文件。由于现在是通过 ",(0,t.kt)("inlineCode",{parentName:"p"},"import")," 引入 lodash，所以应将 lodash ",(0,t.kt)("inlineCode",{parentName:"p"},"<script>")," 删除；然后修改另一个 ",(0,t.kt)("inlineCode",{parentName:"p"},"<script>")," 标签来加载 bundle，而不是原始的 ",(0,t.kt)("inlineCode",{parentName:"p"},"./src")," 文件："),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"dist/index.html")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,t.kt)("span",{className:"token unchanged",parentName:"code"},(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"<!DOCTYPE html>\n"),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"<html>\n"),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"  <head>\n"),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},'    <meta charset="utf-8" />\n'),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"    <title>起步</title>\n")),(0,t.kt)("span",{className:"token deleted-sign deleted",parentName:"code"},(0,t.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,t.kt)("span",{className:"token line",parentName:"span"},'    <script src="https://unpkg.com/lodash@4.17.20"><\/script>\n')),(0,t.kt)("span",{className:"token unchanged",parentName:"code"},(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"  </head>\n"),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"  <body>\n")),(0,t.kt)("span",{className:"token deleted-sign deleted",parentName:"code"},(0,t.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,t.kt)("span",{className:"token line",parentName:"span"},'    <script src="./src/index.js"><\/script>\n')),(0,t.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,t.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,t.kt)("span",{className:"token line",parentName:"span"},'    <script src="main.js"><\/script>\n')),(0,t.kt)("span",{className:"token unchanged",parentName:"code"},(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"  </body>\n"),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"</html>")))),(0,t.kt)("p",null,"在此设置中 ",(0,t.kt)("inlineCode",{parentName:"p"},"index.js")," 显式要求引入的 ",(0,t.kt)("inlineCode",{parentName:"p"},"lodash")," 必须存在，然后将它绑定为 ",(0,t.kt)("inlineCode",{parentName:"p"},"_"),"（没有全局作用域污染）。webpack 能够利用模块生命的依赖信息构建依赖图，然后使用图生成一个优化过的 bundle，并能保证以正确顺序执行。"),(0,t.kt)("p",null,"换言之，执行 ",(0,t.kt)("inlineCode",{parentName:"p"},"npx webpack")," 会将脚本 ",(0,t.kt)("inlineCode",{parentName:"p"},"src/index.js")," 作为 ",(0,t.kt)("a",{href:"/concepts/entry-points",parentName:"p"},"入口起点"),"，也会生成 ",(0,t.kt)("inlineCode",{parentName:"p"},"dist/main.js")," 作为 ",(0,t.kt)("a",{href:"/concepts/output",parentName:"p"},"输出"),"。Node 8.2/npm 5.2.0 及以上版本提供的 ",(0,t.kt)("inlineCode",{parentName:"p"},"npx")," 命令，可以运行在最初安装的 webpack 包中的 webpack 二进制文件（即 ",(0,t.kt)("inlineCode",{parentName:"p"},"./node_modules/.bin/webpack"),"）："),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-bash",parentName:"pre"},"$ npx webpack\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"["),"webpack-cli",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"]")," Compilation finished\nasset main.js ",(0,t.kt)("span",{className:"token number",parentName:"code"},"69.3")," KiB ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"["),"emitted",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"["),"minimized",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"("),"name: main",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.kt)("span",{className:"token number",parentName:"code"},"1")," related asset\nruntime modules ",(0,t.kt)("span",{className:"token number",parentName:"code"},"1000")," bytes ",(0,t.kt)("span",{className:"token number",parentName:"code"},"5")," modules\ncacheable modules ",(0,t.kt)("span",{className:"token number",parentName:"code"},"530")," KiB\n  ./src/index.js ",(0,t.kt)("span",{className:"token number",parentName:"code"},"257")," bytes ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n  ./node_modules/lodash/lodash.js ",(0,t.kt)("span",{className:"token number",parentName:"code"},"530")," KiB ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\nwebpack ",(0,t.kt)("span",{className:"token number",parentName:"code"},"5.4"),".0 compiled successfully ",(0,t.kt)("span",{className:"token keyword",parentName:"code"},"in")," ",(0,t.kt)("span",{className:"token number",parentName:"code"},"1851")," ms")),(0,t.kt)("aside",{className:"tip"},(0,t.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,t.kt)("p",{parentName:"aside"},"输出可能会稍有不同，但是只要构建成功，那么就可以放心继续。")),(0,t.kt)("p",null,"在浏览器中打开 ",(0,t.kt)("inlineCode",{parentName:"p"},"dist")," 目录下的 ",(0,t.kt)("inlineCode",{parentName:"p"},"index.html"),"，如果一切正常就能看到以下文本：",(0,t.kt)("inlineCode",{parentName:"p"},"'Hello webpack'"),"。"),(0,t.kt)("h2",null,(0,t.kt)("span",{id:"modules",parentName:"h2"}),"模块",(0,t.kt)("a",{href:"#modules","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,"尽管大多数浏览器还无法支持在 ",(0,t.kt)("a",{href:"https://babeljs.io/learn-es2015/",parentName:"p"},"ES2015")," 中已经标准化的 ",(0,t.kt)("a",{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/import",parentName:"p"},(0,t.kt)("inlineCode",{parentName:"a"},"import"))," 和 ",(0,t.kt)("a",{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/export",parentName:"p"},(0,t.kt)("inlineCode",{parentName:"a"},"export")),"，但 webpack 能够提供开箱即用般的支持。"),(0,t.kt)("p",null,"事实上，webpack 会将代码转译以便可以在旧版本浏览器中执行。检查 ",(0,t.kt)("inlineCode",{parentName:"p"},"dist/main.js")," 你可以看到 webpack 具体是如何工作的，这是独创精巧的设计！除了 ",(0,t.kt)("inlineCode",{parentName:"p"},"import")," 和 ",(0,t.kt)("inlineCode",{parentName:"p"},"export"),"，webpack 还能够很好地支持多种其他模块语法，查看 ",(0,t.kt)("a",{href:"/api/module-methods",parentName:"p"},"模块 API")," 以了解更多相关信息。"),(0,t.kt)("p",null,"注意，webpack 不会更改代码中除 ",(0,t.kt)("inlineCode",{parentName:"p"},"import")," 和 ",(0,t.kt)("inlineCode",{parentName:"p"},"export")," 语句以外的部分。如果正在使用其它 ",(0,t.kt)("a",{href:"http://es6-features.org/",parentName:"p"},"ES2015 特性"),"，请确保 webpack 的 ",(0,t.kt)("a",{href:"/concepts/loaders/",parentName:"p"},"loader 系统")," 中使用了像 ",(0,t.kt)("a",{href:"https://babel.docschina.org/",parentName:"p"},"Babel")," 一样的 ",(0,t.kt)("a",{href:"/loaders/#transpiling",parentName:"p"},"转译器"),"。"),(0,t.kt)("h2",null,(0,t.kt)("span",{id:"using-a-configuration",parentName:"h2"}),"使用配置文件",(0,t.kt)("a",{href:"#using-a-configuration","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,"webpack v4 无须任何配置即可运行，然而大多数项目会需要很复杂的设置，因此 webpack 仍然支持 ",(0,t.kt)("a",{href:"/concepts/configuration",parentName:"p"},"配置文件"),"，这比在终端中手动输入大量命令更加高效。接下来创建一个 webpack 配置文件："),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"project")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,t.kt)("span",{className:"token unchanged",parentName:"code"},(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"}," webpack-demo\n"),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"}," |- package.json\n"),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"}," |- package-lock.json\n")),(0,t.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,t.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,t.kt)("span",{className:"token line",parentName:"span"}," |- webpack.config.js\n")),(0,t.kt)("span",{className:"token unchanged",parentName:"code"},(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"}," |- /dist\n"),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"   |- index.html\n"),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"}," |- /src\n"),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"   |- index.js")))),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,t.kt)("span",{className:"token keyword",parentName:"code"},"const")," path ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.kt)("span",{className:"token function",parentName:"code"},"require"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.kt)("span",{className:"token string",parentName:"code"},"'path'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\nmodule",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  entry",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'./src/index.js'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  output",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    filename",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'main.js'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    path",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," path",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.kt)("span",{className:"token function",parentName:"code"},"resolve"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"("),"__dirname",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'dist'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.kt)("p",null,"现在，让我们通过新的配置文件再次执行构建："),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-bash",parentName:"pre"},"$ npx webpack --config webpack.config.js\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"["),"webpack-cli",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"]")," Compilation finished\nasset main.js ",(0,t.kt)("span",{className:"token number",parentName:"code"},"69.3")," KiB ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"["),"compared ",(0,t.kt)("span",{className:"token keyword",parentName:"code"},"for")," emit",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"["),"minimized",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"("),"name: main",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.kt)("span",{className:"token number",parentName:"code"},"1")," related asset\nruntime modules ",(0,t.kt)("span",{className:"token number",parentName:"code"},"1000")," bytes ",(0,t.kt)("span",{className:"token number",parentName:"code"},"5")," modules\ncacheable modules ",(0,t.kt)("span",{className:"token number",parentName:"code"},"530")," KiB\n  ./src/index.js ",(0,t.kt)("span",{className:"token number",parentName:"code"},"257")," bytes ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n  ./node_modules/lodash/lodash.js ",(0,t.kt)("span",{className:"token number",parentName:"code"},"530")," KiB ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\nwebpack ",(0,t.kt)("span",{className:"token number",parentName:"code"},"5.4"),".0 compiled successfully ",(0,t.kt)("span",{className:"token keyword",parentName:"code"},"in")," ",(0,t.kt)("span",{className:"token number",parentName:"code"},"1934")," ms")),(0,t.kt)("aside",{className:"tip"},(0,t.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,t.kt)("p",{parentName:"aside"},"如果 ",(0,t.kt)("inlineCode",{parentName:"p"},"webpack.config.js")," 存在，则 ",(0,t.kt)("inlineCode",{parentName:"p"},"webpack")," 命令将默认选择使用它。此处使用 ",(0,t.kt)("inlineCode",{parentName:"p"},"--config")," 选项只是表明可以传递任何名称的配置文件。这对于需要拆分成多个文件的复杂配置是非常有用的。")),(0,t.kt)("p",null,"比起 CLI 这种简单直接的使用方式，配置文件更加灵活。开发者可以在配置文件中指定 loader 规则、插件、resolve 选项，以及许多其他增强功能。请查看 ",(0,t.kt)("a",{href:"/configuration",parentName:"p"},"配置文档")," 以了解更多相关信息。"),(0,t.kt)("h2",null,(0,t.kt)("span",{id:"npm-scripts",parentName:"h2"}),"npm scripts",(0,t.kt)("a",{href:"#npm-scripts","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,"考虑到使用 CLI 这种方式运行本地 webpack 副本不是特别方便，可以在 package.json 文件中添加 ",(0,t.kt)("a",{href:"https://docs.npmjs.com/misc/scripts",parentName:"p"},"npm script")," 以设置一个快捷方式："),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"package.json")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-diff",parentName:"pre"},(0,t.kt)("span",{className:"token unchanged",parentName:"code"},(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"{\n"),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},'  "name": "webpack-demo",\n'),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},'  "version": "1.0.0",\n'),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},'  "description": "",\n'),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},'  "private": true,\n'),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},'  "scripts": {\n')),(0,t.kt)("span",{className:"token deleted-sign deleted",parentName:"code"},(0,t.kt)("span",{className:"token prefix deleted",parentName:"span"},"-"),(0,t.kt)("span",{className:"token line",parentName:"span"},'    "test": "echo \\"Error: no test specified\\" && exit 1"\n')),(0,t.kt)("span",{className:"token inserted-sign inserted",parentName:"code"},(0,t.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,t.kt)("span",{className:"token line",parentName:"span"},'    "test": "echo \\"Error: no test specified\\" && exit 1",\n'),(0,t.kt)("span",{className:"token prefix inserted",parentName:"span"},"+"),(0,t.kt)("span",{className:"token line",parentName:"span"},'    "build": "webpack"\n')),(0,t.kt)("span",{className:"token unchanged",parentName:"code"},(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"  },\n"),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},'  "keywords": [],\n'),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},'  "author": "",\n'),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},'  "license": "ISC",\n'),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},'  "devDependencies": {\n'),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},'    "webpack": "^5.4.0",\n'),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},'    "webpack-cli": "^4.2.0"\n'),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"  },\n"),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},'  "dependencies": {\n'),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},'    "lodash": "^4.17.20"\n'),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"  }\n"),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"},"}")))),(0,t.kt)("p",null,"现在可以使用 ",(0,t.kt)("inlineCode",{parentName:"p"},"npm run build")," 命令替代之前使用的 ",(0,t.kt)("inlineCode",{parentName:"p"},"npx")," 命令。注意，使用 npm ",(0,t.kt)("inlineCode",{parentName:"p"},"scripts")," 便可以像使用 ",(0,t.kt)("inlineCode",{parentName:"p"},"npx")," 那样通过模块名引用本地安装的 npm 包。这是大多数基于 npm 的项目遵循的标准，因为它允许所有贡献者使用同一组通用脚本。"),(0,t.kt)("p",null,"运行以下命令看看脚本别名是否正常运行："),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-bash",parentName:"pre"},"$ ",(0,t.kt)("span",{className:"token function",parentName:"code"},"npm")," run build\n\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},".."),".\n\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"["),"webpack-cli",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"]")," Compilation finished\nasset main.js ",(0,t.kt)("span",{className:"token number",parentName:"code"},"69.3")," KiB ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"["),"compared ",(0,t.kt)("span",{className:"token keyword",parentName:"code"},"for")," emit",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"["),"minimized",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"("),"name: main",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.kt)("span",{className:"token number",parentName:"code"},"1")," related asset\nruntime modules ",(0,t.kt)("span",{className:"token number",parentName:"code"},"1000")," bytes ",(0,t.kt)("span",{className:"token number",parentName:"code"},"5")," modules\ncacheable modules ",(0,t.kt)("span",{className:"token number",parentName:"code"},"530")," KiB\n  ./src/index.js ",(0,t.kt)("span",{className:"token number",parentName:"code"},"257")," bytes ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n  ./node_modules/lodash/lodash.js ",(0,t.kt)("span",{className:"token number",parentName:"code"},"530")," KiB ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\nwebpack ",(0,t.kt)("span",{className:"token number",parentName:"code"},"5.4"),".0 compiled successfully ",(0,t.kt)("span",{className:"token keyword",parentName:"code"},"in")," ",(0,t.kt)("span",{className:"token number",parentName:"code"},"1940")," ms")),(0,t.kt)("aside",{className:"tip"},(0,t.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,t.kt)("p",{parentName:"aside"},"可以通过在 ",(0,t.kt)("inlineCode",{parentName:"p"},"npm run build")," 命令与参数之间添加两个连接符的方式向 webpack 传递自定义参数，例如：",(0,t.kt)("inlineCode",{parentName:"p"},"npm run build -- --color"),"。")),(0,t.kt)("h2",null,(0,t.kt)("span",{id:"conclusion",parentName:"h2"}),"总结",(0,t.kt)("a",{href:"#conclusion","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,"现在已经有了一个基础构建配置，可以移至下一指南——",(0,t.kt)("a",{href:"/guides/asset-management",parentName:"p"},(0,t.kt)("inlineCode",{parentName:"a"},"资源管理")),"，以了解如何通过 webpack 管理诸如图像、图标等资源。此刻你的项目目录看起来应该如下："),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"project")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-diff",parentName:"pre"},"webpack-demo\n|- package.json\n|- package-lock.json\n|- webpack.config.js\n|- /dist\n",(0,t.kt)("span",{className:"token unchanged",parentName:"code"},(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"}," |- main.js\n"),(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"}," |- index.html\n")),"|- /src\n",(0,t.kt)("span",{className:"token unchanged",parentName:"code"},(0,t.kt)("span",{className:"token prefix unchanged",parentName:"span"}," "),(0,t.kt)("span",{className:"token line",parentName:"span"}," |- index.js\n")),"|- /node_modules")),(0,t.kt)("aside",{className:"warning"},(0,t.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,t.kt)("p",{parentName:"aside"},"不要使用 webpack 编译不可信的代码。它可能会在计算机，远程服务器或者在 web 应用程序使用者的浏览器中执行恶意代码。")),(0,t.kt)("p",null,"如果想要了解 webpack 设计思想，可以查看 ",(0,t.kt)("a",{href:"/concepts",parentName:"p"},"基本概念")," 和 ",(0,t.kt)("a",{href:"/configuration",parentName:"p"},"配置")," 页面。此外也能够在 ",(0,t.kt)("a",{href:"/api",parentName:"p"},"API")," 章节深入了解 webpack 提供的各种接口。"))}c.isMDXComponent=!0,e.default=c}}]);