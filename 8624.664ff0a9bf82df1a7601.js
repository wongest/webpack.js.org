"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8624],{8624:function(e,a,t){t.r(a),t(7378);var n=t(2682);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},p.apply(this,arguments)}function o(e){let{components:a,...t}=e;return(0,n.kt)("wrapper",p({components:a},t),(0,n.kt)("p",null,"从 webpack 4 开始，会根据你选择的 ",(0,n.kt)("a",{href:"/concepts/mode/",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"mode"))," 来执行不同的优化，\n不过所有的优化还是可以手动配置和重写。"),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"optimizationchunkids",parentName:"h2"}),"optimization.chunkIds",(0,n.kt)("a",{href:"#optimizationchunkids","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean = false")," ",(0,n.kt)("inlineCode",{parentName:"p"},"string: 'natural' | 'named' | 'size' | 'total-size' | 'deterministic'")),(0,n.kt)("p",null,"告知 webpack 当选择模块 id 时需要使用哪种算法。将 ",(0,n.kt)("inlineCode",{parentName:"p"},"optimization.chunkIds")," 设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"false")," 会告知 webpack 没有任何内置的算法会被使用，但自定义的算法会由插件提供。",(0,n.kt)("inlineCode",{parentName:"p"},"optimization.chunkIds")," 的默认值是 ",(0,n.kt)("inlineCode",{parentName:"p"},"false"),"："),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"如果环境是开发环境，那么 ",(0,n.kt)("inlineCode",{parentName:"li"},"optimization.chunkIds")," 会被设置成 ",(0,n.kt)("inlineCode",{parentName:"li"},"'named'"),"，但当在生产环境中时，它会被设置成 ",(0,n.kt)("inlineCode",{parentName:"li"},"'deterministic'")),(0,n.kt)("li",{parentName:"ul"},"如果上述的条件都不符合, ",(0,n.kt)("inlineCode",{parentName:"li"},"optimization.chunkIds")," 会被默认设置为 ",(0,n.kt)("inlineCode",{parentName:"li"},"'natural'"))),(0,n.kt)("p",null,"下述选项字符串值均为被支持："),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr"},"选项值"),(0,n.kt)("th",{parentName:"tr"},"描述"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"选项值",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"'natural'"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"按使用顺序的数字 id。"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"选项值",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"'named'"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"对调试更友好的可读的 id。"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"选项值",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"'deterministic'"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"在不同的编译中不变的短数字 id。有益于长期缓存。在生产模式中会默认开启。"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"选项值",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"'size'"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"专注于让初始下载包大小更小的数字 id。"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"选项值",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"'total-size'"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"专注于让总下载包大小更小的数字 id。"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    chunkIds",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'named'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"默认地，当 ",(0,n.kt)("inlineCode",{parentName:"p"},"optimization.chunkIds")," 被设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"'deterministic'")," 时，最少 3 位数字会被使用。要覆盖默认的行为，要将 ",(0,n.kt)("inlineCode",{parentName:"p"},"optimization.chunkIds")," 设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"false"),"，同时要使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack.ids.DeterministicChunkIdsPlugin"),"。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    chunkIds",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"false"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  plugins",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n    ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,n.kt)("span",{className:"token class-name",parentName:"code"},"webpack",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"."),"ids",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"."),"DeterministicChunkIdsPlugin"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      maxLength",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token number",parentName:"code"},"5"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"optimizationconcatenatemodules",parentName:"h2"}),"optimization.concatenateModules",(0,n.kt)("a",{href:"#optimizationconcatenatemodules","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean")),(0,n.kt)("p",null,"告知 webpack 去寻找模块图形中的片段，哪些是可以安全地被合并到单一模块中。这取决于 ",(0,n.kt)("a",{href:"#optimizationprovidedexports",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"optimization.providedExports"))," 和 ",(0,n.kt)("a",{href:"#optimizationusedexports",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"optimization.usedExports")),"。\n默认 ",(0,n.kt)("inlineCode",{parentName:"p"},"optimization.concatenateModules")," 在 ",(0,n.kt)("inlineCode",{parentName:"p"},"生产")," ",(0,n.kt)("a",{href:"/configuration/mode/",parentName:"p"},"模式")," 下被启用，而在其它情况下被禁用。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    concatenateModules",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"optimizationemitonerrors",parentName:"h2"}),"optimization.emitOnErrors",(0,n.kt)("a",{href:"#optimizationemitonerrors","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean = false")),(0,n.kt)("p",null,"使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"optimization.emitOnErrors")," 在编译时每当有错误时，就会发送静态资源。这样可以确保出错的静态资源被发送出来。关键错误会被发送到生成的代码中，并会在运行时报错。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    emitOnErrors",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"如果你使用的是 webpack 的 ",(0,n.kt)("a",{href:"/api/cli/",parentName:"p"},"CLI"),'，当这个插件被启用时，webpack 进程不会以错误代码退出。如果你想让 webpack 在使用 CLI 时 "fail"，请查阅 ',(0,n.kt)("a",{href:"/api/cli/#advanced-options",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"bail")," 选项"),"。")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"optimizationflagincludedchunks",parentName:"h2"}),"optimization.flagIncludedChunks",(0,n.kt)("a",{href:"#optimizationflagincludedchunks","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean")),(0,n.kt)("p",null,"告知 webpack 确定和标记出作为其他 chunk 子集的那些 chunk，其方式是在已经加载过较大的 chunk 之后，就不再去加载这些 chunk 子集。",(0,n.kt)("inlineCode",{parentName:"p"},"optimization.flagIncludedChunks")," 默认会在 ",(0,n.kt)("inlineCode",{parentName:"p"},"production")," ",(0,n.kt)("a",{href:"/concepts/mode/",parentName:"p"},"模式")," 中启用，其他情况禁用。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    flagIncludedChunks",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"optimizationinnergraph",parentName:"h2"}),"optimization.innerGraph",(0,n.kt)("a",{href:"#optimizationinnergraph","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean = true")),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"optimization.innerGraph")," 告知 webpack 是否对未使用的导出内容，实施内部图形分析(graph analysis)。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    innerGraph",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"false"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"optimizationmangleexports",parentName:"h2"}),"optimization.mangleExports",(0,n.kt)("a",{href:"#optimizationmangleexports","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean")," ",(0,n.kt)("inlineCode",{parentName:"p"},"string: 'deterministic' | 'size'")),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"optimization.mangleExports")," 允许控制导出处理(export mangling)。"),(0,n.kt)("p",null,"默认 ",(0,n.kt)("inlineCode",{parentName:"p"},"optimization.mangleExports: 'deterministic'")," 会在 ",(0,n.kt)("inlineCode",{parentName:"p"},"production")," ",(0,n.kt)("a",{href:"/configuration/mode/",parentName:"p"},"模式下")," 启用而其它情况会被禁用。"),(0,n.kt)("p",null,"此选项支持以下选项："),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr"},"选项"),(0,n.kt)("th",{parentName:"tr"},"描述"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"选项",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"'size'"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"简写形式 — 通常只有一个字符 — 专注于最小的下载 size。"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"选项",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"'deterministic'"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"简写形式 - 通常两个字符 — 在添加或移除 export 时不会改变。适用于长效缓存。"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"选项",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"true"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"等价于 ",(0,n.kt)("inlineCode",{parentName:"span"},"'deterministic'")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"选项",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"false"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"保留原名，有利于阅读和调试。"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    mangleExports",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"optimizationmanglewasmimports",parentName:"h2"}),"optimization.mangleWasmImports",(0,n.kt)("a",{href:"#optimizationmanglewasmimports","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean = false")),(0,n.kt)("p",null,"在设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"true")," 时，告知 webpack 通过将导入修改为更短的字符串，来减少 WASM 大小。这会破坏模块和导出名称。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    mangleWasmImports",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"optimizationmergeduplicatechunks",parentName:"h2"}),"optimization.mergeDuplicateChunks",(0,n.kt)("a",{href:"#optimizationmergeduplicatechunks","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean = true")),(0,n.kt)("p",null,"告知 webpack 合并含有相同模块的 chunk。将 ",(0,n.kt)("inlineCode",{parentName:"p"},"optimization.mergeDuplicateChunks")," 设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"false")," 以禁用这项优化。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    mergeDuplicateChunks",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"false"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"optimizationminimize",parentName:"h2"}),"optimization.minimize",(0,n.kt)("a",{href:"#optimizationminimize","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean = true")),(0,n.kt)("p",null,"告知 webpack 使用 ",(0,n.kt)("a",{href:"/plugins/terser-webpack-plugin/",parentName:"p"},"TerserPlugin")," 或其它在 ",(0,n.kt)("a",{href:"#optimizationminimizer",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"optimization.minimizer")),"定义的插件压缩 bundle。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    minimize",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"false"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"了解 ",(0,n.kt)("a",{href:"/configuration/mode/",parentName:"p"},"mode")," 工作机制。")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"optimizationminimizer",parentName:"h2"}),"optimization.minimizer",(0,n.kt)("a",{href:"#optimizationminimizer","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"[TerserPlugin]")," 或 ",(0,n.kt)("inlineCode",{parentName:"p"},"[function (compiler)]")),(0,n.kt)("p",null,"允许你通过提供一个或多个定制过的 ",(0,n.kt)("a",{href:"/plugins/terser-webpack-plugin/",parentName:"p"},"TerserPlugin")," 实例，覆盖默认压缩工具(minimizer)。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"const")," TerserPlugin ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'terser-webpack-plugin'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\nmodule",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    minimizer",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n      ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,n.kt)("span",{className:"token class-name",parentName:"code"},"TerserPlugin"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n        parallel",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        terserOptions",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n          ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// https://github.com/webpack-contrib/terser-webpack-plugin#terseroptions"),"\n        ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"或，使用函数的形式："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    minimizer",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"compiler"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n        ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"const")," TerserPlugin ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'terser-webpack-plugin'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n        ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,n.kt)("span",{className:"token class-name",parentName:"code"},"TerserPlugin"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n          ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"/* 你的配置 */"),"\n        ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"apply"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"compiler",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"在 ",(0,n.kt)("inlineCode",{parentName:"p"},"optimization.minimizer")," 中可以使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"'...'")," 来访问默认值。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    minimizer",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,n.kt)("span",{className:"token class-name",parentName:"code"},"CssMinimizer"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'...'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"optimizationmoduleids",parentName:"h2"}),"optimization.moduleIds",(0,n.kt)("a",{href:"#optimizationmoduleids","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean: false")," ",(0,n.kt)("inlineCode",{parentName:"p"},"string: 'natural' | 'named' | 'deterministic' | 'size'")),(0,n.kt)("p",null,"告知 webpack 当选择模块 id 时需要使用哪种算法。将 ",(0,n.kt)("inlineCode",{parentName:"p"},"optimization.moduleIds")," 设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"false")," 会告知 webpack 没有任何内置的算法会被使用，但自定义的算法会由插件提供。"),(0,n.kt)("p",null,"下述选项字符串值均为被支持:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr"},"选荐值"),(0,n.kt)("th",{parentName:"tr"},"描述"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"选荐值",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"natural"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"按使用顺序的数字 id。"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"选荐值",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"named"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"对调试更友好的可读的 id。"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"选荐值",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"deterministic"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"被哈希转化成的小位数值模块名。"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"选荐值",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"size"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"专注于让初始下载包大小更小的数字 id。"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    moduleIds",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'deterministic'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"deterministic")," 选项有益于长期缓存，但对比于 ",(0,n.kt)("inlineCode",{parentName:"p"},"hashed")," 来说，它会导致更小的文件 bundles。数字值的长度会被选作用于填满最多 80%的 id 空间。当 ",(0,n.kt)("inlineCode",{parentName:"p"},"optimization.moduleIds")," 被设置成 ",(0,n.kt)("inlineCode",{parentName:"p"},"deterministic"),"，默认最小 3 位数字会被使用。要覆盖默认行为，要将 ",(0,n.kt)("inlineCode",{parentName:"p"},"optimization.moduleIds")," 设置成 ",(0,n.kt)("inlineCode",{parentName:"p"},"false"),"，并且要使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack.ids.DeterministicModuleIdsPlugin"),"。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    moduleIds",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"false"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  plugins",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n    ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,n.kt)("span",{className:"token class-name",parentName:"code"},"webpack",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"."),"ids",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"."),"DeterministicModuleIdsPlugin"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      maxLength",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token number",parentName:"code"},"5"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},(0,n.kt)("inlineCode",{parentName:"p"},"moduleIds: 'deterministic'")," 在 webpack 5 中被添加，而且 ",(0,n.kt)("inlineCode",{parentName:"p"},"moduleIds: 'hashed'")," 相应地会在 webpack 5 中废弃。")),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},(0,n.kt)("inlineCode",{parentName:"p"},"moduleIds: total-size")," 在 webpack 5 中被废弃。")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"optimizationnodeenv",parentName:"h2"}),"optimization.nodeEnv",(0,n.kt)("a",{href:"#optimizationnodeenv","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean = false")," ",(0,n.kt)("inlineCode",{parentName:"p"},"string")),(0,n.kt)("p",null,"告知 webpack 将 ",(0,n.kt)("inlineCode",{parentName:"p"},"process.env.NODE_ENV")," 设置为一个给定字符串。如果 ",(0,n.kt)("inlineCode",{parentName:"p"},"optimization.nodeEnv")," 不是 ",(0,n.kt)("inlineCode",{parentName:"p"},"false"),"，则会使用 ",(0,n.kt)("a",{href:"/plugins/define-plugin/",parentName:"p"},"DefinePlugin"),"，",(0,n.kt)("inlineCode",{parentName:"p"},"optimization.nodeEnv")," ",(0,n.kt)("strong",{parentName:"p"},"默认值"),"取决于 ",(0,n.kt)("a",{href:"/concepts/mode/",parentName:"p"},"mode"),"，如果为 false 值，则会回退到 ",(0,n.kt)("inlineCode",{parentName:"p"},'"production"'),"。"),(0,n.kt)("p",null,"可能的值有："),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"任何字符串：用于设置 ",(0,n.kt)("inlineCode",{parentName:"li"},"process.env.NODE_ENV")," 的值。"),(0,n.kt)("li",{parentName:"ul"},"false：不修改/设置 ",(0,n.kt)("inlineCode",{parentName:"li"},"process.env.NODE_ENV"),"的值。")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    nodeEnv",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'production'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"当 ",(0,n.kt)("a",{href:"/configuration/mode/",parentName:"p"},"mode")," 设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"'none'")," 时，",(0,n.kt)("inlineCode",{parentName:"p"},"optimization.nodeEnv")," 的默认值为 ",(0,n.kt)("inlineCode",{parentName:"p"},"false"),"。")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"optimizationportablerecords",parentName:"h2"}),"optimization.portableRecords",(0,n.kt)("a",{href:"#optimizationportablerecords","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean")),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"optimization.portableRecords")," 告知 webpack 生成带有相对路径的记录(records)使得可以移动上下文目录。"),(0,n.kt)("p",null,"默认 ",(0,n.kt)("inlineCode",{parentName:"p"},"optimization.portableRecords")," 被禁用。如果下列至少一个选项在 webpack 中被设置，该选项也会自动启用：",(0,n.kt)("a",{href:"/configuration/other-options/#recordspath",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"recordsPath")),", ",(0,n.kt)("a",{href:"/configuration/other-options/#recordsinputpath",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"recordsInputPath")),"，",(0,n.kt)("a",{href:"/configuration/other-options/#recordsoutputpath",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"recordsOutputPath")),"。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    portableRecords",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"optimizationprovidedexports",parentName:"h2"}),"optimization.providedExports",(0,n.kt)("a",{href:"#optimizationprovidedexports","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean")),(0,n.kt)("p",null,"告知 webpack 去确定那些由模块提供的导出内容，为 ",(0,n.kt)("inlineCode",{parentName:"p"},"export * from ...")," 生成更多高效的代码。默认 ",(0,n.kt)("inlineCode",{parentName:"p"},"optimization.providedExports")," 会被启用。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    providedExports",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"false"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"optimizationrealcontenthash",parentName:"h2"}),"optimization.realContentHash",(0,n.kt)("a",{href:"#optimizationrealcontenthash","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean = true")),(0,n.kt)("p",null,"在处理静态资源后添加额外的哈希编译，以获得正确的静态资源内容哈希。如果 ",(0,n.kt)("inlineCode",{parentName:"p"},"realContentHash")," 设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"false"),"，内部数据用于计算哈希值，当静态资源相同时，它可以改变。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    realContentHash",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"false"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"optimizationremoveavailablemodules",parentName:"h2"}),"optimization.removeAvailableModules",(0,n.kt)("a",{href:"#optimizationremoveavailablemodules","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean = false")),(0,n.kt)("p",null,"如果模块已经包含在所有父级模块中，告知 webpack 从 chunk 中检测出这些模块，或移除这些模块。将 ",(0,n.kt)("inlineCode",{parentName:"p"},"optimization.removeAvailableModules")," 设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"true")," 以启用这项优化。在 ",(0,n.kt)("a",{href:"/configuration/mode/",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"production")," 模式")," 中默认会被开启。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    removeAvailableModules",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},(0,n.kt)("inlineCode",{parentName:"p"},"optimization.removeAvailableModules")," 会削减了 webapck 的性能表现，而且将会在下一个主要发布版本中，在 ",(0,n.kt)("inlineCode",{parentName:"p"},"production")," 模式下会被禁用。如果你想获得额外的构建性能，请在 ",(0,n.kt)("inlineCode",{parentName:"p"},"production")," 模式中禁用它。")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"optimizationremoveemptychunks",parentName:"h2"}),"optimization.removeEmptyChunks",(0,n.kt)("a",{href:"#optimizationremoveemptychunks","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean = true")),(0,n.kt)("p",null,"如果 chunk 为空，告知 webpack 检测或移除这些 chunk。将 ",(0,n.kt)("inlineCode",{parentName:"p"},"optimization.removeEmptyChunks")," 设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"false")," 以禁用这项优化。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    removeEmptyChunks",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"false"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"optimizationruntimechunk",parentName:"h2"}),"optimization.runtimeChunk",(0,n.kt)("a",{href:"#optimizationruntimechunk","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"object")," ",(0,n.kt)("inlineCode",{parentName:"p"},"string")," ",(0,n.kt)("inlineCode",{parentName:"p"},"boolean")),(0,n.kt)("p",null,"将 ",(0,n.kt)("inlineCode",{parentName:"p"},"optimization.runtimeChunk")," 设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"true")," 或 ",(0,n.kt)("inlineCode",{parentName:"p"},"'multiple'"),"，会为每个入口添加一个只含有 runtime 的额外 chunk。此配置的别名如下："),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    runtimeChunk",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token function-variable function",parentName:"code"},"name"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"entrypoint"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token template-string",parentName:"code"},(0,n.kt)("span",{className:"token template-punctuation string",parentName:"span"},"`"),(0,n.kt)("span",{className:"token string",parentName:"span"},"runtime~"),(0,n.kt)("span",{className:"token interpolation",parentName:"span"},(0,n.kt)("span",{className:"token interpolation-punctuation punctuation",parentName:"span"},"${"),"entrypoint",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"."),"name",(0,n.kt)("span",{className:"token interpolation-punctuation punctuation",parentName:"span"},"}")),(0,n.kt)("span",{className:"token template-punctuation string",parentName:"span"},"`")),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"值 ",(0,n.kt)("inlineCode",{parentName:"p"},'"single"')," 会创建一个在所有生成 chunk 之间共享的运行时文件。此设置是如下设置的别名："),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    runtimeChunk",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      name",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'runtime'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"通过将 ",(0,n.kt)("inlineCode",{parentName:"p"},"optimization.runtimeChunk")," 设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"object"),"，对象中可以设置只有 ",(0,n.kt)("inlineCode",{parentName:"p"},"name")," 属性，其中属性值可以是名称或者返回名称的函数，用于为 runtime chunks 命名。"),(0,n.kt)("p",null,"默认值是 ",(0,n.kt)("inlineCode",{parentName:"p"},"false"),"：每个入口 chunk 中直接嵌入 runtime。"),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"对于每个 runtime chunk，导入的模块会被分别初始化，因此如果你在同一个页面中引用多个入口起点，请注意此行为。你或许应该将其设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"single"),"，或者使用其他只有一个 runtime 实例的配置。")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    runtimeChunk",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token function-variable function",parentName:"code"},"name"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"entrypoint"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token template-string",parentName:"code"},(0,n.kt)("span",{className:"token template-punctuation string",parentName:"span"},"`"),(0,n.kt)("span",{className:"token string",parentName:"span"},"runtimechunk~"),(0,n.kt)("span",{className:"token interpolation",parentName:"span"},(0,n.kt)("span",{className:"token interpolation-punctuation punctuation",parentName:"span"},"${"),"entrypoint",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"."),"name",(0,n.kt)("span",{className:"token interpolation-punctuation punctuation",parentName:"span"},"}")),(0,n.kt)("span",{className:"token template-punctuation string",parentName:"span"},"`")),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"optimizationsideeffects",parentName:"h2"}),"optimization.sideEffects",(0,n.kt)("a",{href:"#optimizationsideeffects","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean = true")," ",(0,n.kt)("inlineCode",{parentName:"p"},"string: 'flag'")),(0,n.kt)("p",null,"告知 webpack 去辨识 ",(0,n.kt)("inlineCode",{parentName:"p"},"package.json")," 中的 ",(0,n.kt)("a",{href:"https://github.com/webpack/webpack/blob/master/examples/side-effects/README.md",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"副作用"))," 标记或规则，以跳过那些当导出不被使用且被标记不包含副作用的模块。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"package.json")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-json",parentName:"pre"},(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token property",parentName:"code"},'"name"'),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},'"awesome npm module"'),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token property",parentName:"code"},'"version"'),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},'"1.0.0"'),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token property",parentName:"code"},'"sideEffects"'),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"false"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"))),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"请注意的是 ",(0,n.kt)("inlineCode",{parentName:"p"},"（副作用）sideEffects")," 需要在 npm 模块的 ",(0,n.kt)("inlineCode",{parentName:"p"},"package.json")," 文件中，但并不意味着你需要在你自己的引用那个大模块的项目中的\n",(0,n.kt)("inlineCode",{parentName:"p"},"package.json")," 中将 ",(0,n.kt)("inlineCode",{parentName:"p"},"sideEffects")," 设置成 ",(0,n.kt)("inlineCode",{parentName:"p"},"false"),"。")),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"optimization.sideEffects")," 取决于 ",(0,n.kt)("a",{href:"#optimizationprovidedexports",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"optimization.providedExports"))," 被设置成启用。这个依赖会有构建时间的损耗，但去掉模块会对性能有正面的影响，因为更少的代码被生成。该优化的效果取决于你的代码库，\n可以尝试这个特性以获取一些可能的性能优化。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    sideEffects",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"只使用手动 flag，并且不对源码进行分析："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    sideEffects",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'flag'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"此处的 ",(0,n.kt)("inlineCode",{parentName:"p"},"'flag'")," 值在非生产环境默认使用。"),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"optimization.sideEffects")," 时，当模块只包含无副作用的语句时，此模块也会被标记为无副作用。")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"optimizationsplitchunks",parentName:"h2"}),"optimization.splitChunks",(0,n.kt)("a",{href:"#optimizationsplitchunks","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"object")),(0,n.kt)("p",null,"对于动态导入模块，默认使用 webpack v4+ 提供的全新的通用分块策略(common chunk strategy)。请在 ",(0,n.kt)("a",{href:"/plugins/split-chunks-plugin/",parentName:"p"},"SplitChunksPlugin")," 页面中查看配置其行为的可用选项。"),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"optimizationusedexports",parentName:"h2"}),"optimization.usedExports",(0,n.kt)("a",{href:"#optimizationusedexports","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean = true")," ",(0,n.kt)("inlineCode",{parentName:"p"},"string: 'global'")),(0,n.kt)("p",null,"告知 webpack 去决定每个模块使用的导出内容。这取决于 ",(0,n.kt)("a",{href:"#optimizationprovidedexports",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"optimization.providedExports"))," 选项。由 ",(0,n.kt)("inlineCode",{parentName:"p"},"optimization.usedExports")," 收集的信息会被其它优化手段或者代码生成使用，比如未使用的导出内容不会被生成，当所有的使用都适配，导出名称会被处理做单个标记字符。\n在压缩工具中的无用代码清除会受益于该选项，而且能够去除未使用的导出内容。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    usedExports",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"false"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"选择退出每次运行时使用 export 分享："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    usedExports",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'global'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))))}o.isMDXComponent=!0,a.default=o}}]);